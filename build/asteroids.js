!function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return t[i].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="/build/",e(0)}([function(t,e,n){"use strict";var i,o=n(1),r=n(2),s=n(4),a=n(13),u=n(21),h=n(22),c=n(23),l=n(24),d=n(27),f=15;!function(t){t[t.Attract=0]="Attract",t[t.Game=1]="Game",t[t.Initials=2]="Initials",t[t.Start=3]="Start"}(i||(i={}));var p=function(){function t(){this.lastScore=0,this.init()}return t.prototype.init=function(t){var e=this;a.Sound.stop(),a.Sound.off(),this.mode=i.Start,this.highScoreMode=new h.HighScoreMode(this.lastScore),this.attractMode=new l.AttractMode(t||new s.World(u.highscores.top.score)),this.gameMode=new d.GameMode(new s.World(u.highscores.top.score)),this.attractTimer=0,this.gameMode.on("done",function(t,n){e.lastScore=n.score,u.highscores.qualifies(n.score)?(e.initialsMode=new c.InitialsMode(n.score),e.initialsMode.on("done",function(){e.init(n)}),a.Sound.stop(),a.Sound.off(),e.mode=i.Initials):e.init(n)}),this.attractStarted=!1},t.prototype.update=function(t){switch(this.mode){case i.Start:this.highScoreMode.update(t),this.attractStarted&&this.attractMode.update(t),r.Key.isPressed(r.Key.PLAYER_ONE_START)?(a.Sound.on(),this.mode=i.Game):this.updateAttractTimer(t);break;case i.Attract:this.attractMode.update(t),r.Key.isPressed(r.Key.PLAYER_ONE_START)?(a.Sound.on(),this.mode=i.Game):this.updateAttractTimer(t);break;case i.Initials:this.initialsMode.update(t);break;case i.Game:this.gameMode.update(t)}},t.prototype.render=function(t){switch(this.mode){case i.Start:this.highScoreMode.render(t);break;case i.Attract:this.attractMode.render(t);break;case i.Initials:this.initialsMode.render(t);break;case i.Game:this.gameMode.render(t)}r.Key.update()},t.prototype.updateAttractTimer=function(t){this.attractTimer+=t,this.attractTimer>=f&&(this.attractTimer=0,this.mode=this.mode===i.Attract?i.Start:i.Attract)},t}();e.Asteroids=p;var _=new p;setTimeout(function(){o.loop(_)},1e3)},function(t,e){"use strict";var n,i=function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()},o=0,r=i(),s=1/60,a=1e3,u=function(t){var e=function(){for(n=i(),o+=Math.min(1,(n-r)/a);o>s;)t.update(s),o-=s;t.render(o),r=n,requestAnimationFrame(e)};e()};e.loop=function(t){u(t)}},function(t,e,n){"use strict";var i=n(3),o=222,r=function(){function t(){var t=this;this.touched=!1,this.HYPERSPACE=32,this.ROTATE_LEFT=37,this.ROTATE_RIGHT=39,this.THRUST=38,this.FIRE=17,this.PLAYER_ONE_START=49,this.DEBUG=68,this.PAUSE=80,this.GOD=71,this.keys=new Array(o),this.prev=new Array(o);for(var e=0;e<o;e++)this.keys[e]=this.prev[e]=!1;window.onkeydown=function(e){t.keys[e.keyCode]=!0},window.onkeyup=function(e){t.keys[e.keyCode]=!1};var n=document.getElementById("game");this.mc=new i.Manager(n);var r=new i.Pan,s=new i.Tap,a=new i.Pinch({enable:!0});this.mc.add(r),this.mc.add(s,{interval:50}),this.mc.add(a),this.mc.on("panup",function(e){t.keys[t.THRUST]=!0}),this.mc.on("panleft",function(e){t.keys[t.ROTATE_LEFT]=!0}),this.mc.on("panright",function(e){t.keys[t.ROTATE_RIGHT]=!0}),this.mc.on("panend",function(e){t.keys[t.THRUST]=!1,t.keys[t.ROTATE_LEFT]=!1,t.keys[t.ROTATE_RIGHT]=!1}),this.mc.on("tap",function(e){t.keys[t.FIRE]=!0,t.keys[t.PLAYER_ONE_START]=!0,t.touched=!0}),this.mc.on("pinchout",function(e){t.keys[t.HYPERSPACE]=!0}),this.mc.on("pinchend",function(e){t.keys[t.HYPERSPACE]=!1})}return t.prototype.update=function(){for(var t=0;t<o;t++)this.prev[t]=this.keys[t];this.touched&&(this.keys[this.FIRE]=!1,this.keys[this.PLAYER_ONE_START]=!1),this.touched=!this.touched},t.prototype.isPressed=function(t){return this.prev[t]===!1&&this.keys[t]===!0},t.prototype.wasPressed=function(t){return this.prev[t]&&!this.keys[t]},t.prototype.isDown=function(t){return this.keys[t]},t}();e._Key=r,e.Key=new r},function(t,e,n){var i;!function(o,r,s,a){"use strict";function u(t,e,n){return setTimeout(f(t,n),e)}function h(t,e,n){return!!Array.isArray(t)&&(c(t,n[e],n),!0)}function c(t,e,n){var i;if(t)if(t.forEach)t.forEach(e,n);else if(t.length!==a)for(i=0;i<t.length;)e.call(n,t[i],i,t),i++;else for(i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i,t)}function l(t,e,n){var i="DEPRECATED METHOD: "+e+"\n"+n+" AT \n";return function(){var e=new Error("get-stack-trace"),n=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",r=o.console&&(o.console.warn||o.console.log);return r&&r.call(o.console,i,n),t.apply(this,arguments)}}function d(t,e,n){var i,o=e.prototype;i=t.prototype=Object.create(o),i.constructor=t,i._super=o,n&&_t(i,n)}function f(t,e){return function(){return t.apply(e,arguments)}}function p(t,e){return typeof t==mt?t.apply(e?e[0]||a:a,e):t}function _(t,e){return t===a?e:t}function y(t,e,n){c(w(e),function(e){t.addEventListener(e,n,!1)})}function v(t,e,n){c(w(e),function(e){t.removeEventListener(e,n,!1)})}function m(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function g(t,e){return t.indexOf(e)>-1}function w(t){return t.trim().split(/\s+/g)}function x(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var i=0;i<t.length;){if(n&&t[i][n]==e||!n&&t[i]===e)return i;i++}return-1}function b(t){return Array.prototype.slice.call(t,0)}function T(t,e,n){for(var i=[],o=[],r=0;r<t.length;){var s=e?t[r][e]:t[r];x(o,s)<0&&i.push(t[r]),o[r]=s,r++}return n&&(i=e?i.sort(function(t,n){return t[e]>n[e]}):i.sort()),i}function S(t,e){for(var n,i,o=e[0].toUpperCase()+e.slice(1),r=0;r<yt.length;){if(n=yt[r],i=n?n+o:e,i in t)return i;r++}return a}function A(){return St++}function k(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||o}function E(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){p(t.options.enable,[t])&&n.handler(e)},this.init()}function P(t){var e,n=t.options.inputClass;return new(e=n?n:Et?z:Pt?W:kt?X:N)(t,O)}function O(t,e,n){var i=n.pointers.length,o=n.changedPointers.length,r=e&Rt&&i-o===0,s=e&(Ct|Lt)&&i-o===0;n.isFirst=!!r,n.isFinal=!!s,r&&(t.session={}),n.eventType=e,I(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function I(t,e){var n=t.session,i=e.pointers,o=i.length;n.firstInput||(n.firstInput=B(e)),o>1&&!n.firstMultiple?n.firstMultiple=B(e):1===o&&(n.firstMultiple=!1);var r=n.firstInput,s=n.firstMultiple,a=s?s.center:r.center,u=e.center=R(i);e.timeStamp=xt(),e.deltaTime=e.timeStamp-r.timeStamp,e.angle=F(a,u),e.distance=L(a,u),M(n,e),e.offsetDirection=C(e.deltaX,e.deltaY);var h=j(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=h.x,e.overallVelocityY=h.y,e.overallVelocity=wt(h.x)>wt(h.y)?h.x:h.y,e.scale=s?G(s.pointers,i):1,e.rotation=s?H(s.pointers,i):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,D(n,e);var c=t.element;m(e.srcEvent.target,c)&&(c=e.srcEvent.target),e.target=c}function M(t,e){var n=e.center,i=t.offsetDelta||{},o=t.prevDelta||{},r=t.prevInput||{};e.eventType!==Rt&&r.eventType!==Ct||(o=t.prevDelta={x:r.deltaX||0,y:r.deltaY||0},i=t.offsetDelta={x:n.x,y:n.y}),e.deltaX=o.x+(n.x-i.x),e.deltaY=o.y+(n.y-i.y)}function D(t,e){var n,i,o,r,s=t.lastInterval||e,u=e.timeStamp-s.timeStamp;if(e.eventType!=Lt&&(u>Bt||s.velocity===a)){var h=e.deltaX-s.deltaX,c=e.deltaY-s.deltaY,l=j(u,h,c);i=l.x,o=l.y,n=wt(l.x)>wt(l.y)?l.x:l.y,r=C(h,c),t.lastInterval=e}else n=s.velocity,i=s.velocityX,o=s.velocityY,r=s.direction;e.velocity=n,e.velocityX=i,e.velocityY=o,e.direction=r}function B(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:gt(t.pointers[n].clientX),clientY:gt(t.pointers[n].clientY)},n++;return{timeStamp:xt(),pointers:e,center:R(e),deltaX:t.deltaX,deltaY:t.deltaY}}function R(t){var e=t.length;if(1===e)return{x:gt(t[0].clientX),y:gt(t[0].clientY)};for(var n=0,i=0,o=0;o<e;)n+=t[o].clientX,i+=t[o].clientY,o++;return{x:gt(n/e),y:gt(i/e)}}function j(t,e,n){return{x:e/t||0,y:n/t||0}}function C(t,e){return t===e?Ft:wt(t)>=wt(e)?t<0?Ht:Gt:e<0?Nt:zt}function L(t,e,n){n||(n=Kt);var i=e[n[0]]-t[n[0]],o=e[n[1]]-t[n[1]];return Math.sqrt(i*i+o*o)}function F(t,e,n){n||(n=Kt);var i=e[n[0]]-t[n[0]],o=e[n[1]]-t[n[1]];return 180*Math.atan2(o,i)/Math.PI}function H(t,e){return F(e[1],e[0],Xt)+F(t[1],t[0],Xt)}function G(t,e){return L(e[0],e[1],Xt)/L(t[0],t[1],Xt)}function N(){this.evEl=Ut,this.evWin=$t,this.pressed=!1,E.apply(this,arguments)}function z(){this.evEl=Jt,this.evWin=te,E.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function q(){this.evTarget=ne,this.evWin=ie,this.started=!1,E.apply(this,arguments)}function Y(t,e){var n=b(t.touches),i=b(t.changedTouches);return e&(Ct|Lt)&&(n=T(n.concat(i),"identifier",!0)),[n,i]}function W(){this.evTarget=re,this.targetIds={},E.apply(this,arguments)}function K(t,e){var n=b(t.touches),i=this.targetIds;if(e&(Rt|jt)&&1===n.length)return i[n[0].identifier]=!0,[n,n];var o,r,s=b(t.changedTouches),a=[],u=this.target;if(r=n.filter(function(t){return m(t.target,u)}),e===Rt)for(o=0;o<r.length;)i[r[o].identifier]=!0,o++;for(o=0;o<s.length;)i[s[o].identifier]&&a.push(s[o]),e&(Ct|Lt)&&delete i[s[o].identifier],o++;return a.length?[T(r.concat(a),"identifier",!0),a]:void 0}function X(){E.apply(this,arguments);var t=f(this.handler,this);this.touch=new W(this.manager,t),this.mouse=new N(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function V(t,e){t&Rt?(this.primaryTouch=e.changedPointers[0].identifier,U.call(this,e)):t&(Ct|Lt)&&U.call(this,e)}function U(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY};this.lastTouches.push(n);var i=this.lastTouches,o=function(){var t=i.indexOf(n);t>-1&&i.splice(t,1)};setTimeout(o,se)}}function $(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,i=0;i<this.lastTouches.length;i++){var o=this.lastTouches[i],r=Math.abs(e-o.x),s=Math.abs(n-o.y);if(r<=ae&&s<=ae)return!0}return!1}function Q(t,e){this.manager=t,this.set(e)}function Z(t){if(g(t,fe))return fe;var e=g(t,pe),n=g(t,_e);return e&&n?fe:e||n?e?pe:_e:g(t,de)?de:le}function J(){if(!he)return!1;var t={},e=o.CSS&&o.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(n){t[n]=!e||o.CSS.supports("touch-action",n)}),t}function tt(t){this.options=_t({},this.defaults,t||{}),this.id=A(),this.manager=null,this.options.enable=_(this.options.enable,!0),this.state=ve,this.simultaneous={},this.requireFail=[]}function et(t){return t&be?"cancel":t&we?"end":t&ge?"move":t&me?"start":""}function nt(t){return t==zt?"down":t==Nt?"up":t==Ht?"left":t==Gt?"right":""}function it(t,e){var n=e.manager;return n?n.get(t):t}function ot(){tt.apply(this,arguments)}function rt(){ot.apply(this,arguments),this.pX=null,this.pY=null}function st(){ot.apply(this,arguments)}function at(){tt.apply(this,arguments),this._timer=null,this._input=null}function ut(){ot.apply(this,arguments)}function ht(){ot.apply(this,arguments)}function ct(){tt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function lt(t,e){return e=e||{},e.recognizers=_(e.recognizers,lt.defaults.preset),new dt(t,e)}function dt(t,e){this.options=_t({},lt.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=P(this),this.touchAction=new Q(this,this.options.touchAction),ft(this,!0),c(this.options.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function ft(t,e){var n=t.element;if(n.style){var i;c(t.options.cssProps,function(o,r){i=S(n.style,r),e?(t.oldCssProps[i]=n.style[i],n.style[i]=o):n.style[i]=t.oldCssProps[i]||""}),e||(t.oldCssProps={})}}function pt(t,e){var n=r.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e,e.target.dispatchEvent(n)}var _t,yt=["","webkit","Moz","MS","ms","o"],vt=r.createElement("div"),mt="function",gt=Math.round,wt=Math.abs,xt=Date.now;_t="function"!=typeof Object.assign?function(t){if(t===a||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var i=arguments[n];if(i!==a&&null!==i)for(var o in i)i.hasOwnProperty(o)&&(e[o]=i[o])}return e}:Object.assign;var bt=l(function(t,e,n){for(var i=Object.keys(e),o=0;o<i.length;)(!n||n&&t[i[o]]===a)&&(t[i[o]]=e[i[o]]),o++;return t},"extend","Use `assign`."),Tt=l(function(t,e){return bt(t,e,!0)},"merge","Use `assign`."),St=1,At=/mobile|tablet|ip(ad|hone|od)|android/i,kt="ontouchstart"in o,Et=S(o,"PointerEvent")!==a,Pt=kt&&At.test(navigator.userAgent),Ot="touch",It="pen",Mt="mouse",Dt="kinect",Bt=25,Rt=1,jt=2,Ct=4,Lt=8,Ft=1,Ht=2,Gt=4,Nt=8,zt=16,qt=Ht|Gt,Yt=Nt|zt,Wt=qt|Yt,Kt=["x","y"],Xt=["clientX","clientY"];E.prototype={handler:function(){},init:function(){this.evEl&&y(this.element,this.evEl,this.domHandler),this.evTarget&&y(this.target,this.evTarget,this.domHandler),this.evWin&&y(k(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&v(this.element,this.evEl,this.domHandler),this.evTarget&&v(this.target,this.evTarget,this.domHandler),this.evWin&&v(k(this.element),this.evWin,this.domHandler)}};var Vt={mousedown:Rt,mousemove:jt,mouseup:Ct},Ut="mousedown",$t="mousemove mouseup";d(N,E,{handler:function(t){var e=Vt[t.type];e&Rt&&0===t.button&&(this.pressed=!0),e&jt&&1!==t.which&&(e=Ct),this.pressed&&(e&Ct&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:Mt,srcEvent:t}))}});var Qt={pointerdown:Rt,pointermove:jt,pointerup:Ct,pointercancel:Lt,pointerout:Lt},Zt={2:Ot,3:It,4:Mt,5:Dt},Jt="pointerdown",te="pointermove pointerup pointercancel";o.MSPointerEvent&&!o.PointerEvent&&(Jt="MSPointerDown",te="MSPointerMove MSPointerUp MSPointerCancel"),d(z,E,{handler:function(t){var e=this.store,n=!1,i=t.type.toLowerCase().replace("ms",""),o=Qt[i],r=Zt[t.pointerType]||t.pointerType,s=r==Ot,a=x(e,t.pointerId,"pointerId");o&Rt&&(0===t.button||s)?a<0&&(e.push(t),a=e.length-1):o&(Ct|Lt)&&(n=!0),a<0||(e[a]=t,this.callback(this.manager,o,{pointers:e,changedPointers:[t],pointerType:r,srcEvent:t}),n&&e.splice(a,1))}});var ee={touchstart:Rt,touchmove:jt,touchend:Ct,touchcancel:Lt},ne="touchstart",ie="touchstart touchmove touchend touchcancel";d(q,E,{handler:function(t){var e=ee[t.type];if(e===Rt&&(this.started=!0),this.started){var n=Y.call(this,t,e);e&(Ct|Lt)&&n[0].length-n[1].length===0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:Ot,srcEvent:t})}}});var oe={touchstart:Rt,touchmove:jt,touchend:Ct,touchcancel:Lt},re="touchstart touchmove touchend touchcancel";d(W,E,{handler:function(t){var e=oe[t.type],n=K.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:Ot,srcEvent:t})}});var se=2500,ae=25;d(X,E,{handler:function(t,e,n){var i=n.pointerType==Ot,o=n.pointerType==Mt;if(!(o&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(i)V.call(this,e,n);else if(o&&$.call(this,n))return;this.callback(t,e,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var ue=S(vt.style,"touchAction"),he=ue!==a,ce="compute",le="auto",de="manipulation",fe="none",pe="pan-x",_e="pan-y",ye=J();Q.prototype={set:function(t){t==ce&&(t=this.compute()),he&&this.manager.element.style&&ye[t]&&(this.manager.element.style[ue]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return c(this.manager.recognizers,function(e){p(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),Z(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)return void e.preventDefault();var i=this.actions,o=g(i,fe)&&!ye[fe],r=g(i,_e)&&!ye[_e],s=g(i,pe)&&!ye[pe];if(o){var a=1===t.pointers.length,u=t.distance<2,h=t.deltaTime<250;if(a&&u&&h)return}return s&&r?void 0:o||r&&n&qt||s&&n&Yt?this.preventSrc(e):void 0},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var ve=1,me=2,ge=4,we=8,xe=we,be=16,Te=32;tt.prototype={defaults:{},set:function(t){return _t(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(h(t,"recognizeWith",this))return this;var e=this.simultaneous;return t=it(t,this),e[t.id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return h(t,"dropRecognizeWith",this)?this:(t=it(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(h(t,"requireFailure",this))return this;var e=this.requireFail;return t=it(t,this),x(e,t)===-1&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(h(t,"dropRequireFailure",this))return this;t=it(t,this);var e=x(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){function e(e){n.manager.emit(e,t)}var n=this,i=this.state;i<we&&e(n.options.event+et(i)),e(n.options.event),t.additionalEvent&&e(t.additionalEvent),i>=we&&e(n.options.event+et(i))},tryEmit:function(t){return this.canEmit()?this.emit(t):void(this.state=Te)},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(Te|ve)))return!1;t++}return!0},recognize:function(t){var e=_t({},t);return p(this.options.enable,[this,e])?(this.state&(xe|be|Te)&&(this.state=ve),this.state=this.process(e),void(this.state&(me|ge|we|be)&&this.tryEmit(e))):(this.reset(),void(this.state=Te))},process:function(t){},getTouchAction:function(){},reset:function(){}},d(ot,tt,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,i=e&(me|ge),o=this.attrTest(t);return i&&(n&Lt||!o)?e|be:i||o?n&Ct?e|we:e&me?e|ge:me:Te}}),d(rt,ot,{defaults:{event:"pan",threshold:10,pointers:1,direction:Wt},getTouchAction:function(){var t=this.options.direction,e=[];return t&qt&&e.push(_e),t&Yt&&e.push(pe),e},directionTest:function(t){var e=this.options,n=!0,i=t.distance,o=t.direction,r=t.deltaX,s=t.deltaY;return o&e.direction||(e.direction&qt?(o=0===r?Ft:r<0?Ht:Gt,n=r!=this.pX,i=Math.abs(t.deltaX)):(o=0===s?Ft:s<0?Nt:zt,n=s!=this.pY,i=Math.abs(t.deltaY))),t.direction=o,n&&i>e.threshold&&o&e.direction},attrTest:function(t){return ot.prototype.attrTest.call(this,t)&&(this.state&me||!(this.state&me)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=nt(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),d(st,ot,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[fe]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&me)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),d(at,tt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[le]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,i=t.distance<e.threshold,o=t.deltaTime>e.time;if(this._input=t,!i||!n||t.eventType&(Ct|Lt)&&!o)this.reset();else if(t.eventType&Rt)this.reset(),this._timer=u(function(){this.state=xe,this.tryEmit()},e.time,this);else if(t.eventType&Ct)return xe;return Te},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===xe&&(t&&t.eventType&Ct?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=xt(),this.manager.emit(this.options.event,this._input)))}}),d(ut,ot,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[fe]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&me)}}),d(ht,ot,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:qt|Yt,pointers:1},getTouchAction:function(){return rt.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return n&(qt|Yt)?e=t.overallVelocity:n&qt?e=t.overallVelocityX:n&Yt&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&wt(e)>this.options.velocity&&t.eventType&Ct},emit:function(t){var e=nt(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),d(ct,tt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[de]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,i=t.distance<e.threshold,o=t.deltaTime<e.time;if(this.reset(),t.eventType&Rt&&0===this.count)return this.failTimeout();if(i&&o&&n){if(t.eventType!=Ct)return this.failTimeout();var r=!this.pTime||t.timeStamp-this.pTime<e.interval,s=!this.pCenter||L(this.pCenter,t.center)<e.posThreshold;this.pTime=t.timeStamp,this.pCenter=t.center,s&&r?this.count+=1:this.count=1,this._input=t;var a=this.count%e.taps;if(0===a)return this.hasRequireFailures()?(this._timer=u(function(){this.state=xe,this.tryEmit()},e.interval,this),me):xe}return Te},failTimeout:function(){return this._timer=u(function(){this.state=Te},this.options.interval,this),Te},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==xe&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),lt.VERSION="2.0.7",lt.defaults={domEvents:!1,touchAction:ce,enable:!0,inputTarget:null,inputClass:null,preset:[[ut,{enable:!1}],[st,{enable:!1},["rotate"]],[ht,{direction:qt}],[rt,{direction:qt},["swipe"]],[ct],[ct,{event:"doubletap",taps:2},["tap"]],[at]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var Se=1,Ae=2;dt.prototype={set:function(t){return _t(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?Ae:Se},recognize:function(t){var e=this.session;if(!e.stopped){this.touchAction.preventDefaults(t);var n,i=this.recognizers,o=e.curRecognizer;(!o||o&&o.state&xe)&&(o=e.curRecognizer=null);for(var r=0;r<i.length;)n=i[r],e.stopped===Ae||o&&n!=o&&!n.canRecognizeWith(o)?n.reset():n.recognize(t),!o&&n.state&(me|ge|we)&&(o=e.curRecognizer=n),r++}},get:function(t){if(t instanceof tt)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(h(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(h(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,n=x(e,t);n!==-1&&(e.splice(n,1),this.touchAction.update())}return this},on:function(t,e){if(t!==a&&e!==a){var n=this.handlers;return c(w(t),function(t){n[t]=n[t]||[],n[t].push(e)}),this}},off:function(t,e){if(t!==a){var n=this.handlers;return c(w(t),function(t){e?n[t]&&n[t].splice(x(n[t],e),1):delete n[t]}),this}},emit:function(t,e){this.options.domEvents&&pt(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var i=0;i<n.length;)n[i](e),i++}},destroy:function(){this.element&&ft(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},_t(lt,{INPUT_START:Rt,INPUT_MOVE:jt,INPUT_END:Ct,INPUT_CANCEL:Lt,STATE_POSSIBLE:ve,STATE_BEGAN:me,STATE_CHANGED:ge,STATE_ENDED:we,STATE_RECOGNIZED:xe,STATE_CANCELLED:be,STATE_FAILED:Te,DIRECTION_NONE:Ft,DIRECTION_LEFT:Ht,DIRECTION_RIGHT:Gt,DIRECTION_UP:Nt,DIRECTION_DOWN:zt,DIRECTION_HORIZONTAL:qt,DIRECTION_VERTICAL:Yt,DIRECTION_ALL:Wt,Manager:dt,Input:E,TouchAction:Q,TouchInput:W,MouseInput:N,PointerEventInput:z,TouchMouseInput:X,SingleTouchInput:q,Recognizer:tt,AttrRecognizer:ot,Tap:ct,Pan:rt,Swipe:ht,Pinch:st,Rotate:ut,Press:at,on:y,off:v,each:c,merge:Tt,extend:bt,assign:_t,inherit:d,bindFn:f,prefixed:S});var ke="undefined"!=typeof o?o:"undefined"!=typeof self?self:{};ke.Hammer=lt,i=function(){return lt}.call(e,n,e,t),!(i!==a&&(t.exports=i))}(window,document,"Hammer")},function(t,e,n){"use strict";var i=n(5),o=n(16),r=n(17),s=n(18),a=n(19),u=n(20),h=n(11),c=n(15),l=n(6),d=n(13),f=1e4,p=function(){function t(t){this.level=7,this.extraLifeScore=0,this.score=0,this.lives=3,this.shipBullets=[],this.alienBullets=[],this.explosions=[],this.shockwaves=[],this.rocks=[],this.markers=[],this.shipTimer=0,this.alienTimer=0,this.levelTimer=0,this.gameOverTimer=0,this.gameOver=!1,this.started=!1,this.paused=!1,this.highscore=t}return Object.defineProperty(t.prototype,"objects",{get:function(){return[this.ship,this.alien].concat(this.shipBullets,this.alienBullets,this.rocks,this.explosions,this.shockwaves,this.markers)},enumerable:!0,configurable:!0}),t.prototype.update=function(t){this.objects.forEach(function(e){e&&e.update(t)})},t.prototype.render=function(t){this.objects.forEach(function(e){e&&e.render(t)})},t.prototype.startLevel=function(){this.level++,this.levelTimer=0,this.alienTimer||(this.alienTimer=c.random(10,15)),this.explosions.length=0,this.shipBullets.forEach(function(t){return t.destroy()}),this.addRocks()},t.prototype.addRocks=function(){for(var t=Math.min(this.level+3,10),e=150,n=20,i=0;i<t;i++){var o=c.random(1,4),r=new h.Vector(c.random(1,360)),s=void 0,u=void 0;switch(o){case 1:s=c.random(n,l.default.width-n),u=c.random(n,2*n);break;case 2:s=c.random(l.default.width-2*n,l.default.width-n),u=c.random(l.default.height-n,l.default.height-n);break;case 3:s=c.random(n,l.default.width-n),u=c.random(l.default.height-n,l.default.height-n);break;default:s=c.random(n,2*n),u=c.random(l.default.height-n,l.default.height-n)}var d=new a.Rock(s,u,r,a.RockSize.Large,e);this.rocks.push(d)}},t.prototype.addShip=function(t,e){var n=this;this.ship=new i.Ship(t,e),this.ship.on("fire",function(t,e){e.on("expired",function(){n.shipBullets=n.shipBullets.filter(function(t){return t!==e})}),n.shipBullets.push(e)})},t.prototype.createExplosion=function(t,e,n){var i=this;if(void 0===e&&(e=100),void 0===n&&(n=1),t){var o=new r.Explosion(t.origin.x,t.origin.y,e),a=new s.Shockwave(t.origin.x,t.origin.y,t.vx,t.vy,e,n);return o.on("expired",function(){i.explosions=i.explosions.filter(function(t){return t!==o})}),a.on("expired",function(){i.shockwaves=i.shockwaves.filter(function(t){return t!==a})}),this.explosions.push(o),this.shockwaves.push(a),{explosion:o,shockwave:a}}},t.prototype.shipDestroyed=function(){d.largeExplosion.play(),this.createExplosion(this.ship),this.lives--,this.ship=null,this.shipBullets.length=0},t.prototype.alienDestroyed=function(){this.alien&&(this.createExplosion(this.alien),this.alien.destroy()),this.alienBullets.length=0,d.largeExplosion.play()},t.prototype.rockDestroyed=function(t,e){void 0===e&&(e=1);var n=this.createExplosion(t,5*t.size,e),i=t.split();this.rocks=this.rocks.filter(function(e){return e!==t}),this.shockwaves.forEach(function(e){e.rocks=e.rocks.filter(function(e){return e!==t})}),(o=this.rocks).push.apply(o,i),n.shockwave.rocks=i,t=null;var o},t.prototype.addAlien=function(){var t=this,e=Math.min(this.level,14),n=!1,i=d.largeAlien;if(this.score>=4e4)n=!0;else switch(e){case 7:n=this.levelTimer>60&&2===c.random(1,3);break;case 8:n=this.levelTimer>30&&c.random(1,10)%2===0;break;default:n=c.random(1,10)<=e+2}n?(i=d.smallAlien,this.alien=new o.SmallAlien(this.ship)):this.alien=new o.BigAlien,i.play(),this.alien.on("expired",function(){d.alienFire.stop(),i.stop(),t.alien=null,t.alienBullets.forEach(function(t){return t.destroy()}),t.alienBullets.length=0}),this.alien.on("fire",function(e,n){d.alienFire.play(),n.on("expired",function(){t.alienBullets=t.alienBullets.filter(function(t){return t!==n})}),t.alienBullets.push(n)})},t.prototype.addScore=function(t){var e=this;this.score+=t.score,this.extraLifeScore+=t.score,this.score>this.highscore&&(this.highscore=this.score),this.extraLifeScore>=f&&(this.lives++,this.extraLifeScore-=f,d.extraLife.play());var n=new u.ScoreMarker(t,"+"+t.score);n.on("expired",function(){e.markers=e.markers.filter(function(t){return t!==n})}),this.markers.push(n)},t.prototype.tryPlaceShip=function(t){if(this.shipTimer+=t,!(this.shipTimer<=2)){var e=l.default.shipRect,n=!1;this.rocks.forEach(function(t){n=n||t.collided(e)}),this.alien&&(n=n||this.alien.collided(e)),n||(this.shipTimer=0,this.addShip(l.default.width2,l.default.height2))}},t.prototype.updateAlienTimer=function(t){Math.min(this.level,7);this.alien||(this.alienTimer-=t,this.alienTimer<=0&&(this.addAlien(),this.alienTimer=c.random(10,15)))},t.prototype.shouldTryToPlaceShip=function(){return!!this.shipTimer||!this.ship&&!!this.lives},t.prototype.shouldCheckForNextLevel=function(){return!this.rocks.length&&!!this.lives},t.prototype.shouldCheckCollisions=function(){return!!this.ship||!!this.shipBullets.length},t}();e.World=p},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(6),r=n(2),s=n(8),a=n(11),u=n(12),h=n(13),c=n(15),l=.1,d=1e3*o.default.objectScale,f=.02,p=.005,_=5,y=1100*o.default.objectScale,v=10,m=150*o.default.objectScale,g=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.points=[{x:5,y:8},{x:0,y:20},{x:-5,y:8}],i}return i(e,t),e.prototype.update=function(){},e.prototype.render=function(){this.draw(!1)},e}(s.Object2D),w=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.moving=!1,i.bulletCount=0,i.bulletTimer=0,i.shield=2,i.flame=new g(e,n),i.points=[{x:0,y:-15},{x:10,y:10},{x:5,y:5},{x:-5,y:5},{x:-10,y:10}],i.angle=270,i}return i(e,t),Object.defineProperty(e.prototype,"pointInPolyCheck",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.render=function(){this.draw(),this.moving&&(Math.floor(10*Math.random())+1)%2===0&&this.flame.draw(!1)},e.prototype.update=function(t){this.move(t),this.flame.move(t),r.Key.isDown(r.Key.THRUST)?(this.moving=!0,this.thrust()):this.moving=!1,r.Key.isPressed(r.Key.ROTATE_LEFT)&&this.rotate(-1),r.Key.isDown(r.Key.ROTATE_LEFT)&&this.rotate(-_),r.Key.isPressed(r.Key.ROTATE_RIGHT)&&this.rotate(1),r.Key.isDown(r.Key.ROTATE_RIGHT)&&this.rotate(_),r.Key.isDown(r.Key.FIRE)&&this.fire(),r.Key.isPressed(r.Key.HYPERSPACE)&&this.hyperspace(),this.bulletTimer>=0&&(this.bulletTimer-=t),this.moving||(this.vx-=this.vx*p,this.vy-=this.vy*p,this.flame.vx=this.vx,this.flame.vy=this.vy)},e.prototype.rotate=function(e){t.prototype.rotate.call(this,e),this.flame.rotate(e)},e.prototype.thrust=function(){var t=new a.Vector(this.angle,m*l),e=this.magnitude;e<y&&(this.vx+=t.x,this.flame.vx=this.vx,this.vy+=t.y,this.flame.vy=this.vy),h.thrust.play()},e.prototype.fire=function(){var t=this;if(this.bulletTimer<=0&&this.bulletCount<v){h.fire.play(),this.bulletTimer=f,this.bulletCount++;var e=new a.Vector(this.angle),n=new u.Bullet(this.origin.x,this.origin.y,e,1);n.on("expired",function(){t.bulletCount--}),n.origin.x+=20*n.vx,n.origin.y+=20*n.vy;var i=0,o=this.vx*n.vx+this.vy*n.vy;o>0&&(i=this.magnitude),i=Math.max(d,i+d),n.vx*=i,n.vy*=i;var r=(this.angle+180)%360,s=new a.Vector(r,3);this.origin.x+=s.x,this.origin.y+=s.y,this.flame.origin.x+=s.x,this.flame.origin.y+=s.y,this.trigger("fire",n)}},e.prototype.hyperspace=function(){var t=c.random(40,o.default.width-40),e=c.random(40,o.default.height-40);this.vx=0,this.vy=0,this.x=this.flame.x=t,this.y=this.flame.y=e,this.flame.vx=0,this.flame.vy=0},e}(s.Object2D);e.Ship=w},function(t,e,n){"use strict";var i=n(7),o=function(){function t(){var t=this;this.x=0,this.y=0,this.canvas=document.getElementById("canvas"),this.ctx=this.canvas.getContext("2d"),
this.draw=new i.Draw(this.ctx),this.init(),window.addEventListener("resize",function(){t.init()})}return t.prototype.init=function(){this.canvas.width=document.body.clientWidth,this.canvas.height=document.body.clientHeight,this.width=this.canvas.width,this.height=this.canvas.height,this.width2=this.width/2,this.height2=this.height/2,this.width>=1280?(this._fontXL=60,this._fontL=30,this._fontM=24,this._fontS=12,this._objectScale=1):this.width>=800?(this._fontXL=48,this._fontL=24,this._fontM=18,this._fontS=10,this._objectScale=.75):(this._fontXL=36,this._fontL=12,this._fontM=10,this._fontS=6,this._objectScale=.5);var t=120*this._objectScale;this._shipRect={x:this.width2-t,y:this.height2-t,width:2*t,height:2*t}},Object.defineProperty(t.prototype,"font",{get:function(){var t=this;return{get xlarge(){return t._fontXL},get large(){return t._fontL},get medium(){return t._fontM},get small(){return t._fontS}}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"objectScale",{get:function(){return this._objectScale},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shipRect",{get:function(){return this._shipRect},enumerable:!0,configurable:!0}),t.prototype.preShake=function(){this.ctx.save();var t=10*Math.random(),e=10*Math.random();this.ctx.translate(t,e)},t.prototype.postShake=function(){this.ctx.restore()},t}();e.Screen=o,Object.defineProperty(e,"__esModule",{value:!0}),e.default=new o},function(t,e,n){"use strict";var i=n(6),o=n(5),r="rgba(255,255,255,1)",s=20,a=2,u=function(){function t(t){this.ctx=t}return t.prototype.line=function(t,e,n,i){void 0===n&&(n=r),void 0===i&&(i=a);var o=this.ctx,s=o.strokeStyle;o.beginPath(),o.strokeStyle=n,o.lineWidth=i,o.moveTo(t.x,t.y),o.lineTo(e.x,e.y),o.stroke(),o.closePath(),o.strokeStyle=s},t.prototype.shape=function(t,e,n,i,o){void 0===i&&(i=r),void 0===o&&(o=!0);var s,a,u=t.length-1;this.ctx.save();for(var h=0;h<u;h++)s={x:e+t[h].x,y:n+t[h].y},a={x:e+t[h+1].x,y:n+t[h+1].y},this.line(s,a,i);o&&this.line({x:e+t[u].x,y:n+t[u].y},{x:e+t[0].x,y:n+t[0].y},i),this.ctx.restore()},t.prototype.rect=function(t,e,n){void 0===n&&(n=r);var i=this.ctx;i.beginPath(),i.fillStyle=n,i.fillRect(t.x,t.y,e.x,e.y),i.stroke(),i.closePath()},t.prototype.point=function(t,e){void 0===e&&(e=r);var n=4*i.default.objectScale;this.rect(t,{x:n,y:n},e)},t.prototype.background=function(t){void 0===t&&(t="#000000");var e=this.ctx;e.fillStyle=t,e.fillRect(0,0,i.default.width,i.default.height)},t.prototype.bounds=function(t,e){void 0===e&&(e=r);var n=this.ctx;t&&(n.save(),n.beginPath(),n.strokeStyle=e,n.lineWidth=2,n.moveTo(t.x,t.y),n.lineTo(t.x+t.width,t.y),n.lineTo(t.x+t.width,t.y+t.height),n.lineTo(t.x,t.y+t.height),n.lineTo(t.x,t.y),n.stroke(),n.closePath(),n.restore())},t.prototype.text=function(t,e,n,i,o){void 0===o&&(o=r);var s=this.ctx;s.save(),s.font=i+"pt hyperspace",s.textBaseline="middle",s.lineWidth=1,s.strokeStyle=o,s.strokeText(t,e,n),s.restore()},t.prototype.text2=function(t,e,n){var i=this.ctx;i.save(),i.font=e+"pt hyperspace",i.textBaseline="middle",i.lineWidth=1,i.strokeStyle=r;var o=i.measureText(t).width,s=n(o);i.strokeText(t,s.x,s.y),i.restore()},t.prototype.text3=function(t,e,n){var i=this.ctx;i.save(),i.font=e+"pt hyperspace",i.textBaseline="middle",i.lineWidth=2,i.fillStyle=r;var o=i.measureText(t).width,s=n(o);i.fillText(t,s.x,s.y),i.restore()},t.prototype.scorePlayer1=function(t){for(var e=t.toString();e.length<2;)e="0"+e;this.text(e,100,s,i.default.font.medium)},t.prototype.highscore=function(t){for(var e=t.toString();e.length<2;)e="0"+e;this.text2(e,i.default.font.small,function(t){return{x:i.default.width2-t/2,y:s}})},t.prototype.oneCoinOnePlay=function(){this.text2("1  coin  1  play",i.default.font.medium,function(t){return{x:i.default.width2-t/2,y:i.default.height/8*7}})},t.prototype.pushStart=function(){i.default.draw.text2("push start",i.default.font.medium,function(t){return{x:i.default.width2-t/2,y:i.default.height/8}})},t.prototype.player1=function(){i.default.draw.text2("player 1",i.default.font.medium,function(t){return{x:i.default.width2-t/2,y:i.default.height/4.5}})},t.prototype.gameOver=function(){i.default.draw.text2("game over",i.default.font.medium,function(t){return{x:i.default.width2-t/2,y:i.default.height/4.5}})},t.prototype.copyright=function(){this.text2(String.fromCharCode(169)+" 1979 atari inc",i.default.font.small,function(t){return{x:i.default.width2-t/2,y:i.default.height-i.default.font.small}})},t.prototype.drawExtraLives=function(t){t=Math.min(t,10);for(var e=new o.Ship(0,0),n=2*(e.x+e.width),r=s+i.default.font.medium+10,a=0;a<t;a++)e.origin.x=80+a*n,e.origin.y=r,e.render()},t.prototype.circle=function(t,e,n,i){void 0===i&&(i=r);var o=this.ctx;o.beginPath(),o.arc(t,e,n,0,2*Math.PI,!1),o.strokeStyle=i,o.stroke(),o.closePath()},t}();e.Draw=u},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(6),r=n(9),s=n(10),a=function(t){function e(e,n){var i=t.call(this)||this;return i.color="rgba(255,255,255,.9)",i.angle=360,i.vx=0,i.vy=0,i._xmin=0,i._xmax=0,i._ymin=0,i._ymax=0,i._width=0,i._height=0,i._score=0,i.origin={x:e,y:n},i}return i(e,t),Object.defineProperty(e.prototype,"score",{get:function(){return this._score},set:function(t){this._score=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"points",{get:function(){return this._points},set:function(t){t.forEach(function(t){t.x*=o.default.objectScale,t.y*=o.default.objectScale}),this._points=t,this.calcBounds()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pointInPolyCheck",{get:function(){return!1},enumerable:!0,configurable:!0}),e.prototype.calcBounds=function(){var t=this;this._points.forEach(function(e){e.x<t._xmin&&(t._xmin=e.x),e.x>t._xmax&&(t._xmax=e.x),e.y<t._ymin&&(t._ymin=e.y),e.y>t._ymax&&(t._ymax=e.y)}),this._width=this._xmax-this._xmin,this._height=this._ymax-this._ymin},e.prototype.rotate=function(t){this.angle+=t,this.angle<1&&(this.angle+=360),this.angle>360&&(this.angle-=360);var e=s.COS[t],n=s.SIN[t];this.points.forEach(function(t){var i=e*t.x-n*t.y,o=n*t.x+e*t.y;t.x=i,t.y=o}),this.calcBounds()},e.prototype.move=function(t){t=t?t:1,this.origin.x+=this.vx*t,this.origin.y+=this.vy*t,this.origin.x>o.default.width&&(this.origin.x-=o.default.width),this.origin.x<0&&(this.origin.x+=o.default.width),this.origin.y>o.default.height&&(this.origin.y-=o.default.height),this.origin.y<0&&(this.origin.y+=o.default.height)},e.prototype.scale=function(t){this.points.forEach(function(e){e.x*=t,e.y*=t}),this.calcBounds()},e.prototype.draw=function(t){void 0===t&&(t=!0),o.default.draw.shape(this.points,this.origin.x,this.origin.y,this.color,t)},Object.defineProperty(e.prototype,"magnitude",{get:function(){return Math.sqrt(this.vx*this.vx+this.vy*this.vy)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this.origin.x+this._xmin},set:function(t){this.origin.x=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.origin.y+this._ymin},set:function(t){this.origin.y=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"vertices",{get:function(){var t=this;return this.points.map(function(e){return{x:t.origin.x+e.x,y:t.origin.y+e.y}})},enumerable:!0,configurable:!0}),e.prototype.collided=function(t){return!!(t&&this.x<t.x+t.width&&this.x+this.width>t.x&&this.y<t.y+t.height&&this.height+this.y>t.y)},e.prototype.destroy=function(){for(var t in this.handlers)this.handlers[t]=null;this.handlers={}},e}(r.EventSource);e.Object2D=a},function(t,e){"use strict";var n=function(){function t(){this.handlers={}}return t.prototype.on=function(t,e){this.handlers[t]||(this.handlers[t]=[]),this.handlers[t].push(e)},t.prototype.off=function(t,e){this.handlers[t]=this.handlers[t].filter(function(t){return t!==e})},t.prototype.trigger=function(t){for(var e=this,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var o=this.handlers[t]||[];o.forEach(function(t){return t.apply(void 0,[e].concat(n))})},t}();e.EventSource=n},function(t,e){"use strict";var n={};e.RAD=n;var i={};e.COS=i;var o={};e.SIN=o;for(var r=Math.PI/180,s=0;s<=360;s++)n[s]=s*r,i[s]=Math.cos(n[s]),o[s]=Math.sin(n[s]),n[-s]=-s*r,i[-s]=Math.cos(n[-s]),o[-s]=Math.sin(n[-s])},function(t,e){"use strict";for(var n={},i=2*Math.PI,o=0;o<=360;o++){var r=i*(o/360);n[o]={x:Math.cos(r),y:Math.sin(r)}}var s=function(){function t(t,e){void 0===e&&(e=1),this.x=n[t].x*e,this.y=n[t].y*e}return t.fromXY=function(e,n,i){void 0===i&&(i=1);var o=e.x-n.x,r=e.y-n.y,s=Math.sqrt(o*o+r*r);o/=s,r/=s;var a=new t(0);return a.x=o*i,a.y=r*i,a},t}();e.Vector=s},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(6),r=n(8),s=function(t){function e(e,n,i,o){void 0===o&&(o=1.25);var r=t.call(this,e,n)||this;return r.life=o,r.frame=0,r.vx=i.x,r.vy=i.y,r}return i(e,t),e.prototype.render=function(){this.draw()},e.prototype.update=function(t){this.frame++,this.move(t),this.life-=t,this.life<=0&&this.destroy()},e.prototype.draw=function(){var t=this.frame<=1?8*o.default.objectScale:4*o.default.objectScale;o.default.draw.rect({x:this.origin.x-t/2,y:this.origin.y},{x:t,y:t})},e.prototype.destroy=function(){this.trigger("expired")},Object.defineProperty(e.prototype,"vertices",{get:function(){return[this.origin]},enumerable:!0,configurable:!0}),e}(r.Object2D);e.Bullet=s},function(t,e,n){"use strict";function i(t){var n=0,i=new o.Howl(t);i.on("end",function(){t.max&&n--});var r=i.play.bind(i);t.max?n<t.max&&s:s;return i.play=function(){s&&(t.max?n<t.max&&(r(),n++):r())},i._origVolume=t.volume,e.all.push(i),i}var o=n(14),r=.5,s=!0;e.all=[],e.fire=i({src:["./assets/fire.wav"],volume:.2}),e.thrust=i({src:["./assets/thrust.wav"],volume:.3}),e.alienFire=i({src:["./assets/sfire.wav"],volume:r}),e.largeExplosion=i({src:["./assets/explode1.wav"],volume:r,max:2}),e.mediumExplosion=i({src:["./assets/explode2.wav"],volume:r,max:2}),e.smallExplosion=i({src:["./assets/explode3.wav"],volume:r,max:2}),e.largeAlien=i({src:["./assets/lsaucer.wav"],volume:r,loop:!0}),e.smallAlien=i({src:["./assets/ssaucer.wav"],volume:r,loop:!0}),e.thumpLo=i({src:["./assets/thumplo.wav"],volume:.3}),e.thumpHi=i({src:["./assets/thumphi.wav"],volume:.3}),e.extraLife=i({src:["./assets/life.wav"],volume:.5}),e.Sound={on:function(){s=!0,e.all.forEach(function(t){return t.volume(t._origVolume)})},off:function(){s=!1,e.all.forEach(function(t){return t.volume(0)})},stop:function(){e.all.forEach(function(t){return t.stop()})}}},function(t,e,n){var i,o;(function(n){!function(){"use strict";var r=function(){this.init()};r.prototype={init:function(){var t=this||s;return t._codecs={},t._howls=[],t._muted=!1,t._volume=1,t._canPlayEvent="canplaythrough",t._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,t.masterGain=null,t.noAudio=!1,t.usingWebAudio=!0,t.autoSuspend=!0,t.ctx=null,t.mobileAutoEnable=!0,t._setup(),t},volume:function(t){var e=this||s;if(t=parseFloat(t),e.ctx||p(),"undefined"!=typeof t&&t>=0&&t<=1){if(e._volume=t,e._muted)return e;e.usingWebAudio&&(e.masterGain.gain.value=t);for(var n=0;n<e._howls.length;n++)if(!e._howls[n]._webAudio)for(var i=e._howls[n]._getSoundIds(),o=0;o<i.length;o++){var r=e._howls[n]._soundById(i[o]);r&&r._node&&(r._node.volume=r._volume*t)}return e}return e._volume},mute:function(t){var e=this||s;e.ctx||p(),e._muted=t,e.usingWebAudio&&(e.masterGain.gain.value=t?0:e._volume);for(var n=0;n<e._howls.length;n++)if(!e._howls[n]._webAudio)for(var i=e._howls[n]._getSoundIds(),o=0;o<i.length;o++){var r=e._howls[n]._soundById(i[o]);r&&r._node&&(r._node.muted=!!t||r._muted)}return e},unload:function(){for(var t=this||s,e=t._howls.length-1;e>=0;e--)t._howls[e].unload();return t.usingWebAudio&&t.ctx&&"undefined"!=typeof t.ctx.close&&(t.ctx.close(),t.ctx=null,p()),t},codecs:function(t){return(this||s)._codecs[t.replace(/^x-/,"")]},_setup:function(){var t=this||s;if(t.state=t.ctx?t.ctx.state||"running":"running",t._autoSuspend(),!t.usingWebAudio)if("undefined"!=typeof Audio)try{var e=new Audio;"undefined"==typeof e.oncanplaythrough&&(t._canPlayEvent="canplay")}catch(e){t.noAudio=!0}else t.noAudio=!0;try{var e=new Audio;e.muted&&(t.noAudio=!0)}catch(t){}return t.noAudio||t._setupCodecs(),t},_setupCodecs:function(){var t=this||s,e=null;try{e="undefined"!=typeof Audio?new Audio:null}catch(e){return t}if(!e||"function"!=typeof e.canPlayType)return t;var n=e.canPlayType("audio/mpeg;").replace(/^no$/,""),i=t._navigator&&t._navigator.userAgent.match(/OPR\/([0-6].)/g),o=i&&parseInt(i[0].split("/")[1],10)<33;return t._codecs={mp3:!(o||!n&&!e.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!n,opus:!!e.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!e.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!e.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(e.canPlayType("audio/x-mp4;")||e.canPlayType("audio/mp4;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!e.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(e.canPlayType("audio/x-flac;")||e.canPlayType("audio/flac;")).replace(/^no$/,"")},t},_enableMobileAudio:function(){var t=this||s,e=/iPhone|iPad|iPod|Android|BlackBerry|BB10|Silk|Mobi/i.test(t._navigator&&t._navigator.userAgent),n=!!("ontouchend"in window||t._navigator&&t._navigator.maxTouchPoints>0||t._navigator&&t._navigator.msMaxTouchPoints>0);if(!t._mobileEnabled&&t.ctx&&(e||n)){t._mobileEnabled=!1,t._mobileUnloaded||44100===t.ctx.sampleRate||(t._mobileUnloaded=!0,t.unload()),t._scratchBuffer=t.ctx.createBuffer(1,1,22050);var i=function(){var e=t.ctx.createBufferSource();e.buffer=t._scratchBuffer,e.connect(t.ctx.destination),"undefined"==typeof e.start?e.noteOn(0):e.start(0),e.onended=function(){e.disconnect(0),t._mobileEnabled=!0,t.mobileAutoEnable=!1,document.removeEventListener("touchend",i,!0)}};return document.addEventListener("touchend",i,!0),t}},_autoSuspend:function(){var t=this;if(t.autoSuspend&&t.ctx&&"undefined"!=typeof t.ctx.suspend&&s.usingWebAudio){for(var e=0;e<t._howls.length;e++)if(t._howls[e]._webAudio)for(var n=0;n<t._howls[e]._sounds.length;n++)if(!t._howls[e]._sounds[n]._paused)return t;return t._suspendTimer&&clearTimeout(t._suspendTimer),t._suspendTimer=setTimeout(function(){t.autoSuspend&&(t._suspendTimer=null,t.state="suspending",t.ctx.suspend().then(function(){t.state="suspended",t._resumeAfterSuspend&&(delete t._resumeAfterSuspend,t._autoResume())}))},3e4),t}},_autoResume:function(){var t=this;if(t.ctx&&"undefined"!=typeof t.ctx.resume&&s.usingWebAudio)return"running"===t.state&&t._suspendTimer?(clearTimeout(t._suspendTimer),t._suspendTimer=null):"suspended"===t.state?(t.state="resuming",t.ctx.resume().then(function(){t.state="running";for(var e=0;e<t._howls.length;e++)t._howls[e]._emit("resume")}),t._suspendTimer&&(clearTimeout(t._suspendTimer),t._suspendTimer=null)):"suspending"===t.state&&(t._resumeAfterSuspend=!0),t}};var s=new r,a=function(t){var e=this;return t.src&&0!==t.src.length?void e.init(t):void console.error("An array of source files must be passed with any new Howl.")};a.prototype={init:function(t){var e=this;return s.ctx||p(),e._autoplay=t.autoplay||!1,e._format="string"!=typeof t.format?t.format:[t.format],e._html5=t.html5||!1,e._muted=t.mute||!1,e._loop=t.loop||!1,e._pool=t.pool||5,e._preload="boolean"!=typeof t.preload||t.preload,e._rate=t.rate||1,e._sprite=t.sprite||{},e._src="string"!=typeof t.src?t.src:[t.src],e._volume=void 0!==t.volume?t.volume:1,e._duration=0,e._state="unloaded",e._sounds=[],e._endTimers={},e._queue=[],e._onend=t.onend?[{fn:t.onend}]:[],e._onfade=t.onfade?[{fn:t.onfade}]:[],e._onload=t.onload?[{fn:t.onload}]:[],e._onloaderror=t.onloaderror?[{fn:t.onloaderror}]:[],e._onpause=t.onpause?[{fn:t.onpause}]:[],e._onplay=t.onplay?[{fn:t.onplay}]:[],e._onstop=t.onstop?[{fn:t.onstop}]:[],e._onmute=t.onmute?[{fn:t.onmute}]:[],e._onvolume=t.onvolume?[{fn:t.onvolume}]:[],e._onrate=t.onrate?[{fn:t.onrate}]:[],e._onseek=t.onseek?[{fn:t.onseek}]:[],e._onresume=[],e._webAudio=s.usingWebAudio&&!e._html5,"undefined"!=typeof s.ctx&&s.ctx&&s.mobileAutoEnable&&s._enableMobileAudio(),s._howls.push(e),e._autoplay&&e._queue.push({event:"play",action:function(){e.play()}}),e._preload&&e.load(),e},load:function(){var t=this,e=null;if(s.noAudio)return void t._emit("loaderror",null,"No audio support.");"string"==typeof t._src&&(t._src=[t._src]);for(var n=0;n<t._src.length;n++){var i,o;if(t._format&&t._format[n])i=t._format[n];else{if(o=t._src[n],"string"!=typeof o){t._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}i=/^data:audio\/([^;,]+);/i.exec(o),i||(i=/\.([^.]+)$/.exec(o.split("?",1)[0])),i&&(i=i[1].toLowerCase())}if(s.codecs(i)){e=t._src[n];break}}return e?(t._src=e,t._state="loading","https:"===window.location.protocol&&"http:"===e.slice(0,5)&&(t._html5=!0,t._webAudio=!1),new u(t),t._webAudio&&c(t),t):void t._emit("loaderror",null,"No codec support for selected audio sources.")},play:function(t,e){var n=this,i=null;if("number"==typeof t)i=t,t=null;else{if("string"==typeof t&&"loaded"===n._state&&!n._sprite[t])return null;if("undefined"==typeof t){t="__default";for(var o=0,r=0;r<n._sounds.length;r++)n._sounds[r]._paused&&!n._sounds[r]._ended&&(o++,i=n._sounds[r]._id);1===o?t=null:i=null}}var a=i?n._soundById(i):n._inactiveSound();if(!a)return null;if(i&&!t&&(t=a._sprite||"__default"),"loaded"!==n._state&&!n._sprite[t])return n._queue.push({event:"play",action:function(){n.play(n._soundById(a._id)?a._id:void 0)}}),a._id;if(i&&!a._paused)return e||setTimeout(function(){n._emit("play",a._id)},0),a._id;n._webAudio&&s._autoResume();var u=Math.max(0,a._seek>0?a._seek:n._sprite[t][0]/1e3),h=Math.max(0,(n._sprite[t][0]+n._sprite[t][1])/1e3-u),c=1e3*h/Math.abs(a._rate);a._paused=!1,a._ended=!1,a._sprite=t,a._seek=u,a._start=n._sprite[t][0]/1e3,a._stop=(n._sprite[t][0]+n._sprite[t][1])/1e3,a._loop=!(!a._loop&&!n._sprite[t][2]);var l=a._node;if(n._webAudio){var d=function(){n._refreshBuffer(a);var t=a._muted||n._muted?0:a._volume;l.gain.setValueAtTime(t,s.ctx.currentTime),a._playStart=s.ctx.currentTime,"undefined"==typeof l.bufferSource.start?a._loop?l.bufferSource.noteGrainOn(0,u,86400):l.bufferSource.noteGrainOn(0,u,h):a._loop?l.bufferSource.start(0,u,86400):l.bufferSource.start(0,u,h),c!==1/0&&(n._endTimers[a._id]=setTimeout(n._ended.bind(n,a),c)),e||setTimeout(function(){n._emit("play",a._id)},0)},f="running"===s.state;"loaded"===n._state&&f?d():(n.once(f?"load":"resume",d,f?a._id:null),n._clearTimer(a._id))}else{var p=function(){l.currentTime=u,l.muted=a._muted||n._muted||s._muted||l.muted,l.volume=a._volume*s.volume(),l.playbackRate=a._rate,setTimeout(function(){l.play(),c!==1/0&&(n._endTimers[a._id]=setTimeout(n._ended.bind(n,a),c)),e||n._emit("play",a._id)},0)},_="loaded"===n._state&&(window&&window.ejecta||!l.readyState&&s._navigator.isCocoonJS);if(4===l.readyState||_)p();else{var y=function(){p(),l.removeEventListener(s._canPlayEvent,y,!1)};l.addEventListener(s._canPlayEvent,y,!1),n._clearTimer(a._id)}}return a._id},pause:function(t){var e=this;if("loaded"!==e._state)return e._queue.push({event:"pause",action:function(){e.pause(t)}}),e;for(var n=e._getSoundIds(t),i=0;i<n.length;i++){e._clearTimer(n[i]);var o=e._soundById(n[i]);if(o&&!o._paused&&(o._seek=e.seek(n[i]),o._rateSeek=0,o._paused=!0,e._stopFade(n[i]),o._node))if(e._webAudio){if(!o._node.bufferSource)return e;"undefined"==typeof o._node.bufferSource.stop?o._node.bufferSource.noteOff(0):o._node.bufferSource.stop(0),e._cleanBuffer(o._node)}else isNaN(o._node.duration)&&o._node.duration!==1/0||o._node.pause();arguments[1]||e._emit("pause",o?o._id:null)}return e},stop:function(t,e){var n=this;if("loaded"!==n._state)return n._queue.push({event:"stop",action:function(){n.stop(t)}}),n;for(var i=n._getSoundIds(t),o=0;o<i.length;o++){n._clearTimer(i[o]);var r=n._soundById(i[o]);if(r&&(r._seek=r._start||0,r._rateSeek=0,r._paused=!0,r._ended=!0,n._stopFade(i[o]),r._node))if(n._webAudio){if(!r._node.bufferSource)return e||n._emit("stop",r._id),n;"undefined"==typeof r._node.bufferSource.stop?r._node.bufferSource.noteOff(0):r._node.bufferSource.stop(0),n._cleanBuffer(r._node)}else isNaN(r._node.duration)&&r._node.duration!==1/0||(r._node.currentTime=r._start||0,r._node.pause());r&&!e&&n._emit("stop",r._id)}return n},mute:function(t,e){var n=this;if("loaded"!==n._state)return n._queue.push({event:"mute",action:function(){n.mute(t,e)}}),n;if("undefined"==typeof e){if("boolean"!=typeof t)return n._muted;n._muted=t}for(var i=n._getSoundIds(e),o=0;o<i.length;o++){var r=n._soundById(i[o]);r&&(r._muted=t,n._webAudio&&r._node?r._node.gain.setValueAtTime(t?0:r._volume,s.ctx.currentTime):r._node&&(r._node.muted=!!s._muted||t),n._emit("mute",r._id))}return n},volume:function(){var t,e,n=this,i=arguments;if(0===i.length)return n._volume;if(1===i.length||2===i.length&&"undefined"==typeof i[1]){var o=n._getSoundIds(),r=o.indexOf(i[0]);r>=0?e=parseInt(i[0],10):t=parseFloat(i[0])}else i.length>=2&&(t=parseFloat(i[0]),e=parseInt(i[1],10));var a;if(!("undefined"!=typeof t&&t>=0&&t<=1))return a=e?n._soundById(e):n._sounds[0],a?a._volume:0;if("loaded"!==n._state)return n._queue.push({event:"volume",action:function(){n.volume.apply(n,i)}}),n;"undefined"==typeof e&&(n._volume=t),e=n._getSoundIds(e);for(var u=0;u<e.length;u++)a=n._soundById(e[u]),a&&(a._volume=t,i[2]||n._stopFade(e[u]),n._webAudio&&a._node&&!a._muted?a._node.gain.setValueAtTime(t,s.ctx.currentTime):a._node&&!a._muted&&(a._node.volume=t*s.volume()),n._emit("volume",a._id));return n},fade:function(t,e,n,i){var o=this,r=Math.abs(t-e),a=t>e?"out":"in",u=r/.01,h=u>0?n/u:n;if(h<4&&(u=Math.ceil(u/(4/h)),h=4),"loaded"!==o._state)return o._queue.push({event:"fade",action:function(){o.fade(t,e,n,i)}}),o;o.volume(t,i);for(var c=o._getSoundIds(i),l=0;l<c.length;l++){var d=o._soundById(c[l]);if(d){if(i||o._stopFade(c[l]),o._webAudio&&!d._muted){var f=s.ctx.currentTime,p=f+n/1e3;d._volume=t,d._node.gain.setValueAtTime(t,f),d._node.gain.linearRampToValueAtTime(e,p)}var _=t;d._interval=setInterval(function(t,n){u>0&&(_+="in"===a?.01:-.01),_=Math.max(0,_),_=Math.min(1,_),_=Math.round(100*_)/100,o._webAudio?("undefined"==typeof i&&(o._volume=_),n._volume=_):o.volume(_,t,!0),_===e&&(clearInterval(n._interval),n._interval=null,o.volume(_,t),o._emit("fade",t))}.bind(o,c[l],d),h)}}return o},_stopFade:function(t){var e=this,n=e._soundById(t);return n&&n._interval&&(e._webAudio&&n._node.gain.cancelScheduledValues(s.ctx.currentTime),clearInterval(n._interval),n._interval=null,e._emit("fade",t)),e},loop:function(){var t,e,n,i=this,o=arguments;if(0===o.length)return i._loop;if(1===o.length){if("boolean"!=typeof o[0])return n=i._soundById(parseInt(o[0],10)),!!n&&n._loop;t=o[0],i._loop=t}else 2===o.length&&(t=o[0],e=parseInt(o[1],10));for(var r=i._getSoundIds(e),s=0;s<r.length;s++)n=i._soundById(r[s]),n&&(n._loop=t,i._webAudio&&n._node&&n._node.bufferSource&&(n._node.bufferSource.loop=t,t&&(n._node.bufferSource.loopStart=n._start||0,n._node.bufferSource.loopEnd=n._stop)));return i},rate:function(){var t,e,n=this,i=arguments;if(0===i.length)e=n._sounds[0]._id;else if(1===i.length){var o=n._getSoundIds(),r=o.indexOf(i[0]);r>=0?e=parseInt(i[0],10):t=parseFloat(i[0])}else 2===i.length&&(t=parseFloat(i[0]),e=parseInt(i[1],10));var a;if("number"!=typeof t)return a=n._soundById(e),a?a._rate:n._rate;if("loaded"!==n._state)return n._queue.push({event:"rate",action:function(){n.rate.apply(n,i)}}),n;"undefined"==typeof e&&(n._rate=t),e=n._getSoundIds(e);for(var u=0;u<e.length;u++)if(a=n._soundById(e[u])){a._rateSeek=n.seek(e[u]),a._playStart=n._webAudio?s.ctx.currentTime:a._playStart,a._rate=t,n._webAudio&&a._node&&a._node.bufferSource?a._node.bufferSource.playbackRate.value=t:a._node&&(a._node.playbackRate=t);var h=n.seek(e[u]),c=(n._sprite[a._sprite][0]+n._sprite[a._sprite][1])/1e3-h,l=1e3*c/Math.abs(a._rate);!n._endTimers[e[u]]&&a._paused||(n._clearTimer(e[u]),n._endTimers[e[u]]=setTimeout(n._ended.bind(n,a),l)),n._emit("rate",a._id)}return n},seek:function(){var t,e,n=this,i=arguments;if(0===i.length)e=n._sounds[0]._id;else if(1===i.length){var o=n._getSoundIds(),r=o.indexOf(i[0]);r>=0?e=parseInt(i[0],10):(e=n._sounds[0]._id,t=parseFloat(i[0]))}else 2===i.length&&(t=parseFloat(i[0]),e=parseInt(i[1],10));if("undefined"==typeof e)return n;if("loaded"!==n._state)return n._queue.push({event:"seek",action:function(){n.seek.apply(n,i)}}),n;var a=n._soundById(e);if(a){if(!("number"==typeof t&&t>=0)){if(n._webAudio){var u=n.playing(e)?s.ctx.currentTime-a._playStart:0,h=a._rateSeek?a._rateSeek-a._seek:0;return a._seek+(h+u*Math.abs(a._rate))}return a._node.currentTime}var c=n.playing(e);c&&n.pause(e,!0),a._seek=t,a._ended=!1,n._clearTimer(e),c&&n.play(e,!0),!n._webAudio&&a._node&&(a._node.currentTime=t),n._emit("seek",e)}return n},playing:function(t){var e=this;if("number"==typeof t){var n=e._soundById(t);return!!n&&!n._paused}for(var i=0;i<e._sounds.length;i++)if(!e._sounds[i]._paused)return!0;return!1},duration:function(t){var e=this,n=e._duration,i=e._soundById(t);return i&&(n=e._sprite[i._sprite][1]/1e3),n},state:function(){return this._state},unload:function(){for(var t=this,e=t._sounds,n=0;n<e.length;n++){e[n]._paused||(t.stop(e[n]._id),t._emit("end",e[n]._id)),t._webAudio||(e[n]._node.src="data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQAAAAA=",e[n]._node.removeEventListener("error",e[n]._errorFn,!1),e[n]._node.removeEventListener(s._canPlayEvent,e[n]._loadFn,!1)),delete e[n]._node,t._clearTimer(e[n]._id);var i=s._howls.indexOf(t);i>=0&&s._howls.splice(i,1)}var o=!0;for(n=0;n<s._howls.length;n++)if(s._howls[n]._src===t._src){o=!1;break}return h&&o&&delete h[t._src],s.noAudio=!1,t._state="unloaded",t._sounds=[],t=null,null},on:function(t,e,n,i){var o=this,r=o["_on"+t];return"function"==typeof e&&r.push(i?{id:n,fn:e,once:i}:{id:n,fn:e}),o},off:function(t,e,n){var i=this,o=i["_on"+t],r=0;if(e){for(r=0;r<o.length;r++)if(e===o[r].fn&&n===o[r].id){o.splice(r,1);break}}else if(t)i["_on"+t]=[];else{var s=Object.keys(i);for(r=0;r<s.length;r++)0===s[r].indexOf("_on")&&Array.isArray(i[s[r]])&&(i[s[r]]=[])}return i},once:function(t,e,n){var i=this;return i.on(t,e,n,1),i},_emit:function(t,e,n){for(var i=this,o=i["_on"+t],r=o.length-1;r>=0;r--)o[r].id&&o[r].id!==e&&"load"!==t||(setTimeout(function(t){t.call(this,e,n)}.bind(i,o[r].fn),0),o[r].once&&i.off(t,o[r].fn,o[r].id));return i},_loadQueue:function(){var t=this;if(t._queue.length>0){var e=t._queue[0];t.once(e.event,function(){t._queue.shift(),t._loadQueue()}),e.action()}return t},_ended:function(t){var e=this,n=t._sprite,i=!(!t._loop&&!e._sprite[n][2]);if(e._emit("end",t._id),!e._webAudio&&i&&e.stop(t._id,!0).play(t._id),e._webAudio&&i){e._emit("play",t._id),t._seek=t._start||0,t._rateSeek=0,t._playStart=s.ctx.currentTime;var o=1e3*(t._stop-t._start)/Math.abs(t._rate);e._endTimers[t._id]=setTimeout(e._ended.bind(e,t),o)}return e._webAudio&&!i&&(t._paused=!0,t._ended=!0,t._seek=t._start||0,t._rateSeek=0,e._clearTimer(t._id),e._cleanBuffer(t._node),s._autoSuspend()),e._webAudio||i||e.stop(t._id),e},_clearTimer:function(t){var e=this;return e._endTimers[t]&&(clearTimeout(e._endTimers[t]),delete e._endTimers[t]),e},_soundById:function(t){for(var e=this,n=0;n<e._sounds.length;n++)if(t===e._sounds[n]._id)return e._sounds[n];return null},_inactiveSound:function(){var t=this;t._drain();for(var e=0;e<t._sounds.length;e++)if(t._sounds[e]._ended)return t._sounds[e].reset();return new u(t)},_drain:function(){var t=this,e=t._pool,n=0,i=0;if(!(t._sounds.length<e)){for(i=0;i<t._sounds.length;i++)t._sounds[i]._ended&&n++;for(i=t._sounds.length-1;i>=0;i--){if(n<=e)return;t._sounds[i]._ended&&(t._webAudio&&t._sounds[i]._node&&t._sounds[i]._node.disconnect(0),t._sounds.splice(i,1),n--)}}},_getSoundIds:function(t){var e=this;if("undefined"==typeof t){for(var n=[],i=0;i<e._sounds.length;i++)n.push(e._sounds[i]._id);return n}return[t]},_refreshBuffer:function(t){var e=this;return t._node.bufferSource=s.ctx.createBufferSource(),t._node.bufferSource.buffer=h[e._src],t._panner?t._node.bufferSource.connect(t._panner):t._node.bufferSource.connect(t._node),t._node.bufferSource.loop=t._loop,t._loop&&(t._node.bufferSource.loopStart=t._start||0,t._node.bufferSource.loopEnd=t._stop),t._node.bufferSource.playbackRate.value=t._rate,e},_cleanBuffer:function(t){var e=this;if(e._scratchBuffer){t.bufferSource.onended=null,t.bufferSource.disconnect(0);try{t.bufferSource.buffer=e._scratchBuffer}catch(t){}}return t.bufferSource=null,e}};var u=function(t){this._parent=t,this.init()};u.prototype={init:function(){var t=this,e=t._parent;return t._muted=e._muted,t._loop=e._loop,t._volume=e._volume,t._muted=e._muted,t._rate=e._rate,t._seek=0,t._paused=!0,t._ended=!0,t._sprite="__default",t._id=Math.round(Date.now()*Math.random()),e._sounds.push(t),t.create(),t},create:function(){var t=this,e=t._parent,n=s._muted||t._muted||t._parent._muted?0:t._volume;return e._webAudio?(t._node="undefined"==typeof s.ctx.createGain?s.ctx.createGainNode():s.ctx.createGain(),t._node.gain.setValueAtTime(n,s.ctx.currentTime),t._node.paused=!0,t._node.connect(s.masterGain)):(t._node=new Audio,t._errorFn=t._errorListener.bind(t),t._node.addEventListener("error",t._errorFn,!1),t._loadFn=t._loadListener.bind(t),t._node.addEventListener(s._canPlayEvent,t._loadFn,!1),t._node.src=e._src,t._node.preload="auto",t._node.volume=n*s.volume(),t._node.load()),t},reset:function(){var t=this,e=t._parent;return t._muted=e._muted,t._loop=e._loop,t._volume=e._volume,t._muted=e._muted,t._rate=e._rate,t._seek=0,t._rateSeek=0,t._paused=!0,t._ended=!0,t._sprite="__default",t._id=Math.round(Date.now()*Math.random()),t},_errorListener:function(){var t=this;t._parent._emit("loaderror",t._id,t._node.error?t._node.error.code:0),t._node.removeEventListener("error",t._errorListener,!1)},_loadListener:function(){var t=this,e=t._parent;e._duration=Math.ceil(10*t._node.duration)/10,0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue()),t._node.removeEventListener(s._canPlayEvent,t._loadFn,!1)}};var h={},c=function(t){var e=t._src;if(h[e])return t._duration=h[e].duration,void f(t);if(/^data:[^;]+;base64,/.test(e)){for(var n=atob(e.split(",")[1]),i=new Uint8Array(n.length),o=0;o<n.length;++o)i[o]=n.charCodeAt(o);d(i.buffer,t)}else{var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(){var e=(r.status+"")[0];return"0"!==e&&"2"!==e&&"3"!==e?void t._emit("loaderror",null,"Failed loading audio file with status: "+r.status+"."):void d(r.response,t)},r.onerror=function(){t._webAudio&&(t._html5=!0,t._webAudio=!1,t._sounds=[],delete h[e],t.load())},l(r)}},l=function(t){try{t.send()}catch(e){t.onerror()}},d=function(t,e){s.ctx.decodeAudioData(t,function(t){t&&e._sounds.length>0&&(h[e._src]=t,f(e,t))},function(){e._emit("loaderror",null,"Decoding audio data failed.")})},f=function(t,e){e&&!t._duration&&(t._duration=e.duration),0===Object.keys(t._sprite).length&&(t._sprite={
__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue())},p=function(){try{"undefined"!=typeof AudioContext?s.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?s.ctx=new webkitAudioContext:s.usingWebAudio=!1}catch(t){s.usingWebAudio=!1}var t=/iP(hone|od|ad)/.test(s._navigator&&s._navigator.platform),e=s._navigator&&s._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),n=e?parseInt(e[1],10):null;if(t&&n&&n<9){var i=/safari/.test(s._navigator&&s._navigator.userAgent.toLowerCase());(s._navigator&&s._navigator.standalone&&!i||s._navigator&&!s._navigator.standalone&&!i)&&(s.usingWebAudio=!1)}s.usingWebAudio&&(s.masterGain="undefined"==typeof s.ctx.createGain?s.ctx.createGainNode():s.ctx.createGain(),s.masterGain.gain.value=1,s.masterGain.connect(s.ctx.destination)),s._setup()};i=[],o=function(){return{Howler:s,Howl:a}}.apply(e,i),!(void 0!==o&&(t.exports=o)),e.Howler=s,e.Howl=a,"undefined"!=typeof window?(window.HowlerGlobal=r,window.Howler=s,window.Howl=a,window.Sound=u):"undefined"!=typeof n&&(n.HowlerGlobal=r,n.Howler=s,n.Howl=a,n.Sound=u)}(),function(){"use strict";HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){var e=this;if(!e.ctx||!e.ctx.listener)return e;for(var n=e._howls.length-1;n>=0;n--)e._howls[n].stereo(t);return e},HowlerGlobal.prototype.pos=function(t,e,n){var i=this;return i.ctx&&i.ctx.listener?(e="number"!=typeof e?i._pos[1]:e,n="number"!=typeof n?i._pos[2]:n,"number"!=typeof t?i._pos:(i._pos=[t,e,n],i.ctx.listener.setPosition(i._pos[0],i._pos[1],i._pos[2]),i)):i},HowlerGlobal.prototype.orientation=function(t,e,n,i,o,r){var s=this;if(!s.ctx||!s.ctx.listener)return s;var a=s._orientation;return e="number"!=typeof e?a[1]:e,n="number"!=typeof n?a[2]:n,i="number"!=typeof i?a[3]:i,o="number"!=typeof o?a[4]:o,r="number"!=typeof r?a[5]:r,"number"!=typeof t?a:(s._orientation=[t,e,n,i,o,r],s.ctx.listener.setOrientation(t,e,n,i,o,r),s)},Howl.prototype.init=function(t){return function(e){var n=this;return n._orientation=e.orientation||[1,0,0],n._stereo=e.stereo||null,n._pos=e.pos||null,n._pannerAttr={coneInnerAngle:"undefined"!=typeof e.coneInnerAngle?e.coneInnerAngle:360,coneOuterAngle:"undefined"!=typeof e.coneOuterAngle?e.coneOuterAngle:360,coneOuterGain:"undefined"!=typeof e.coneOuterGain?e.coneOuterGain:0,distanceModel:"undefined"!=typeof e.distanceModel?e.distanceModel:"inverse",maxDistance:"undefined"!=typeof e.maxDistance?e.maxDistance:1e4,panningModel:"undefined"!=typeof e.panningModel?e.panningModel:"HRTF",refDistance:"undefined"!=typeof e.refDistance?e.refDistance:1,rolloffFactor:"undefined"!=typeof e.rolloffFactor?e.rolloffFactor:1},n._onstereo=e.onstereo?[{fn:e.onstereo}]:[],n._onpos=e.onpos?[{fn:e.onpos}]:[],n._onorientation=e.onorientation?[{fn:e.onorientation}]:[],t.call(this,e)}}(Howl.prototype.init),Howl.prototype.stereo=function(e,n){var i=this;if(!i._webAudio)return i;if("loaded"!==i._state)return i._queue.push({event:"stereo",action:function(){i.stereo(e,n)}}),i;var o="undefined"==typeof Howler.ctx.createStereoPanner?"spatial":"stereo";if("undefined"==typeof n){if("number"!=typeof e)return i._stereo;i._stereo=e,i._pos=[e,0,0]}for(var r=i._getSoundIds(n),s=0;s<r.length;s++){var a=i._soundById(r[s]);if(a){if("number"!=typeof e)return a._stereo;a._stereo=e,a._pos=[e,0,0],a._node&&(a._pannerAttr.panningModel="equalpower",a._panner&&a._panner.pan||t(a,o),"spatial"===o?a._panner.setPosition(e,0,0):a._panner.pan.value=e),i._emit("stereo",a._id)}}return i},Howl.prototype.pos=function(e,n,i,o){var r=this;if(!r._webAudio)return r;if("loaded"!==r._state)return r._queue.push({event:"pos",action:function(){r.pos(e,n,i,o)}}),r;if(n="number"!=typeof n?0:n,i="number"!=typeof i?-.5:i,"undefined"==typeof o){if("number"!=typeof e)return r._pos;r._pos=[e,n,i]}for(var s=r._getSoundIds(o),a=0;a<s.length;a++){var u=r._soundById(s[a]);if(u){if("number"!=typeof e)return u._pos;u._pos=[e,n,i],u._node&&(u._panner&&!u._panner.pan||t(u,"spatial"),u._panner.setPosition(e,n,i)),r._emit("pos",u._id)}}return r},Howl.prototype.orientation=function(e,n,i,o){var r=this;if(!r._webAudio)return r;if("loaded"!==r._state)return r._queue.push({event:"orientation",action:function(){r.orientation(e,n,i,o)}}),r;if(n="number"!=typeof n?r._orientation[1]:n,i="number"!=typeof i?r._orientation[2]:i,"undefined"==typeof o){if("number"!=typeof e)return r._orientation;r._orientation=[e,n,i]}for(var s=r._getSoundIds(o),a=0;a<s.length;a++){var u=r._soundById(s[a]);if(u){if("number"!=typeof e)return u._orientation;u._orientation=[e,n,i],u._node&&(u._panner||(u._pos||(u._pos=r._pos||[0,0,-.5]),t(u,"spatial")),u._panner.setOrientation(e,n,i)),r._emit("orientation",u._id)}}return r},Howl.prototype.pannerAttr=function(){var e,n,i,o=this,r=arguments;if(!o._webAudio)return o;if(0===r.length)return o._pannerAttr;if(1===r.length){if("object"!=typeof r[0])return i=o._soundById(parseInt(r[0],10)),i?i._pannerAttr:o._pannerAttr;e=r[0],"undefined"==typeof n&&(o._pannerAttr={coneInnerAngle:"undefined"!=typeof e.coneInnerAngle?e.coneInnerAngle:o._coneInnerAngle,coneOuterAngle:"undefined"!=typeof e.coneOuterAngle?e.coneOuterAngle:o._coneOuterAngle,coneOuterGain:"undefined"!=typeof e.coneOuterGain?e.coneOuterGain:o._coneOuterGain,distanceModel:"undefined"!=typeof e.distanceModel?e.distanceModel:o._distanceModel,maxDistance:"undefined"!=typeof e.maxDistance?e.maxDistance:o._maxDistance,panningModel:"undefined"!=typeof e.panningModel?e.panningModel:o._panningModel,refDistance:"undefined"!=typeof e.refDistance?e.refDistance:o._refDistance,rolloffFactor:"undefined"!=typeof e.rolloffFactor?e.rolloffFactor:o._rolloffFactor})}else 2===r.length&&(e=r[0],n=parseInt(r[1],10));for(var s=o._getSoundIds(n),a=0;a<s.length;a++)if(i=o._soundById(s[a])){var u=i._pannerAttr;u={coneInnerAngle:"undefined"!=typeof e.coneInnerAngle?e.coneInnerAngle:u.coneInnerAngle,coneOuterAngle:"undefined"!=typeof e.coneOuterAngle?e.coneOuterAngle:u.coneOuterAngle,coneOuterGain:"undefined"!=typeof e.coneOuterGain?e.coneOuterGain:u.coneOuterGain,distanceModel:"undefined"!=typeof e.distanceModel?e.distanceModel:u.distanceModel,maxDistance:"undefined"!=typeof e.maxDistance?e.maxDistance:u.maxDistance,panningModel:"undefined"!=typeof e.panningModel?e.panningModel:u.panningModel,refDistance:"undefined"!=typeof e.refDistance?e.refDistance:u.refDistance,rolloffFactor:"undefined"!=typeof e.rolloffFactor?e.rolloffFactor:u.rolloffFactor};var h=i._panner;h?(h.coneInnerAngle=u.coneInnerAngle,h.coneOuterAngle=u.coneOuterAngle,h.coneOuterGain=u.coneOuterGain,h.distanceModel=u.distanceModel,h.maxDistance=u.maxDistance,h.panningModel=u.panningModel,h.refDistance=u.refDistance,h.rolloffFactor=u.rolloffFactor):(i._pos||(i._pos=o._pos||[0,0,-.5]),t(i,"spatial"))}return o},Sound.prototype.init=function(t){return function(){var e=this,n=e._parent;e._orientation=n._orientation,e._stereo=n._stereo,e._pos=n._pos,e._pannerAttr=n._pannerAttr,t.call(this),e._stereo?n.stereo(e._stereo):e._pos&&n.pos(e._pos[0],e._pos[1],e._pos[2],e._id)}}(Sound.prototype.init),Sound.prototype.reset=function(t){return function(){var e=this,n=e._parent;return e._orientation=n._orientation,e._pos=n._pos,e._pannerAttr=n._pannerAttr,t.call(this)}}(Sound.prototype.reset);var t=function(t,e){e=e||"spatial","spatial"===e?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.panningModel=t._pannerAttr.panningModel,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.value=t._stereo),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id)}}()}).call(e,function(){return this}())},function(t,e){"use strict";function n(t,e){return Math.floor(Math.random()*(e-t+1))+t}function i(t,e){return Math.random()*(e-t)+t}e.random=n,e.randomFloat=i},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(6),r=n(15),s=n(8),a=n(12),u=n(11),h=600*o.default.objectScale,c=800*o.default.objectScale,l=225*o.default.objectScale,d=250*o.default.objectScale,f=function(t){function e(e){var n=t.call(this,0,0)||this;return n.moveTimer=0,n.moveTime=1,n.bulletTimer=0,n.bulletTime=.7,n.vy=0,n.origin.y=r.random(100,o.default.height-100),n.origin.y%2===0?(n.origin.x=40,n.vx=e):(n.origin.x=o.default.width-40,n.vx=-e),n.points=[{x:.5,y:-2},{x:1,y:-1},{x:2.5,y:0},{x:1,y:1},{x:-1,y:1},{x:-2.5,y:0},{x:-1,y:-1},{x:-.5,y:-2}],n}return i(e,t),e.prototype.update=function(t){if(this.move(t),this.origin.x>=o.default.width-5||this.origin.x<=5)return void this.trigger("expired");if(this.moveTimer+=t,this.moveTimer>=1&&0!==this.vy&&(this.vy=0,this.moveTimer=0),this.moveTimer>=this.moveTime){var e=r.random(1,20)%2===0;e&&(this.vy=this.origin.x%2===0?this.vx:-this.vx),this.moveTimer=0}this.bulletTimer+=t,this.bulletTimer>=this.bulletTime&&(this.fire(),this.bulletTimer=0)},e.prototype.render=function(){this.draw()},e.prototype.draw=function(){t.prototype.draw.call(this),o.default.draw.shape([this.points[1],this.points[6]],this.origin.x,this.origin.y),o.default.draw.shape([this.points[2],this.points[5]],this.origin.x,this.origin.y)},e}(s.Object2D);e.Alien=f;var p=function(t){function e(){var e=t.call(this,l)||this;return e.score=200,e.scale(7),e}return i(e,t),e.prototype.fire=function(){var t=new u.Vector(r.random(1,360),h),e=new a.Bullet(this.origin.x,this.origin.y,t);this.trigger("fire",e)},e.prototype.destroy=function(){this.trigger("expired")},e}(f);e.BigAlien=p;var _=function(t){function e(e){var n=t.call(this,d)||this;return n.ship=e,n.score=1e3,n.bulletTime=1,n.scale(4),n}return i(e,t),e.prototype.fire=function(){var t;if(this.ship){var e=u.Vector.fromXY(this.ship.origin,this.origin,c);t=new a.Bullet(this.origin.x,this.origin.y,e,2)}else{var e=new u.Vector(r.random(1,360),c);t=new a.Bullet(this.origin.x,this.origin.y,e,2)}this.trigger("fire",t)},e.prototype.destroy=function(){this.ship=null,this.trigger("expired")},e}(f);e.SmallAlien=_},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(9),r=n(6),s=n(11),a=n(15),u=300*r.default.objectScale,h=function(t){function e(e,n,i){void 0===i&&(i=100);var o=t.call(this)||this;o.x=e,o.y=n,o.size=i,o.life=3,o.points=[];for(var r=0;r<15;r++){var h=new s.Vector(a.random(1,360),Math.random()*u);o.points.push({x:e,y:n,vx:h.x,vy:h.y,alpha:Math.random()})}return o}return i(e,t),e.prototype.update=function(t){this.points.forEach(function(e){e.x+=e.vx*t,e.y+=e.vy*t,e.alpha-=.002}),this.life-=t,this.life<=.1&&this.trigger("expired")},e.prototype.render=function(t){this.points.forEach(function(t){a.random(1,10)%2===0&&r.default.draw.rect(t,{x:2,y:2},"rgba(255,255,255,"+t.alpha+")")})},e}(o.EventSource);e.Explosion=h},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(6),r=n(8),s=n(15),a=function(t){function e(e,n,i,o,r,s){void 0===s&&(s=1);var a=t.call(this,e,n)||this;return a.vx=i,a.vy=o,a.size=r,a.multiplier=s,a.life=1,a.frame=0,a.radius=1,a.rocks=[],a}return i(e,t),e.prototype.update=function(t){this.frame++,this.radius=this.size*(this.frame/10),this.life-=t,this.origin.x+=this.vx*t,this.origin.y+=this.vy*t,this.life<=.1&&(this.rocks.length=0,this.trigger("expired"))},e.prototype.render=function(t){if(1===this.frame){var e=this.size*s.random(25,55)/10,n=o.default.ctx;n.beginPath(),n.arc(this.origin.x,this.origin.y,e,0,2*Math.PI,!1),n.fillStyle="rgba(255, 255, 255, "+s.random(.2,.5)+")",n.fill(),n.stroke(),n.closePath()}o.default.draw.circle(this.origin.x,this.origin.y,this.radius,"rgba(128,128,128,"+(.5-this.frame/100)+")")},Object.defineProperty(e.prototype,"x",{get:function(){return this.origin.x-this.radius},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.origin.y-this.radius},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return 2*this.radius},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return 2*this.radius},enumerable:!0,configurable:!0}),e}(r.Object2D);e.Shockwave=a},function(t,e,n){"use strict";var i,o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},r=n(6),s=n(8),a=n(11),u=n(15),h=n(13);!function(t){t[t.Small=5]="Small",t[t.Medium=10]="Medium",t[t.Large=20]="Large"}(i=e.RockSize||(e.RockSize={}));var c=function(t){function e(e,n,i,o,s){void 0===s&&(s=1);var a=t.call(this,e,n)||this;a.rotTimer=0,a.rock1=[[.5,-2],[2,-1],[2,-.7],[1.2,0],[2,1],[1,2],[.5,1.5],[-1,2],[-2,.7],[-2,-1],[-.5,-1],[-1,-2]],a.rock2=[[0,-1.5],[1,-2],[2,-1],[1,-.5],[2,.5],[1,2],[-.5,1.5],[-1,2],[-2,1],[-1.5,0],[-2,-1],[-1,-2]],a.rock3=[[0,-1],[1,-2],[2,-1],[1.5,0],[2,1],[1,2],[-1,2],[-2,1],[-2,-1],[-1,-2]],a.rocks=[a.rock1,a.rock2,a.rock3];var h=s*r.default.objectScale;a.vx=i.x*h,a.vy=i.y*h;var c=u.random(0,2),l=a.rocks[c];return a.points=l.map(function(t){return{x:t[0]*o,y:t[1]*o}}),a.size=o,a.rotate(u.random(1,90)),a.rot=u.random(.01,1)%2===0?1:-1,a.timeToRot=u.random(1,5),a}return o(e,t),e.prototype.update=function(t){this.rotTimer+=1,this.move(t),this.rotTimer===this.timeToRot&&(this.rotate(this.rot),this.rotTimer=0)},e.prototype.render=function(){this.draw()},Object.defineProperty(e.prototype,"direction",{get:function(){var t=Math.atan2(this.vy,this.vx),e=t*(180/Math.PI);return e=e>0?e:360+e,Math.floor(e)},enumerable:!0,configurable:!0}),e.prototype.split=function(){var t;switch(this.size){case i.Large:t=h.largeExplosion;break;case i.Medium:t=h.mediumExplosion;break;case i.Small:t=h.smallExplosion}var n=u.randomFloat(.7,1);if(t.rate(n),t.play(),this.size>i.Small){var o=u.random(this.direction,this.direction+80),r=u.random(this.direction-80,this.direction);o<0&&(o+=360),o>360&&(o-=360),r<0&&(r+=360),r>360&&(r-=360);var s=this.size===i.Large?i.Medium:i.Small,c=new a.Vector(o),l=new a.Vector(r),d=s===i.Medium?u.random(150,250):u.random(250,350),f=s===i.Medium?u.random(150,250):u.random(250,350),p=new e(this.origin.x,this.origin.y,c,s,d),_=new e(this.origin.x,this.origin.y,l,s,f);return[p,_]}return[]},Object.defineProperty(e.prototype,"score",{get:function(){return this.size===i.Large?20:this.size===i.Medium?50:100},enumerable:!0,configurable:!0}),e}(s.Object2D);e.Rock=c},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(6),r=n(8),s=function(t){function e(e,n){var i=t.call(this,e.origin.x,e.origin.y)||this;return i.text=n,i.life=1,i.vx=e.vx,i.vy=e.vy,i}return i(e,t),e.prototype.render=function(){this.draw()},e.prototype.update=function(t){this.move(t),this.life-=t,this.life<=0&&this.destroy()},e.prototype.draw=function(){o.default.draw.text(this.text,this.origin.x,this.origin.y,50*this.life,"rgba(255,255,255,"+this.life+")")},e.prototype.destroy=function(){this.life=0,this.trigger("expired")},e}(r.Object2D);e.ScoreMarker=s},function(t,e){"use strict";var n=[{score:20140,initials:"J H"},{score:20050,initials:"P A"},{score:19930,initials:"  M"},{score:19870,initials:"G I"},{score:19840,initials:"A L"},{score:19790,initials:"M T"},{score:19700,initials:"E O"},{score:19660,initials:"S N"},{score:190,initials:"   "},{score:70,initials:"   "}],i="jph_asteroids_hs",o=function(){function t(){this.scores=[];var t=window.localStorage.getItem(i);this.scores=t?JSON.parse(t)||[]:n}return Object.defineProperty(t.prototype,"top",{get:function(){return this.scores[0]},enumerable:!0,configurable:!0}),t.prototype.qualifies=function(t){var n=e.highscores.scores.filter(function(e){return e.score<t});return!!n.length},t.prototype.save=function(t,e){this.qualifies(t)&&(this.scores.push({score:t,initials:e}),this.scores=this.scores.sort(function(t,e){return t.score>e.score?-1:1}).slice(0,10),window.localStorage.setItem(i,JSON.stringify(this.scores)))},t}();e.highscores=new o},function(t,e,n){"use strict";var i=n(6),o=n(21),r=function(){function t(t){this.score=t,this.blink=0,this.showPushStart=!0,this.highscore=o.highscores.top.score}return t.prototype.update=function(t){this.blink+=t,this.blink>=.4&&(this.blink=0,this.showPushStart=!this.showPushStart)},t.prototype.render=function(){this.drawBackground(),this.drawPushStart(),this.drawHighScores()},t.prototype.drawBackground=function(){i.default.draw.background(),i.default.draw.scorePlayer1(this.score),i.default.draw.oneCoinOnePlay(),i.default.draw.highscore(this.highscore),i.default.draw.copyright()},t.prototype.drawHighScores=function(){var t=i.default.width/2,e=Math.ceil(i.default.height/4.5)+(i.default.font.xlarge+i.default.font.small),n=i.default.font.medium+i.default.font.small;i.default.draw.text2("high scores",i.default.font.medium,function(e){return{x:t-e/2,y:i.default.height/4.5}});for(var r=function(r){var a=e+r*n,u=s.pad(r+1," ",2)+"."+s.pad(o.highscores.scores[r].score," ",6)+" "+o.highscores.scores[r].initials;i.default.draw.text2(u,i.default.font.medium,function(e){return{x:t-e/2,y:a}})},s=this,a=0;a<o.highscores.scores.length;a++)r(a)},t.prototype.drawPushStart=function(){this.showPushStart&&i.default.draw.pushStart()},t.prototype.pad=function(t,e,n){for(t=t.toString();t.length<n;)t=e+t;return t},t}();e.HighScoreMode=r},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(6),r=n(2),s=n(21),a=n(9),u="_abcdefghijklmnopqrstuvwxyz",h=function(t){function e(e){var n=t.call(this)||this;return n.index=1,n.score=e,n.init(),n}return i(e,t),e.prototype.init=function(){this.position=0,this.index=1,this.initials=["a","_","_"]},e.prototype.update=function(t){r.Key.isPressed(r.Key.ROTATE_LEFT)&&(this.index--,this.index<0&&(this.index=u.length-1),this.initials[this.position]=u[this.index]),r.Key.isPressed(r.Key.ROTATE_RIGHT)&&(this.index++,this.index>u.length-1&&(this.index=0),this.initials[this.position]=u[this.index]),r.Key.isPressed(r.Key.HYPERSPACE)&&(this.position++,this.position>=3&&(s.highscores.save(this.score,this.initials.join("").replace("_"," ")),this.init(),this.trigger("done")),this.index=1,this.initials[this.position]=u[this.index])},e.prototype.render=function(){var t=o.default.height/4.5,e=function(e){return o.default.draw.text(e,50,t+=o.default.font.large+5,o.default.font.large)};o.default.draw.background(),o.default.draw.highscore(s.highscores.top.score),o.default.draw.scorePlayer1(this.score),o.default.draw.copyright(),e("your score is one of the ten best"),e("please enter your initials"),e("push rotate to select letter"),e("push hyperspace when letter is correct"),o.default.draw.text3(this.initials.join(""),o.default.font.xlarge,function(t){return{x:o.default.width2-t/2,y:o.default.height/2+o.default.font.xlarge}})},e}(a.EventSource);e.InitialsMode=h},function(t,e,n){"use strict";var i=n(6),o=n(25),r=function(){function t(t){this.world=t,this.showPushStart=!0,this.pushStartTimer=0,this.init()}return t.prototype.init=function(){this.world.started||this.world.startLevel()},t.prototype.update=function(t){this.checkCollisions(),this.world.updateAlienTimer(t),this.world.rocks.length||this.world.explosions.length||this.world.alien||this.world.startLevel(),this.updatePushStartTimer(t),this.world.update(t)},t.prototype.updatePushStartTimer=function(t){this.pushStartTimer+=t,this.pushStartTimer>=.4&&(this.pushStartTimer=0,this.showPushStart=!this.showPushStart)},t.prototype.checkCollisions=function(){var t=this,e=this.world,n=e.alien,i=e.rocks,r=e.alienBullets,s=!!n||!!r.length;if(s){var a=new o.Collisions;a.check([n],i,function(e,n){t.world.alienDestroyed(),t.world.rockDestroyed(n)}),a.check(r,i,function(e,n){t.world.rockDestroyed(n)})}},t.prototype.render=function(t){this.drawBackground(),this.drawPushStart(),this.world.render(t)},t.prototype.drawBackground=function(){i.default.draw.background(),i.default.draw.scorePlayer1(this.world.score),i.default.draw.oneCoinOnePlay(),i.default.draw.highscore(this.world.highscore),i.default.draw.copyright()},t.prototype.drawPushStart=function(){this.showPushStart&&i.default.draw.pushStart()},t}();e.AttractMode=r},function(t,e,n){"use strict";var i=n(6),o=n(26),r=function(){function t(){this.tree=new o.Quadtree({x:0,y:0,width:i.default.width,height:i.default.height},1)}return t.prototype.check=function(t,e,n,i){var o=this;if(t&&t.length&&e&&e.length){var r=[];this.tree.clear(),e.forEach(function(t){o.tree.insert(t)}),t.forEach(function(t){r.length=0,r.push.apply(r,o.tree.retrieve(t)),r.forEach(function(e){e.collided(t)?t.pointInPolyCheck||e.pointInPolyCheck?o.pointsInPolygon(t,e)&&n(t,e):n(t,e):i&&i(t,e)})})}},t.prototype.pointsInPolygon=function(t,e){for(var n=t.vertices.length>e.vertices.length?t.vertices:e.vertices,i=t.vertices.length<=e.vertices.length?t.vertices:e.vertices,o=0,r=i.length;o<r;o++)if(this.pointInPoly(n,i[o]))return!0;return!1},t.prototype.pointInPoly=function(t,e){var n,i=t.length-1,o=i-1,r=t.map(function(t){return t.x}),s=t.map(function(t){return t.y}),a=e.x,u=e.y,h=0;for(n=0;n<i;n++)(s[n]<u&&s[o]>=u||s[o]<u&&s[n]>=u)&&(r[n]<=a||r[o]<=a)&&(h^=r[n]+(u-s[n])/(s[o]-s[n])*(r[o]-r[n])<a),o=n;return h},t}();e.Collisions=r},function(t,e){"use strict";var n=function(){function t(t,e,n,i){void 0===e&&(e=10),void 0===n&&(n=4),void 0===i&&(i=0),this.bounds=t,this.maxObjects=e,this.maxLevels=n,this.level=i,this.objects=[],this.nodes=[],this.width2=this.bounds.width/2,this.height2=this.bounds.height/2,this.xmid=this.bounds.x+this.width2,this.ymid=this.bounds.y+this.height2}return t.prototype.insert=function(t){var e=this;if(t){var n,i=0;if(this.nodes.length&&(n=this.getIndex(t),n.length))return void n.forEach(function(n){e.nodes[n].insert(t)});if(this.objects.push(t),this.objects.length>this.maxObjects&&this.level<this.maxLevels){this.nodes.length||this.split();for(var o=function(){if(n=r.getIndex(r.objects[i]),n.length){var t=r.objects.splice(i,1)[0];n.forEach(function(n){e.nodes[n].insert(t)})}else i+=1},r=this;i<this.objects.length;)o()}}},t.prototype.retrieve=function(t){var e=this;if(!t)return[];var n=this.getIndex(t),i=this.objects;if(this.nodes.length)if(n.length)n.forEach(function(n){i=i.concat(e.nodes[n].retrieve(t))});else for(var o=0;o<this.nodes.length;o++)i=i.concat(this.nodes[o].retrieve(t));return i.filter(function(t,e,n){return n.indexOf(t)===e})},t.prototype.clear=function(){this.objects=[];for(var t=0;t<this.nodes.length;t++)this.nodes[t]&&this.nodes[t].clear();this.nodes=[]},t.prototype.getIndex=function(t){if(!t)return[];var e=[],n=this,i=n.xmid,o=n.ymid,r=t.y<=o,s=t.y>o;if(t.x<=i)if(r){e.push(1);var a=!1;t.x+t.width>i&&(e.push(0),a=!0),t.y+t.height>o&&(e.push(2),a&&e.push(3))}else s&&(e.push(2),t.x+t.width>i&&e.push(3));else t.x>i&&(r?(e.push(0),t.y+t.height>o&&e.push(3)):e.push(3));return e},t.prototype.split=function(){var e=this,n=Math.round(this.width2),i=Math.round(this.height2),o=Math.round(this.bounds.x),r=Math.round(this.bounds.y),s=function(o,r){var s={x:o,y:r,width:n,height:i};return new t(s,e.maxObjects,e.maxLevels,e.level+1)};this.nodes=[s(o+n,r),s(o,r),s(o,r+i),s(o+n,r+i)]},t}();e.Quadtree=n},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(2),r=n(9),s=n(25),a=n(6),u=n(13),h=n(28),c=.5,l=function(t){function e(e){var n=t.call(this)||this;return n.world=e,n.debug=!1,n.bounds=[],n.god=!1,n.shakeTime=0,n.flashPot=0,n}return i(e,t),e.prototype.init=function(){this.world.addShip(a.default.width2,a.default.height2),this.world.startLevel(),this.thumper=new h.Thumper},e.prototype.update=function(t){if(o.Key.isPressed(o.Key.GOD)&&(this.god=!this.god),o.Key.isPressed(o.Key.DEBUG)&&(this.debug=!this.debug),o.Key.isPressed(o.Key.PAUSE)&&(this.world.paused=!this.world.paused,this.world.paused?(u.Sound.off(),console.log(this)):u.Sound.on()),!this.world.paused){if(this.world.levelTimer+=t,this.thumper&&this.world.ship&&this.thumper.update(t),this.world.gameOver&&(this.world.gameOverTimer+=t,this.world.gameOverTimer>=5&&this.trigger("done",this.world)),!this.world.started)return void(this.world.levelTimer>=2&&(this.init(),this.world.started=!0));this.checkCollisions(t),this.world.updateAlienTimer(t),this.shakeTime>0&&(this.shakeTime-=t),this.world.gameOver||(this.world.shouldTryToPlaceShip()&&this.world.tryPlaceShip(t),this.world.shouldCheckForNextLevel()&&(this.world.startLevel(),this.thumper.reset())),this.world.lives||(this.world.gameOver=!0),this.world.update(t)}},e.prototype.render=function(t){this.world.paused||(this.shakeTime>0&&a.default.preShake(),this.renderStatic(),this.world.render(t),this.shakeTime>0&&a.default.postShake())},e.prototype.renderStatic=function(){this.flashPot?(this.flashPot--,a.default.draw.background("#ffffff")):a.default.draw.background(),a.default.draw.copyright(),a.default.draw.scorePlayer1(this.world.score),a.default.draw.highscore(this.world.highscore),a.default.draw.drawExtraLives(this.world.lives),this.world.ship&&(a.default.draw.line({x:40,y:80},{x:140,y:80},"rgba(255,255,255,.4)"),a.default.draw.line({x:40,y:80},{x:40+50*this.world.ship.shield,y:80},"rgba(255,255,255,.6)")),this.world.started||a.default.draw.player1(),this.world.gameOver&&a.default.draw.gameOver(),this.debug&&this.renderDebug()},e.prototype.renderDebug=function(){if(this.god&&a.default.draw.text2("god",a.default.font.small,function(t){return{x:a.default.width-t-10,y:a.default.height-80}}),a.default.draw.text2("debug mode",a.default.font.small,function(t){return{x:a.default.width-t-10,y:a.default.height-40}}),this.bounds&&this.bounds.forEach(function(t){a.default.draw.bounds(t,"#fc058d")}),!this.world.ship&&this.world.lives){var t=a.default.shipRect;a.default.draw.bounds(t,"#00ff00")}this.world.ship&&a.default.draw.text(this.world.ship.angle.toString(),this.world.ship.origin.x+20,this.world.ship.origin.y+20,10);var e=new Date(null);e.setSeconds(this.world.levelTimer),a.default.draw.text2(e.toISOString().substr(11,8),a.default.font.small,function(t){return{x:10,y:a.default.height-40}})},e.prototype.flashBomb=function(){this.flashPot=5},e.prototype.setShake=function(){this.shakeTime<=0&&(this.shakeTime=c)},e.prototype.checkCollisions=function(t){var e=this,n=this.world,i=n.ship,o=n.rocks,r=n.shipBullets,a=n.alien,u=n.alienBullets,h=n.shockwaves;if(this.world.shouldCheckCollisions()){this.bounds.length=0;var l=new s.Collisions;l.check(r,o,function(t,n){e.setShake(),e.world.addScore(n),e.world.rockDestroyed(n),t.destroy()},function(t,n){e.debug&&e.bounds.push(n)}),l.check(r,[a],function(t,n){e.setShake(),e.world.addScore(n),e.world.alienDestroyed(),t.destroy(),e.flashBomb()},function(t,n){e.debug&&e.bounds.push(n)});var d=[];h.filter(function(t){return t.rocks.length}).forEach(function(t){return d.push.apply(d,t.rocks)});var f=this.world.rocks.filter(function(t){return d.indexOf(t)<0});l.check(d,f,function(t,n){e.setShake(),e.world.addScore(t),e.world.addScore(n),e.world.rockDestroyed(t),e.world.rockDestroyed(n)}),this.god||(l.check([i],o,function(t,n){e.shakeTime=c,e.world.addScore(n),e.world.rockDestroyed(n),t.shield-=.5,t.shield<=0&&(e.world.shipDestroyed(),e.flashBomb())},function(t,n){e.debug&&e.bounds.push(n)}),l.check([i],[a],function(t,n){e.shakeTime=c,e.world.addScore(n),e.world.alienDestroyed(),t.shield-=.5,t.shield<=0&&(e.flashBomb(),e.world.shipDestroyed())},function(t,n){e.debug&&e.bounds.push(n)}),l.check(u,[i],function(t,n){e.shakeTime=c,n.shield-=1,n.shield<=0&&(e.world.shipDestroyed(),e.flashBomb()),t.destroy()},function(t,n){e.debug&&e.bounds.push(n)})),l.check([a],o,function(t,n){e.shakeTime=c,e.world.alienDestroyed(),e.world.rockDestroyed(n),e.flashBomb()},function(t,n){e.debug&&e.bounds.push(n)}),l.check(u,o,function(t,n){e.shakeTime=c,e.world.rockDestroyed(n)},function(t,n){e.debug&&e.bounds.push(n)})}},e}(r.EventSource);e.GameMode=l},function(t,e,n){"use strict";var i=n(13),o=.15,r=function(){function t(){this.lo=!0,this.reset()}return t.prototype.reset=function(){this.thumpBeatTimer=0,this.thumpBeat=1,this.thumpTimer=0,this.thumpTime=10,this.max=!1},t.prototype.update=function(t){this.thumpTimer+=t,this.thumpBeatTimer+=t,this.thumpBeat-=2e-4,this.thumpBeat<=o&&(this.thumpBeat=o),this.thumpBeatTimer>=this.thumpBeat&&(this.lo?i.thumpLo.play():i.thumpHi.play(),this.lo=!this.lo,this.thumpBeatTimer=0)},t}();e.Thumper=r}]);