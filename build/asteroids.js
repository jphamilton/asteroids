!function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/build/",e(e.s=22)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(11),o=function(){function t(){var t=this;this.x=0,this.y=0,this.canvas=document.getElementById("canvas"),this.ctx=this.canvas.getContext("2d"),this.draw=new i.Draw(this.ctx),this.init(),window.addEventListener("resize",function(){t.init()})}return t.prototype.init=function(){this.canvas.width=document.body.clientWidth,this.canvas.height=document.body.clientHeight,this.width=this.canvas.width,this.height=this.canvas.height,this.width2=this.width/2,this.height2=this.height/2,this.width>=1280?(this._fontXL=60,this._fontL=30,this._fontM=24,this._fontS=12,this._objectScale=1):this.width>=800?(this._fontXL=48,this._fontL=24,this._fontM=18,this._fontS=10,this._objectScale=.75):(this._fontXL=36,this._fontL=12,this._fontM=10,this._fontS=6,this._objectScale=.5),this._pointSize=4*this._objectScale;var t=120*this._objectScale;this._shipRect={x:this.width2-t,y:this.height2-t,width:2*t,height:2*t}},Object.defineProperty(t.prototype,"font",{get:function(){var t=this;return{get xlarge(){return t._fontXL},get large(){return t._fontL},get medium(){return t._fontM},get small(){return t._fontS}}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"objectScale",{get:function(){return this._objectScale},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pointSize",{get:function(){return this._pointSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shipRect",{get:function(){return this._shipRect},enumerable:!0,configurable:!0}),t.prototype.preShake=function(){this.ctx.save();var t=10*Math.random(),e=10*Math.random();this.ctx.translate(t,e)},t.prototype.postShake=function(){this.ctx.restore()},t}();e.Screen=o,e.default=new o},function(t,e,n){"use strict";function i(t,e){return Math.floor(Math.random()*(e-t+1))+t}function o(t,e){return Math.random()*(e-t)+t}Object.defineProperty(e,"__esModule",{value:!0}),e.random=i,e.randomFloat=o},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=n(5),s=n(26),a=n(3),u=function(t){function e(e,n){var i=t.call(this)||this;return i.angle=360,i.velocity=new a.Vector(0,0),i._xmin=0,i._xmax=0,i._ymin=0,i._ymax=0,i._width=0,i._height=0,i._score=0,i.origin=new a.Vector(e,n),i}return i(e,t),Object.defineProperty(e.prototype,"score",{get:function(){return this._score},set:function(t){this._score=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"points",{get:function(){return this._points},set:function(t){t.forEach(function(t){t.x*=o.default.objectScale,t.y*=o.default.objectScale}),this._points=t,this.calcBounds()},enumerable:!0,configurable:!0}),e.prototype.calcBounds=function(){var t=this;this._points.forEach(function(e){e.x<t._xmin&&(t._xmin=e.x),e.x>t._xmax&&(t._xmax=e.x),e.y<t._ymin&&(t._ymin=e.y),e.y>t._ymax&&(t._ymax=e.y)}),this._width=this._xmax-this._xmin,this._height=this._ymax-this._ymin},e.prototype.rotate=function(t){this.angle+=t,this.angle<1&&(this.angle+=360),this.angle>360&&(this.angle-=360);var e=s.COS[t],n=s.SIN[t];this.points.forEach(function(t){var i=e*t.x-n*t.y,o=n*t.x+e*t.y;t.x=i,t.y=o}),this.calcBounds()},e.prototype.move=function(t){t=t?t:1,this.origin.x+=this.velocity.x*t,this.origin.y+=this.velocity.y*t,this.origin.x>o.default.width&&(this.origin.x-=o.default.width),this.origin.x<0&&(this.origin.x+=o.default.width),this.origin.y>o.default.height&&(this.origin.y-=o.default.height),this.origin.y<0&&(this.origin.y+=o.default.height)},e.prototype.scale=function(t){this.points.forEach(function(e){e.x*=t,e.y*=t}),this.calcBounds()},e.prototype.draw=function(t,e){void 0===t&&(t=!0),void 0===e&&(e="rgba(255,255,255,.8)"),o.default.draw.vectorShape(this.points,this.origin.x,this.origin.y,e,t)},Object.defineProperty(e.prototype,"x",{get:function(){return this.origin.x+this._xmin},set:function(t){this.origin.x=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.origin.y+this._ymin},set:function(t){this.origin.y=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"vertices",{get:function(){var t=this;return this.points.map(function(e){return{x:t.origin.x+e.x,y:t.origin.y+e.y}})},enumerable:!0,configurable:!0}),e.prototype.collided=function(t){return!!(t&&this.x<t.x+t.width&&this.x+this.width>t.x&&this.y<t.y+t.height&&this.height+this.y>t.y)},e.prototype.destroy=function(){for(var t in this.handlers)this.handlers[t]=null;this.handlers={}},e}(r.EventSource);e.Object2D=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});for(var i={},o=2*Math.PI,r=0;r<=360;r++){var s=o*(r/360);i[r]={x:Math.cos(s),y:Math.sin(s)}}var a=function(){function t(t,e){this.x=t,this.y=e}return t.fromAngle=function(e,n){return void 0===n&&(n=1),new t(i[e].x*n,i[e].y*n)},t.fromXY=function(e,n,i){void 0===i&&(i=1);var o=e.x-n.x,r=e.y-n.y,s=Math.sqrt(o*o+r*r);return o/=s,r/=s,new t(o*i,r*i)},t.prototype.add=function(t){this.x+=t.x,this.y+=t.y},t.prototype.copy=function(){return new t(this.x,this.y)},t.prototype.dot=function(t){return this.x*t.x+this.y*t.y},t.prototype.friction=function(t){this.x-=this.x*t,this.y-=this.y*t},t.prototype.scale=function(t,e){this.x*=t,this.y*=e},Object.defineProperty(t.prototype,"magnitude",{get:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},enumerable:!0,configurable:!0}),t}();e.Vector=a},function(t,e,n){"use strict";function i(t){var n=0,i=new o.Howl(t);i.on("end",function(){t.max&&n--});var s=i.play.bind(i);t.max&&t.max;return i.play=function(){r&&(t.max?n<t.max&&(s(),n++):s())},i._origVolume=t.volume,e.all.push(i),i}Object.defineProperty(e,"__esModule",{value:!0});var o=n(20),r=!0;e.all=[],e.fire=i({src:["./assets/fire.wav"],volume:.2}),e.thrust=i({src:["./assets/thrust.wav"],volume:.3}),e.alienFire=i({src:["./assets/sfire.wav"],volume:.5}),e.largeExplosion=i({src:["./assets/explode1.wav"],volume:.5,max:2}),e.mediumExplosion=i({src:["./assets/explode2.wav"],volume:.5,max:2}),e.smallExplosion=i({src:["./assets/explode3.wav"],volume:.5,max:2}),e.largeAlien=i({src:["./assets/lsaucer.wav"],volume:.5,loop:!0}),e.smallAlien=i({src:["./assets/ssaucer.wav"],volume:.5,loop:!0}),e.thumpLo=i({src:["./assets/thumplo.wav"],volume:.3}),e.thumpHi=i({src:["./assets/thumphi.wav"],volume:.3}),e.extraLife=i({src:["./assets/life.wav"],volume:.5}),e.powerup=i({src:["./assets/powerup.wav"],volume:.5}),e.getPowerup=i({src:["./assets/getpowerup.wav"],volume:.5}),e.Sound={on:function(){r=!0,e.all.forEach(function(t){return t.volume(t._origVolume)})},off:function(){r=!1,e.all.forEach(function(t){return t.volume(0)})},stop:function(){e.all.forEach(function(t){return t.stop()})}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){this.handlers={}}return t.prototype.on=function(t,e){this.handlers[t]||(this.handlers[t]=[]),this.handlers[t].push(e)},t.prototype.off=function(t,e){this.handlers[t]=this.handlers[t].filter(function(t){return t!==e})},t.prototype.trigger=function(t){for(var e=this,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];(this.handlers[t]||[]).forEach(function(t){return t.apply(void 0,[e].concat(n))})},t}();e.EventSource=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){this.debug=!1,this.paused=!1,this.god=!1,this.burn=!0}return t}();e.default=new i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=[{score:20140,initials:"J H"},{score:20050,initials:"P A"},{score:19930,initials:"  M"},{score:19870,initials:"G I"},{score:19840,initials:"A L"},{score:19790,initials:"M T"},{score:19700,initials:"E O"},{score:19660,initials:"S N"},{score:190,initials:"   "},{score:70,initials:"   "}],o="jph_asteroids_hs",r=function(){function t(){this.scores=[];var t=window.localStorage.getItem(o);this.scores=t?JSON.parse(t)||[]:i}return Object.defineProperty(t.prototype,"top",{get:function(){return this.scores[0]},enumerable:!0,configurable:!0}),t.prototype.qualifies=function(t){return!!e.highscores.scores.filter(function(e){return e.score<t}).length},t.prototype.save=function(t,e){this.qualifies(t)&&(this.scores.push({score:t,initials:e}),this.scores=this.scores.sort(function(t,e){return t.score>e.score?-1:1}).slice(0,10),window.localStorage.setItem(o,JSON.stringify(this.scores)))},t}();e.highscores=new r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(19),o=222,r=function(){function t(){var t=this;this.touched=!1,this.HYPERSPACE=32,this.ROTATE_LEFT=37,this.ROTATE_RIGHT=39,this.THRUST=38,this.FIRE=17,this.PLAYER_ONE_START=49,this.DEBUG=68,this.PAUSE=80,this.GOD=71,this.MONITOR_BURN=66,this.keys=new Array(o),this.prev=new Array(o);for(var e=0;e<o;e++)this.keys[e]=this.prev[e]=!1;window.onkeydown=function(e){t.keys[e.keyCode]=!0},window.onkeyup=function(e){t.keys[e.keyCode]=!1};var n=document.getElementById("game");this.mc=new i.Manager(n);var r=new i.Pan,s=new i.Tap,a=new i.Pinch({enable:!0});this.mc.add(r),this.mc.add(s,{interval:50}),this.mc.add(a),this.mc.on("panup",function(e){t.keys[t.THRUST]=!0}),this.mc.on("panleft",function(e){t.keys[t.ROTATE_LEFT]=!0}),this.mc.on("panright",function(e){t.keys[t.ROTATE_RIGHT]=!0}),this.mc.on("panend",function(e){t.keys[t.THRUST]=!1,t.keys[t.ROTATE_LEFT]=!1,t.keys[t.ROTATE_RIGHT]=!1}),this.mc.on("tap",function(e){t.keys[t.FIRE]=!0,t.keys[t.PLAYER_ONE_START]=!0,t.touched=!0}),this.mc.on("pinchout",function(e){t.keys[t.HYPERSPACE]=!0}),this.mc.on("pinchend",function(e){t.keys[t.HYPERSPACE]=!1})}return t.prototype.update=function(){for(var t=0;t<o;t++)this.prev[t]=this.keys[t];this.touched&&(this.keys[this.FIRE]=!1,this.keys[this.PLAYER_ONE_START]=!1),this.touched=!this.touched},t.prototype.isPressed=function(t){return this.prev[t]===!1&&this.keys[t]===!0},t.prototype.wasPressed=function(t){return this.prev[t]&&!this.keys[t]},t.prototype.isDown=function(t){return this.keys[t]},t}();e._Key=r,e.Key=new r},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=n(2),s=function(t){function e(e,n,i){void 0===i&&(i=1.25);var o=t.call(this,e.x,e.y)||this;return o.life=i,o.frame=0,o.velocity=n,o}return i(e,t),e.prototype.render=function(){this.draw()},e.prototype.update=function(t){this.frame++,this.move(t),this.life-=t,this.life<=0&&this.destroy()},e.prototype.draw=function(){var t=this.frame<=1?8*o.default.objectScale:4*o.default.objectScale;o.default.draw.rect(this.origin.x-2,this.origin.y-2,t,t,"rgba(255,0,255,.5)"),o.default.draw.rect(this.origin.x-1,this.origin.y-1,t,t,"rgba(0,255,255,.5)"),o.default.draw.rect(this.origin.x,this.origin.y,t,t)},e.prototype.destroy=function(){this.trigger("expired")},Object.defineProperty(e.prototype,"vertices",{get:function(){return[this.origin]},enumerable:!0,configurable:!0}),e}(r.Object2D);e.Bullet=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=n(27),r=n(25),s=function(){function t(){this.tree=new o.Quadtree({x:0,y:0,width:i.default.width,height:i.default.height},1)}return t.prototype.bulletCheck=function(t,e,n,i){var o=this;if(t&&t.length&&e&&e.length){var s=[],a=[];this.tree.clear(),e.forEach(function(t){o.tree.insert(t)});for(var u=this,c=0;c<t.length;c++)!function(e){var o=t[e];s.length=0,s.push.apply(s,u.tree.retrieve(o)),s.forEach(function(s){if(s.collided(o))return void n(o,s);if(i&&i(o,o,s),e<t.length-1){var u=t[e+1],c=[s.x,s.y,s.x+s.width,s.y+s.height];a.length=0,r.lineclip([[o.origin.x,o.origin.y],[u.origin.x,u.origin.y]],c,a),a.length&&(i&&i(o,u,s),n(o,s))}})}(c)}},t.prototype.check=function(t,e,n,i,o){var r=this;if(t&&t.length&&e&&e.length){var s=[];this.tree.clear(),e.forEach(function(t){r.tree.insert(t)}),t.forEach(function(t){s.length=0,s.push.apply(s,r.tree.retrieve(t)),s.forEach(function(e){e.collided(t)?n?r.pointsInPolygon(t,e||r.pointsInPolygon(e,t))&&i(t,e):i(t,e):o&&o(t,e)})})}},t.prototype.pointsInPolygon=function(t,e){for(var n=t.vertices.length>e.vertices.length?t.vertices:e.vertices,i=t.vertices.length<=e.vertices.length?t.vertices:e.vertices,o=0,r=i.length;o<r;o++)if(this.pointInPoly(n,i[o]))return!0;return!1},t.prototype.pointInPoly=function(t,e){var n,i=t.length-1,o=i-1,r=t.map(function(t){return t.x}),s=t.map(function(t){return t.y}),a=e.x,u=e.y,c=0;for(n=0;n<i;n++)(s[n]<u&&s[o]>=u||s[o]<u&&s[n]>=u)&&(r[n]<=a||r[o]<=a)&&(c^=r[n]+(u-s[n])/(s[o]-s[n])*(r[o]-r[n])<a),o=n;return c},t}();e.Collisions=s},function(t,e,n){"use strict";function i(t){return void 0===t&&(t=1),"rgba(255,0,255, "+t+")"}function o(t){return void 0===t&&(t=1),"rgba(0,255,255, "+t+")"}function r(t){return void 0===t&&(t=1),"rgba(255,255,255, "+t+")"}Object.defineProperty(e,"__esModule",{value:!0});var s=n(0),a=n(12),u=n(1),c=n(6),l="rgba(255,255,255,.8)",h="rgba(255,255,255,.8)";e.magenta=i,e.cyan=o,e.white=r;var d=i(.5),f=o(.5),p=function(){function t(t){this.ctx=t}return t.prototype.line=function(t,e,n,i,o,r){void 0===o&&(o=l),void 0===r&&(r=2);var s=this.ctx;s.beginPath(),s.lineWidth=r,s.moveTo(t,e),s.strokeStyle=o,s.lineTo(n,i),s.stroke(),s.closePath()},t.prototype.vectorline=function(t,e,n,i,o,r){void 0===o&&(o=l),void 0===r&&(r=2);var s=this.ctx,a=s.strokeStyle;c.default.burn&&(this.line(t-2,e,n-2,i,d),this.line(t-1,e-2,n-1,i-1,f)),this.line(t,e,n,i,o),s.strokeStyle=a},t.prototype.shape=function(t,e,n,i,o){void 0===i&&(i=l),void 0===o&&(o=!0);var r=t.length-1;this.ctx.save();for(var s=0;s<r;s++)this.line(e+t[s].x,n+t[s].y,e+t[s+1].x,n+t[s+1].y,i);o&&this.line(e+t[r].x,n+t[r].y,e+t[0].x,n+t[0].y,i),this.ctx.restore()},t.prototype.vectorShape=function(t,e,n,i,o){void 0===i&&(i=l),void 0===o&&(o=!0);var r=t.length-1;this.ctx.save();for(var s=0;s<r;s++)this.vectorline(e+t[s].x,n+t[s].y,e+t[s+1].x,n+t[s+1].y,i);o&&this.vectorline(e+t[r].x,n+t[r].y,e+t[0].x,n+t[0].y,i),this.ctx.restore()},t.prototype.rect=function(t,e,n,i,o){void 0===o&&(o=l);var r=this.ctx;r.beginPath(),r.fillStyle=o,r.fillRect(t,e,n,i),r.stroke(),r.closePath()},t.prototype.point=function(t,e){void 0===e&&(e=l),this.rect(t.x,t.y,s.default.pointSize,s.default.pointSize,e)},t.prototype.background=function(t){void 0===t&&(t="#000000");var e=this.ctx;e.fillStyle=t,e.fillRect(0,0,s.default.width,s.default.height)},t.prototype.scanlines=function(){if(c.default.burn)for(var t=this.ctx,e=u.random(2,5),n=0;n<s.default.height-e;n+=e)t.beginPath(),t.lineWidth=1,t.moveTo(0,n),t.strokeStyle="#001111",t.lineTo(s.default.width,n),t.stroke(),t.moveTo(0,n+1),t.strokeStyle="rgba(255,0,255,.5)",t.lineTo(s.default.width,n+1),t.stroke(),t.moveTo(0,n+2),t.strokeStyle="rgba(0,255,255,.3)",t.lineTo(s.default.width,n+2),t.stroke(),t.closePath()},t.prototype.bounds=function(t,e){void 0===e&&(e=l);var n=this.ctx;t&&(n.save(),n.beginPath(),n.strokeStyle=e,n.lineWidth=2,n.moveTo(t.x,t.y),n.lineTo(t.x+t.width,t.y),n.lineTo(t.x+t.width,t.y+t.height),n.lineTo(t.x,t.y+t.height),n.lineTo(t.x,t.y),n.stroke(),n.closePath(),n.restore())},t.prototype.text=function(t,e,n,i,o){void 0===o&&(o=h);var r=this.ctx;r.save(),r.font=i+"pt hyperspace",r.textBaseline="middle",r.lineWidth=1,c.default.burn&&(r.strokeStyle=d,r.strokeText(t,e-2,n-2),r.strokeStyle=f,r.strokeText(t,e-1,n-1)),r.strokeStyle=o,r.strokeText(t,e,n),r.restore()},t.prototype.text2=function(t,e,n){var r=this.ctx;r.save(),r.font=e+"pt hyperspace",r.textBaseline="middle",r.lineWidth=1;var s=r.measureText(t).width,a=n(s);c.default.burn&&(r.strokeStyle=i(.5),r.strokeText(t,a.x-2,a.y-2),r.strokeStyle=o(.5),r.strokeText(t,a.x-1,a.y-1)),r.strokeStyle=h,r.strokeText(t,a.x,a.y),r.restore()},t.prototype.text3=function(t,e,n){var r=this.ctx;r.save(),r.font=e+"pt hyperspace",r.textBaseline="middle";var s=r.measureText(t).width,a=n(s);c.default.burn&&(r.fillStyle=i(.5),r.fillText(t,a.x-2,a.y-2),r.fillStyle=o(.5),r.fillText(t,a.x-1,a.y-1)),r.fillStyle=h,r.fillText(t,a.x,a.y),r.restore()},t.prototype.scorePlayer1=function(t){for(var e=t.toString();e.length<2;)e="0"+e;this.text(e,100,20,s.default.font.medium)},t.prototype.highscore=function(t){for(var e=t.toString();e.length<2;)e="0"+e;this.text2(e,s.default.font.small,function(t){return{x:s.default.width2-t/2,y:20}})},t.prototype.oneCoinOnePlay=function(){this.text2("1  coin  1  play",s.default.font.medium,function(t){return{x:s.default.width2-t/2,y:s.default.height/8*7}})},t.prototype.pushStart=function(){s.default.draw.text3("push start",s.default.font.xlarge,function(t){return{x:s.default.width2-t/2,y:s.default.height/8}})},t.prototype.player1=function(){s.default.draw.text3("player 1",s.default.font.xlarge,function(t){return{x:s.default.width2-t/2,y:s.default.height/4.5}})},t.prototype.gameOver=function(){s.default.draw.text3("game over",s.default.font.xlarge,function(t){return{x:s.default.width2-t/2,y:s.default.height/4.5}})},t.prototype.copyright=function(){this.text2(String.fromCharCode(169)+" 1979 atari inc",s.default.font.small,function(t){return{x:s.default.width2-t/2,y:s.default.height-s.default.font.small}})},t.prototype.drawExtraLives=function(t){t=Math.min(t,10);for(var e=new a.Ship(0,0),n=2.3*(e.x+e.width),i=20+s.default.font.medium+10,o=0;o<t;o++)e.origin.x=80+o*n,e.origin.y=i,e.render()},t.prototype.circle=function(t,e,n,r){void 0===r&&(r=l);var s=this.ctx;c.default.burn&&(s.beginPath(),s.arc(t-2,e-2,n,0,2*Math.PI,!1),s.strokeStyle=i(.2),s.stroke(),s.closePath(),s.beginPath(),s.arc(t-1,e-1,n,0,2*Math.PI,!1),s.strokeStyle=o(.2),s.stroke(),s.closePath()),s.beginPath(),s.arc(t,e,n,0,2*Math.PI,!1),s.strokeStyle=r,s.stroke(),s.closePath()},t}();e.Draw=p},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=n(8),s=n(2),a=n(3),u=n(9),c=n(4),l=n(1),h=1e3*o.default.objectScale,d=1100*o.default.objectScale,f=150*o.default.objectScale,p=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.points=[{x:5,y:8},{x:0,y:20},{x:-5,y:8}],i}return i(e,t),e.prototype.update=function(){},e.prototype.render=function(){this.draw(!1)},e}(s.Object2D),_=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.moving=!1,i.rotating=!1,i.bulletCount=0,i.bulletTimer=0,i.shield=1,i.trails=[],i.flame=new p(e,n),i.points=[{x:0,y:-15},{x:10,y:10},{x:5,y:5},{x:-5,y:5},{x:-10,y:10}],i.angle=270,i}return i(e,t),e.prototype.render=function(){this.draw(),this.moving&&l.random(1,10)%2==0&&this.flame.draw(!1),this.trails.length&&this.trails.forEach(function(t){t.alpha>0&&(o.default.draw.shape(t.points,t.x,t.y,"rgba(255,0,255,"+t.alpha+")",!0),o.default.draw.shape(t.points,t.x-1,t.y-1,"rgba(0,255,255,"+t.alpha+")",!0),t.alpha-=.1)})},e.prototype.update=function(t){this.move(t),this.flame.move(t),r.Key.isDown(r.Key.THRUST)?(this.moving=!0,this.thrust()):this.moving=!1,r.Key.isPressed(r.Key.ROTATE_LEFT)&&this.rotate(-1),r.Key.isDown(r.Key.ROTATE_LEFT)&&this.rotate(-5),r.Key.isPressed(r.Key.ROTATE_RIGHT)&&this.rotate(1),r.Key.isDown(r.Key.ROTATE_RIGHT)&&this.rotate(5),this.rotating=r.Key.isDown(r.Key.ROTATE_LEFT)||r.Key.isDown(r.Key.ROTATE_RIGHT),r.Key.isDown(r.Key.FIRE)&&this.fire(),r.Key.isPressed(r.Key.HYPERSPACE)&&this.hyperspace(),this.bulletTimer>=0&&(this.bulletTimer-=t),this.moving&&(Math.abs(this.velocity.x)>200||Math.abs(this.velocity.y)>200)?this.trails.push({points:this.points.slice(),x:this.origin.x,y:this.origin.y,alpha:.5}):this.trails.length=0,this.moving||(this.velocity.friction(.005),this.flame.velocity=this.velocity)},e.prototype.rotate=function(e){t.prototype.rotate.call(this,e),this.flame.rotate(e)},e.prototype.thrust=function(){var t=a.Vector.fromAngle(this.angle,.1*f);this.velocity.magnitude<d&&(this.velocity.add(t),this.flame.velocity=this.velocity),c.thrust.play()},e.prototype.fire=function(){var t=this;if(this.bulletTimer<=0&&this.bulletCount<10){c.fire.play(),this.bulletTimer=.1,this.bulletCount++;var e=a.Vector.fromAngle(this.angle),n=new u.Bullet(this.origin,e,1);n.on("expired",function(){t.bulletCount--});var i=n.velocity.copy();i.scale(20,20),n.origin.add(i);var o=0;this.velocity.dot(n.velocity)>0&&(o=this.velocity.magnitude),o=Math.max(h,o+h),n.velocity.scale(o,o);var r=(this.angle+180)%360,s=a.Vector.fromAngle(r,5);this.origin.add(s),this.flame.origin.add(s),this.trigger("fire",n)}},e.prototype.hyperspace=function(){var t=l.random(40,o.default.width-40),e=l.random(40,o.default.height-40);this.velocity=new a.Vector(0,0),this.flame.velocity=this.velocity,this.x=this.flame.x=t,this.y=this.flame.y=e},e.prototype.destroy=function(){this.trigger("expired")},e}(s.Object2D);e.Ship=_},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=n(10),r=function(){function t(t){this.world=t,this.showPushStart=!0,this.pushStartTimer=0,this.init()}return t.prototype.init=function(){this.world.started||this.world.startLevel()},t.prototype.update=function(t){this.checkCollisions(),this.world.updateAlienTimer(t),this.world.rocks.length||this.world.scenery.length||this.world.alien||this.world.startLevel(),this.updatePushStartTimer(t),this.world.update(t)},t.prototype.updatePushStartTimer=function(t){this.pushStartTimer+=t,this.pushStartTimer>=.4&&(this.pushStartTimer=0,this.showPushStart=!this.showPushStart)},t.prototype.checkCollisions=function(){var t=this,e=this.world,n=e.alien,i=e.rocks,r=e.alienBullets;if(!!n||!!r.length){var s=new o.Collisions;s.check([n],i,!1,function(e,n){t.world.shake(),t.world.alienDestroyed(),t.world.rockDestroyed(n)}),s.check(r,i,!1,function(e,n){t.world.shake(),t.world.rockDestroyed(n)})}},t.prototype.render=function(t){this.drawBackground(),this.drawPushStart(),this.world.render(t)},t.prototype.drawBackground=function(){i.default.draw.background(),i.default.draw.scorePlayer1(this.world.score),i.default.draw.oneCoinOnePlay(),i.default.draw.highscore(this.world.highscore),i.default.draw.copyright()},t.prototype.drawPushStart=function(){this.showPushStart&&i.default.draw.pushStart()},t}();e.AttractMode=r},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(5),r=n(10),s=n(0),a=n(31),u=n(6),c=function(t){function e(e){var n=t.call(this)||this;return n.world=e,n.bounds=[],n.lines=[],n}return i(e,t),e.prototype.init=function(){this.world.addShip(s.default.width2,s.default.height2),this.world.startLevel(),this.thumper=new a.Thumper},e.prototype.update=function(t){if(this.world.levelTimer+=t,this.thumper&&this.world.ship&&this.thumper.update(t),this.world.gameOver&&(this.world.gameOverTimer+=t,this.world.gameOverTimer>=5&&this.trigger("done",this.world)),!this.world.started)return void(this.world.levelTimer>=2&&(this.init(),this.world.started=!0));this.checkCollisions(t),this.world.updateAlienTimer(t),this.world.gameOver||(this.world.shouldTryToPlaceShip()&&this.world.tryPlaceShip(t),this.world.shouldCheckForNextLevel()&&(this.world.startLevel(),this.thumper.reset())),this.world.lives||(this.world.gameOver=!0),this.world.update(t)},e.prototype.render=function(t){u.default.paused||(this.renderStatic(),this.world.render(t))},e.prototype.renderStatic=function(){s.default.draw.background(),s.default.draw.copyright(),s.default.draw.scorePlayer1(this.world.score),s.default.draw.highscore(this.world.highscore),s.default.draw.drawExtraLives(this.world.lives),this.world.ship&&(s.default.draw.vectorline(40,80,140,80,"rgba(255,255,255,.4)"),s.default.draw.vectorline(40,80,40+100*this.world.ship.shield,80,"rgba(255,255,255,.6)")),this.world.started||s.default.draw.player1(),this.world.gameOver&&s.default.draw.gameOver(),u.default.debug&&this.renderDebug(),u.default.god&&s.default.draw.text2("god",s.default.font.small,function(t){return{x:s.default.width-t-10,y:s.default.height-80}})},e.prototype.renderDebug=function(){if(s.default.draw.text2("debug mode",s.default.font.small,function(t){return{x:s.default.width-t-10,y:s.default.height-40}}),this.bounds&&this.bounds.forEach(function(t){s.default.draw.bounds(t,"#fc058d")}),this.lines.forEach(function(t){s.default.draw.vectorline(t[0].origin.x,t[0].origin.y,t[1].origin.x,t[1].origin.y,"#fd1f00")}),!this.world.ship&&this.world.lives){var t=s.default.shipRect;s.default.draw.bounds(t,"#00ff00")}this.world.ship&&(s.default.draw.text(this.world.ship.angle.toString(),this.world.ship.origin.x+20,this.world.ship.origin.y+20,10),s.default.draw.text(this.world.ship.velocity.x.toString(),this.world.ship.origin.x+20,this.world.ship.origin.y+40,10),s.default.draw.text(this.world.ship.velocity.y.toString(),this.world.ship.origin.x+20,this.world.ship.origin.y+60,10));var e=new Date(null);e.setSeconds(this.world.levelTimer),s.default.draw.text2(e.toISOString().substr(11,8),s.default.font.small,function(t){return{x:10,y:s.default.height-40}})},e.prototype.checkCollisions=function(t){var e=this,n=this.world,i=n.ship,o=n.rocks,s=n.shipBullets,a=n.alien,c=n.alienBullets,l=n.shockwaves,h=n.powerup;if(this.world.shouldCheckCollisions()){this.bounds.length=0,this.lines.length=0;var d=new r.Collisions;d.bulletCheck(s,o,function(t,n){e.world.shake(),e.world.addScore(n),e.world.rockDestroyed(n),t.destroy()},function(t,n,i){u.default.debug&&(e.bounds.push(i),e.lines.push([t,n]))}),d.bulletCheck(s,[a],function(t,n){e.world.shake(),e.world.addScore(n),e.world.alienDestroyed(),t.destroy()},function(t,n,i){u.default.debug&&(e.bounds.push(i),e.lines.push([t,n]))});var f=[];l.filter(function(t){return t.rocks.length}).forEach(function(t){return f.push.apply(f,t.rocks)});var p=this.world.rocks.filter(function(t){return f.indexOf(t)<0});d.check(f,p,!1,function(t,n){e.world.addScore(t),e.world.addScore(n),e.world.rockDestroyed(t),e.world.rockDestroyed(n)}),d.check([i],[h],!0,function(t,n){e.world.addPowerup(),n.destroy()},function(t,n){u.default.debug&&e.bounds.push(n)}),u.default.god||(d.check([i],o,!0,function(t,n){e.world.shake(),e.world.addScore(n),e.world.rockDestroyed(n),t.shield-=.25,t.shield<=0&&e.world.shipDestroyed()},function(t,n){u.default.debug&&e.bounds.push(n)}),d.check([i],[a],!0,function(t,n){e.world.shake(),e.world.addScore(n),e.world.alienDestroyed(),t.shield-=.5,t.shield<=0&&e.world.shipDestroyed()},function(t,n){u.default.debug&&e.bounds.push(n)}),d.check(c,[i],!0,function(t,n){e.world.shake(),n.shield-=1,n.shield<=0&&e.world.shipDestroyed(),t.destroy()},function(t,n){u.default.debug&&e.bounds.push(n)})),d.check([a],o,!1,function(t,n){e.world.shake(),e.world.alienDestroyed(),e.world.rockDestroyed(n)},function(t,n){u.default.debug&&e.bounds.push(n)}),d.check(c,o,!1,function(t,n){e.world.shake(),e.world.rockDestroyed(n)},function(t,n){u.default.debug&&e.bounds.push(n)})}},e}(o.EventSource);e.GameMode=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=n(7),r=function(){function t(t){this.score=t,this.blink=0,this.showPushStart=!0,this.highscore=o.highscores.top.score}return t.prototype.update=function(t){this.blink+=t,this.blink>=.4&&(this.blink=0,this.showPushStart=!this.showPushStart)},t.prototype.render=function(){this.drawBackground(),this.drawPushStart(),this.drawHighScores()},t.prototype.drawBackground=function(){i.default.draw.background(),i.default.draw.scorePlayer1(this.score),i.default.draw.oneCoinOnePlay(),i.default.draw.highscore(this.highscore),i.default.draw.copyright()},t.prototype.drawHighScores=function(){var t=i.default.width/2,e=Math.ceil(i.default.height/4.5)+(i.default.font.xlarge+i.default.font.small),n=i.default.font.medium+i.default.font.small;i.default.draw.text2("high scores",i.default.font.large,function(e){return{x:t-e/2,y:i.default.height/4.5}});for(var r=this,s=0;s<o.highscores.scores.length;s++)!function(s){var a=e+s*n,u=r.pad(s+1," ",2)+"."+r.pad(o.highscores.scores[s].score," ",6)+" "+o.highscores.scores[s].initials;i.default.draw.text2(u,i.default.font.large,function(e){return{x:t-e/2,y:a}})}(s)},t.prototype.drawPushStart=function(){this.showPushStart&&i.default.draw.pushStart()},t.prototype.pad=function(t,e,n){for(t=t.toString();t.length<n;)t=e+t;return t},t}();e.HighScoreMode=r},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=n(8),s=n(7),a=n(5),u="_abcdefghijklmnopqrstuvwxyz",c=function(t){function e(e){var n=t.call(this)||this;return n.index=1,n.score=e,n.init(),n}return i(e,t),e.prototype.init=function(){this.position=0,this.index=1,this.initials=["a","_","_"]},e.prototype.update=function(t){r.Key.isPressed(r.Key.ROTATE_LEFT)&&(this.index--,this.index<0&&(this.index=u.length-1),this.initials[this.position]=u[this.index]),r.Key.isPressed(r.Key.ROTATE_RIGHT)&&(this.index++,this.index>u.length-1&&(this.index=0),this.initials[this.position]=u[this.index]),r.Key.isPressed(r.Key.HYPERSPACE)&&(this.position++,this.position>=3&&(s.highscores.save(this.score,this.initials.join("").replace("_"," ")),this.init(),this.trigger("done")),this.index=1,this.initials[this.position]=u[this.index])},e.prototype.render=function(){var t=o.default.height/4.5,e=function(e){return o.default.draw.text(e,50,t+=o.default.font.large+5,o.default.font.large)};o.default.draw.background(),o.default.draw.highscore(s.highscores.top.score),o.default.draw.scorePlayer1(this.score),o.default.draw.copyright(),e("your score is one of the ten best"),e("please enter your initials"),e("push rotate to select letter"),e("push hyperspace when letter is correct"),o.default.draw.text3(this.initials.join(""),o.default.font.xlarge,function(t){return{x:o.default.width2-t/2,y:o.default.height/2+o.default.font.xlarge}})},e}(a.EventSource);e.InitialsMode=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,o=function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()},r=0,s=o(),a=function(t){var e=function(){for(i=o(),r+=Math.min(1,(i-s)/1e3);r>1/60;)t.update(1/60),r-=1/60;t.render(r),s=i,requestAnimationFrame(e)};e()};e.loop=function(t){a(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(12),o=n(21),r=n(23),s=n(30),a=n(24),u=n(28),c=n(29),l=n(3),h=n(1),d=n(0),f=n(4),p=function(){function t(t){this.level=7,this.extraLifeScore=0,this.score=0,this.lives=3,this.shipBullets=[],this.alienBullets=[],this.shockwaves=[],this.rocks=[],this.scenery=[],this.shipTimer=0,this.alienTimer=0,this.levelTimer=0,this.gameOverTimer=0,this.shakeTimer=0,this.powerupTimer=0,this.dramticPauseTimer=0,this.gameOver=!1,this.started=!1,this.highscore=t}return Object.defineProperty(t.prototype,"objects",{get:function(){return[this.ship,this.alien,this.powerup].concat(this.shipBullets,this.alienBullets,this.rocks,this.shockwaves,this.scenery)},enumerable:!0,configurable:!0}),t.prototype.update=function(t){if(this.dramticPauseTimer>0)return void this.dramticPauseTimer--;this.shakeTimer>0&&(this.shakeTimer-=t),this.powerup||(this.powerupTimer+=t),this.objects.forEach(function(e){e&&e.update(t)})},t.prototype.render=function(t){this.shakeTimer>0&&d.default.preShake(),this.objects.forEach(function(e){e&&e.render(t)}),this.shakeTimer>0&&d.default.postShake()},t.prototype.startLevel=function(){this.level++,this.levelTimer=0,this.powerupTimer=0,this.alienTimer||(this.alienTimer=h.random(10,15)),this.scenery.length=0,this.shipBullets.forEach(function(t){return t.destroy()}),this.addRocks()},t.prototype.addRocks=function(){for(var t=Math.min(this.level+3,10),e=0;e<t;e++){var n=h.random(1,4),i=l.Vector.fromAngle(h.random(1,360)),o=void 0,r=void 0;switch(n){case 1:o=h.random(20,d.default.width-20),r=h.random(20,40);break;case 2:o=h.random(d.default.width-40,d.default.width-20),r=h.random(d.default.height-20,d.default.height-20);break;case 3:o=h.random(20,d.default.width-20),r=h.random(d.default.height-20,d.default.height-20);break;default:o=h.random(20,40),r=h.random(d.default.height-20,d.default.height-20)}var s=new u.Rock(o,r,i,u.RockSize.Large,150);this.rocks.push(s)}},t.prototype.addShip=function(t,e){var n=this;this.ship=new i.Ship(t,e),this.ship.on("fire",function(t,e){e.on("expired",function(){n.shipBullets=n.shipBullets.filter(function(t){return t!==e})}),n.shipBullets.push(e)}),this.ship.on("expired",function(){n.lives--,n.ship=null,n.shipBullets.length=0})},t.prototype.createExplosion=function(t,e,n){var i=this;if(void 0===e&&(e=100),void 0===n&&(n=1),t){var o=new r.Explosion(t.origin.x,t.origin.y,e);this.addScenery(o);var a=new s.Shockwave(t.origin.x,t.origin.y,t.velocity,e,n);return a.on("expired",function(){i.shockwaves=i.shockwaves.filter(function(t){return t!==a})}),this.shockwaves.push(a),{explosion:o,shockwave:a}}},t.prototype.shipDestroyed=function(){this.ship&&(f.largeExplosion.play(),this.createExplosion(this.ship),this.addFlash(5),this.ship.destroy())},t.prototype.alienDestroyed=function(){this.alien&&(this.addFlash(5),this.createExplosion(this.alien),this.alien.destroy())},t.prototype.addFlash=function(t){var e=new a.Flash(t);this.addScenery(e)},t.prototype.addScenery=function(t){var e=this;t.on("expired",function(){e.scenery=e.scenery.filter(function(e){return e!==t})}),this.scenery.push(t)},t.prototype.rockDestroyed=function(t,e){void 0===e&&(e=1);var n=this.createExplosion(t,5*t.size,e),i=t.split();this.rocks=this.rocks.filter(function(e){return e!==t}),(o=this.rocks).push.apply(o,i),this.shockwaves.forEach(function(e){e.rocks=e.rocks.filter(function(e){return e!==t})}),n.shockwave.rocks=i,t=null;var o},t.prototype.addAlien=function(){var t=this,e=Math.min(this.level,14),n=!1,i=f.largeAlien;if(this.score>=4e4)n=!0;else switch(e){case 7:n=this.levelTimer>60&&2===h.random(1,3);break;case 8:n=this.levelTimer>30&&h.random(1,10)%2==0;break;default:n=h.random(1,10)<=e+2}n?(i=f.smallAlien,this.alien=new o.SmallAlien(this.ship)):this.alien=new o.BigAlien,i.play(),this.alien.on("expired",function(){f.alienFire.stop(),i.stop(),f.largeExplosion.play(),t.alien=null,t.alienBullets.forEach(function(t){return t.destroy()}),t.alienBullets.length=0}),this.alien.on("fire",function(e,n){f.alienFire.play(),n.on("expired",function(){t.alienBullets=t.alienBullets.filter(function(t){return t!==n})}),t.alienBullets.push(n)})},t.prototype.addScore=function(t){this.score+=t.score,this.extraLifeScore+=t.score,this.score>this.highscore&&(this.highscore=this.score),this.extraLifeScore>=1e4&&(this.lives++,this.extraLifeScore-=1e4,f.extraLife.play());var e=new c.ScoreMarker(t,"+"+t.score);this.addScenery(e)},t.prototype.addPowerup=function(){f.getPowerup.play()},t.prototype.shake=function(){this.shakeTimer<=0&&(this.shakeTimer=.5)},t.prototype.tryPlaceShip=function(t){if(this.shipTimer+=t,!(this.shipTimer<=2)){var e=d.default.shipRect,n=!1;this.rocks.forEach(function(t){n=n||t.collided(e)}),this.alien&&(n=n||this.alien.collided(e)),n||(this.shipTimer=0,this.addShip(d.default.width2,d.default.height2))}},t.prototype.updateAlienTimer=function(t){Math.min(this.level,7);this.alien||(this.alienTimer-=t,this.alienTimer<=0&&(this.addAlien(),this.alienTimer=h.random(10,15)))},t.prototype.shouldTryToPlaceShip=function(){return!!this.shipTimer||!this.ship&&!!this.lives},t.prototype.shouldCheckForNextLevel=function(){return!this.rocks.length&&!!this.lives},t.prototype.shouldCheckCollisions=function(){return!!this.ship||!!this.shipBullets.length},t}();e.World=p},function(t,e,n){var i;!function(o,r,s,a){"use strict";function u(t,e,n){return setTimeout(f(t,n),e)}function c(t,e,n){return!!Array.isArray(t)&&(l(t,n[e],n),!0)}function l(t,e,n){var i;if(t)if(t.forEach)t.forEach(e,n);else if(t.length!==a)for(i=0;i<t.length;)e.call(n,t[i],i,t),i++;else for(i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i,t)}function h(t,e,n){var i="DEPRECATED METHOD: "+e+"\n"+n+" AT \n";return function(){var e=new Error("get-stack-trace"),n=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",r=o.console&&(o.console.warn||o.console.log);return r&&r.call(o.console,i,n),t.apply(this,arguments)}}function d(t,e,n){var i,o=e.prototype;i=t.prototype=Object.create(o),i.constructor=t,i._super=o,n&&pt(i,n)}function f(t,e){return function(){return t.apply(e,arguments)}}function p(t,e){return typeof t==yt?t.apply(e?e[0]||a:a,e):t}function _(t,e){return t===a?e:t}function v(t,e,n){l(w(e),function(e){t.addEventListener(e,n,!1)})}function y(t,e,n){l(w(e),function(e){t.removeEventListener(e,n,!1)})}function m(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function g(t,e){return t.indexOf(e)>-1}function w(t){return t.trim().split(/\s+/g)}function b(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var i=0;i<t.length;){if(n&&t[i][n]==e||!n&&t[i]===e)return i;i++}return-1}function x(t){return Array.prototype.slice.call(t,0)}function T(t,e,n){for(var i=[],o=[],r=0;r<t.length;){var s=e?t[r][e]:t[r];b(o,s)<0&&i.push(t[r]),o[r]=s,r++}return n&&(i=e?i.sort(function(t,n){return t[e]>n[e]}):i.sort()),i}function S(t,e){for(var n,i,o=e[0].toUpperCase()+e.slice(1),r=0;r<_t.length;){if(n=_t[r],(i=n?n+o:e)in t)return i;r++}return a}function A(){return Tt++}function P(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||o}function k(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){p(t.options.enable,[t])&&n.handler(e)},this.init()}function O(t){var e=t.options.inputClass;return new(e?e:Pt?z:kt?Y:At?V:N)(t,E)}function E(t,e,n){var i=n.pointers.length,o=n.changedPointers.length,r=e&Et&&i-o==0,s=e&(It|jt)&&i-o==0;n.isFirst=!!r,n.isFinal=!!s,r&&(t.session={}),n.eventType=e,M(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function M(t,e){var n=t.session,i=e.pointers,o=i.length;n.firstInput||(n.firstInput=D(e)),o>1&&!n.firstMultiple?n.firstMultiple=D(e):1===o&&(n.firstMultiple=!1);var r=n.firstInput,s=n.firstMultiple,a=s?s.center:r.center,u=e.center=R(i);e.timeStamp=wt(),e.deltaTime=e.timeStamp-r.timeStamp,e.angle=L(a,u),e.distance=F(a,u),I(n,e),e.offsetDirection=C(e.deltaX,e.deltaY);var c=B(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=c.x,e.overallVelocityY=c.y,e.overallVelocity=gt(c.x)>gt(c.y)?c.x:c.y,e.scale=s?G(s.pointers,i):1,e.rotation=s?H(s.pointers,i):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,j(n,e);var l=t.element;m(e.srcEvent.target,l)&&(l=e.srcEvent.target),e.target=l}function I(t,e){var n=e.center,i=t.offsetDelta||{},o=t.prevDelta||{},r=t.prevInput||{};e.eventType!==Et&&r.eventType!==It||(o=t.prevDelta={x:r.deltaX||0,y:r.deltaY||0},i=t.offsetDelta={x:n.x,y:n.y}),e.deltaX=o.x+(n.x-i.x),e.deltaY=o.y+(n.y-i.y)}function j(t,e){var n,i,o,r,s=t.lastInterval||e,u=e.timeStamp-s.timeStamp;if(e.eventType!=jt&&(u>Ot||s.velocity===a)){var c=e.deltaX-s.deltaX,l=e.deltaY-s.deltaY,h=B(u,c,l);i=h.x,o=h.y,n=gt(h.x)>gt(h.y)?h.x:h.y,r=C(c,l),t.lastInterval=e}else n=s.velocity,i=s.velocityX,o=s.velocityY,r=s.direction;e.velocity=n,e.velocityX=i,e.velocityY=o,e.direction=r}function D(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:mt(t.pointers[n].clientX),clientY:mt(t.pointers[n].clientY)},n++;return{timeStamp:wt(),pointers:e,center:R(e),deltaX:t.deltaX,deltaY:t.deltaY}}function R(t){var e=t.length;if(1===e)return{x:mt(t[0].clientX),y:mt(t[0].clientY)};for(var n=0,i=0,o=0;o<e;)n+=t[o].clientX,i+=t[o].clientY,o++;return{x:mt(n/e),y:mt(i/e)}}function B(t,e,n){return{x:e/t||0,y:n/t||0}}function C(t,e){return t===e?Dt:gt(t)>=gt(e)?t<0?Rt:Bt:e<0?Ct:Ft}function F(t,e,n){n||(n=Nt);var i=e[n[0]]-t[n[0]],o=e[n[1]]-t[n[1]];return Math.sqrt(i*i+o*o)}function L(t,e,n){n||(n=Nt);var i=e[n[0]]-t[n[0]],o=e[n[1]]-t[n[1]];return 180*Math.atan2(o,i)/Math.PI}function H(t,e){return L(e[1],e[0],zt)+L(t[1],t[0],zt)}function G(t,e){return F(e[0],e[1],zt)/F(t[0],t[1],zt)}function N(){this.evEl=Kt,this.evWin=Yt,this.pressed=!1,k.apply(this,arguments)}function z(){this.evEl=Xt,this.evWin=Ut,k.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function q(){this.evTarget=Qt,this.evWin=Zt,this.started=!1,k.apply(this,arguments)}function K(t,e){var n=x(t.touches),i=x(t.changedTouches);return e&(It|jt)&&(n=T(n.concat(i),"identifier",!0)),[n,i]}function Y(){this.evTarget=te,this.targetIds={},k.apply(this,arguments)}function W(t,e){var n=x(t.touches),i=this.targetIds;if(e&(Et|Mt)&&1===n.length)return i[n[0].identifier]=!0,[n,n];var o,r,s=x(t.changedTouches),a=[],u=this.target;if(r=n.filter(function(t){return m(t.target,u)}),e===Et)for(o=0;o<r.length;)i[r[o].identifier]=!0,o++;for(o=0;o<s.length;)i[s[o].identifier]&&a.push(s[o]),e&(It|jt)&&delete i[s[o].identifier],o++;return a.length?[T(r.concat(a),"identifier",!0),a]:void 0}function V(){k.apply(this,arguments);var t=f(this.handler,this);this.touch=new Y(this.manager,t),this.mouse=new N(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function X(t,e){t&Et?(this.primaryTouch=e.changedPointers[0].identifier,U.call(this,e)):t&(It|jt)&&U.call(this,e)}function U(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY};this.lastTouches.push(n);var i=this.lastTouches,o=function(){var t=i.indexOf(n);t>-1&&i.splice(t,1)};setTimeout(o,ee)}}function $(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,i=0;i<this.lastTouches.length;i++){var o=this.lastTouches[i],r=Math.abs(e-o.x),s=Math.abs(n-o.y);if(r<=ne&&s<=ne)return!0}return!1}function Q(t,e){this.manager=t,this.set(e)}function Z(t){if(g(t,ae))return ae;var e=g(t,ue),n=g(t,ce);return e&&n?ae:e||n?e?ue:ce:g(t,se)?se:re}function J(t){this.options=pt({},this.defaults,t||{}),this.id=A(),this.manager=null,this.options.enable=_(this.options.enable,!0),this.state=he,this.simultaneous={},this.requireFail=[]}function tt(t){return t&ve?"cancel":t&pe?"end":t&fe?"move":t&de?"start":""}function et(t){return t==Ft?"down":t==Ct?"up":t==Rt?"left":t==Bt?"right":""}function nt(t,e){var n=e.manager;return n?n.get(t):t}function it(){J.apply(this,arguments)}function ot(){it.apply(this,arguments),this.pX=null,this.pY=null}function rt(){it.apply(this,arguments)}function st(){J.apply(this,arguments),this._timer=null,this._input=null}function at(){it.apply(this,arguments)}function ut(){it.apply(this,arguments)}function ct(){J.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function lt(t,e){return e=e||{},e.recognizers=_(e.recognizers,lt.defaults.preset),new ht(t,e)}function ht(t,e){this.options=pt({},lt.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=O(this),this.touchAction=new Q(this,this.options.touchAction),dt(this,!0),l(this.options.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function dt(t,e){var n=t.element;if(n.style){var i;l(t.options.cssProps,function(o,r){i=S(n.style,r),e?(t.oldCssProps[i]=n.style[i],n.style[i]=o):n.style[i]=t.oldCssProps[i]||""}),e||(t.oldCssProps={})}}function ft(t,e){var n=r.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e,e.target.dispatchEvent(n)}var pt,_t=["","webkit","Moz","MS","ms","o"],vt=r.createElement("div"),yt="function",mt=Math.round,gt=Math.abs,wt=Date.now;pt="function"!=typeof Object.assign?function(t){if(t===a||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var i=arguments[n];if(i!==a&&null!==i)for(var o in i)i.hasOwnProperty(o)&&(e[o]=i[o])}return e}:Object.assign;var bt=h(function(t,e,n){for(var i=Object.keys(e),o=0;o<i.length;)(!n||n&&t[i[o]]===a)&&(t[i[o]]=e[i[o]]),o++;return t},"extend","Use `assign`."),xt=h(function(t,e){return bt(t,e,!0)},"merge","Use `assign`."),Tt=1,St=/mobile|tablet|ip(ad|hone|od)|android/i,At="ontouchstart"in o,Pt=S(o,"PointerEvent")!==a,kt=At&&St.test(navigator.userAgent),Ot=25,Et=1,Mt=2,It=4,jt=8,Dt=1,Rt=2,Bt=4,Ct=8,Ft=16,Lt=Rt|Bt,Ht=Ct|Ft,Gt=Lt|Ht,Nt=["x","y"],zt=["clientX","clientY"];k.prototype={handler:function(){},init:function(){this.evEl&&v(this.element,this.evEl,this.domHandler),this.evTarget&&v(this.target,this.evTarget,this.domHandler),this.evWin&&v(P(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&y(this.element,this.evEl,this.domHandler),this.evTarget&&y(this.target,this.evTarget,this.domHandler),this.evWin&&y(P(this.element),this.evWin,this.domHandler)}};var qt={mousedown:Et,mousemove:Mt,mouseup:It},Kt="mousedown",Yt="mousemove mouseup";d(N,k,{handler:function(t){var e=qt[t.type];e&Et&&0===t.button&&(this.pressed=!0),e&Mt&&1!==t.which&&(e=It),this.pressed&&(e&It&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}});var Wt={pointerdown:Et,pointermove:Mt,pointerup:It,pointercancel:jt,pointerout:jt},Vt={2:"touch",3:"pen",4:"mouse",5:"kinect"},Xt="pointerdown",Ut="pointermove pointerup pointercancel";o.MSPointerEvent&&!o.PointerEvent&&(Xt="MSPointerDown",Ut="MSPointerMove MSPointerUp MSPointerCancel"),d(z,k,{handler:function(t){var e=this.store,n=!1,i=t.type.toLowerCase().replace("ms",""),o=Wt[i],r=Vt[t.pointerType]||t.pointerType,s="touch"==r,a=b(e,t.pointerId,"pointerId");o&Et&&(0===t.button||s)?a<0&&(e.push(t),a=e.length-1):o&(It|jt)&&(n=!0),a<0||(e[a]=t,this.callback(this.manager,o,{pointers:e,changedPointers:[t],pointerType:r,srcEvent:t}),n&&e.splice(a,1))}});var $t={touchstart:Et,touchmove:Mt,touchend:It,touchcancel:jt},Qt="touchstart",Zt="touchstart touchmove touchend touchcancel";d(q,k,{handler:function(t){var e=$t[t.type];if(e===Et&&(this.started=!0),this.started){var n=K.call(this,t,e);e&(It|jt)&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:t})}}});var Jt={touchstart:Et,touchmove:Mt,touchend:It,touchcancel:jt},te="touchstart touchmove touchend touchcancel";d(Y,k,{handler:function(t){var e=Jt[t.type],n=W.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:t})}});var ee=2500,ne=25;d(V,k,{handler:function(t,e,n){var i="touch"==n.pointerType,o="mouse"==n.pointerType;if(!(o&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(i)X.call(this,e,n);else if(o&&$.call(this,n))return;this.callback(t,e,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var ie=S(vt.style,"touchAction"),oe=ie!==a,re="auto",se="manipulation",ae="none",ue="pan-x",ce="pan-y",le=function(){if(!oe)return!1;var t={},e=o.CSS&&o.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(n){t[n]=!e||o.CSS.supports("touch-action",n)}),t}();Q.prototype={set:function(t){"compute"==t&&(t=this.compute()),oe&&this.manager.element.style&&le[t]&&(this.manager.element.style[ie]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return l(this.manager.recognizers,function(e){p(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),Z(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)return void e.preventDefault();var i=this.actions,o=g(i,ae)&&!le[ae],r=g(i,ce)&&!le[ce],s=g(i,ue)&&!le[ue];if(o){var a=1===t.pointers.length,u=t.distance<2,c=t.deltaTime<250;if(a&&u&&c)return}return s&&r?void 0:o||r&&n&Lt||s&&n&Ht?this.preventSrc(e):void 0},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var he=1,de=2,fe=4,pe=8,_e=pe,ve=16;J.prototype={defaults:{},set:function(t){return pt(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(c(t,"recognizeWith",this))return this;var e=this.simultaneous;return t=nt(t,this),e[t.id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return c(t,"dropRecognizeWith",this)?this:(t=nt(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(c(t,"requireFailure",this))return this;var e=this.requireFail;return t=nt(t,this),b(e,t)===-1&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(c(t,"dropRequireFailure",this))return this;t=nt(t,this);var e=b(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){function e(e){n.manager.emit(e,t)}var n=this,i=this.state;i<pe&&e(n.options.event+tt(i)),e(n.options.event),t.additionalEvent&&e(t.additionalEvent),i>=pe&&e(n.options.event+tt(i))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=32},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(32|he)))return!1;t++}return!0},recognize:function(t){var e=pt({},t);if(!p(this.options.enable,[this,e]))return this.reset(),void(this.state=32);this.state&(_e|ve|32)&&(this.state=he),this.state=this.process(e),this.state&(de|fe|pe|ve)&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},d(it,J,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,i=e&(de|fe),o=this.attrTest(t);return i&&(n&jt||!o)?e|ve:i||o?n&It?e|pe:e&de?e|fe:de:32}}),d(ot,it,{defaults:{event:"pan",threshold:10,pointers:1,direction:Gt},getTouchAction:function(){var t=this.options.direction,e=[];return t&Lt&&e.push(ce),t&Ht&&e.push(ue),e},directionTest:function(t){var e=this.options,n=!0,i=t.distance,o=t.direction,r=t.deltaX,s=t.deltaY;return o&e.direction||(e.direction&Lt?(o=0===r?Dt:r<0?Rt:Bt,n=r!=this.pX,i=Math.abs(t.deltaX)):(o=0===s?Dt:s<0?Ct:Ft,n=s!=this.pY,i=Math.abs(t.deltaY))),t.direction=o,n&&i>e.threshold&&o&e.direction},attrTest:function(t){return it.prototype.attrTest.call(this,t)&&(this.state&de||!(this.state&de)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=et(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),d(rt,it,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[ae]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&de)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),d(st,J,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[re]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,i=t.distance<e.threshold,o=t.deltaTime>e.time;if(this._input=t,!i||!n||t.eventType&(It|jt)&&!o)this.reset();else if(t.eventType&Et)this.reset(),this._timer=u(function(){this.state=_e,this.tryEmit()},e.time,this);else if(t.eventType&It)return _e;return 32},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===_e&&(t&&t.eventType&It?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=wt(),this.manager.emit(this.options.event,this._input)))}}),d(at,it,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[ae]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&de)}}),d(ut,it,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Lt|Ht,pointers:1},getTouchAction:function(){return ot.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return n&(Lt|Ht)?e=t.overallVelocity:n&Lt?e=t.overallVelocityX:n&Ht&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&gt(e)>this.options.velocity&&t.eventType&It},emit:function(t){var e=et(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),d(ct,J,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[se]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,i=t.distance<e.threshold,o=t.deltaTime<e.time;if(this.reset(),t.eventType&Et&&0===this.count)return this.failTimeout();if(i&&o&&n){if(t.eventType!=It)return this.failTimeout();var r=!this.pTime||t.timeStamp-this.pTime<e.interval,s=!this.pCenter||F(this.pCenter,t.center)<e.posThreshold;this.pTime=t.timeStamp,this.pCenter=t.center,s&&r?this.count+=1:this.count=1,this._input=t;if(0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=u(function(){this.state=_e,this.tryEmit()},e.interval,this),de):_e}return 32},failTimeout:function(){return this._timer=u(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==_e&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),lt.VERSION="2.0.7",lt.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[at,{enable:!1}],[rt,{enable:!1},["rotate"]],[ut,{direction:Lt}],[ot,{direction:Lt},["swipe"]],[ct],[ct,{event:"doubletap",taps:2},["tap"]],[st]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};ht.prototype={set:function(t){return pt(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){this.touchAction.preventDefaults(t);var n,i=this.recognizers,o=e.curRecognizer;(!o||o&&o.state&_e)&&(o=e.curRecognizer=null);for(var r=0;r<i.length;)n=i[r],2===e.stopped||o&&n!=o&&!n.canRecognizeWith(o)?n.reset():n.recognize(t),!o&&n.state&(de|fe|pe)&&(o=e.curRecognizer=n),r++}},get:function(t){if(t instanceof J)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(c(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(c(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,n=b(e,t);n!==-1&&(e.splice(n,1),this.touchAction.update())}return this},on:function(t,e){if(t!==a&&e!==a){var n=this.handlers;return l(w(t),function(t){n[t]=n[t]||[],n[t].push(e)}),this}},off:function(t,e){if(t!==a){var n=this.handlers;return l(w(t),function(t){e?n[t]&&n[t].splice(b(n[t],e),1):delete n[t]}),this}},emit:function(t,e){this.options.domEvents&&ft(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var i=0;i<n.length;)n[i](e),i++}},destroy:function(){this.element&&dt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},pt(lt,{INPUT_START:Et,INPUT_MOVE:Mt,INPUT_END:It,INPUT_CANCEL:jt,STATE_POSSIBLE:he,STATE_BEGAN:de,STATE_CHANGED:fe,STATE_ENDED:pe,STATE_RECOGNIZED:_e,STATE_CANCELLED:ve,STATE_FAILED:32,DIRECTION_NONE:Dt,DIRECTION_LEFT:Rt,DIRECTION_RIGHT:Bt,DIRECTION_UP:Ct,DIRECTION_DOWN:Ft,DIRECTION_HORIZONTAL:Lt,DIRECTION_VERTICAL:Ht,DIRECTION_ALL:Gt,Manager:ht,Input:k,TouchAction:Q,TouchInput:Y,MouseInput:N,PointerEventInput:z,TouchMouseInput:V,SingleTouchInput:q,Recognizer:J,AttrRecognizer:it,Tap:ct,Pan:ot,Swipe:ut,Pinch:rt,Rotate:at,Press:st,on:v,off:y,each:l,merge:xt,extend:bt,assign:pt,inherit:d,bindFn:f,prefixed:S}),(void 0!==o?o:"undefined"!=typeof self?self:{}).Hammer=lt,(i=function(){return lt}.call(e,n,e,t))!==a&&(t.exports=i)}(window,document)},function(t,e,n){(function(n){var i,o;!function(){"use strict";var r=function(){this.init()};r.prototype={init:function(){var t=this||s;return t._counter=0,t._codecs={},t._howls=[],t._muted=!1,t._volume=1,t._canPlayEvent="canplaythrough",t._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,t.masterGain=null,t.noAudio=!1,t.usingWebAudio=!0,t.autoSuspend=!0,t.ctx=null,t.mobileAutoEnable=!0,t._setup(),t},volume:function(t){var e=this||s;if(t=parseFloat(t),e.ctx||p(),void 0!==t&&t>=0&&t<=1){if(e._volume=t,e._muted)return e;e.usingWebAudio&&(e.masterGain.gain.value=t);for(var n=0;n<e._howls.length;n++)if(!e._howls[n]._webAudio)for(var i=e._howls[n]._getSoundIds(),o=0;o<i.length;o++){var r=e._howls[n]._soundById(i[o]);r&&r._node&&(r._node.volume=r._volume*t)}return e}return e._volume},mute:function(t){var e=this||s;e.ctx||p(),e._muted=t,e.usingWebAudio&&(e.masterGain.gain.value=t?0:e._volume);for(var n=0;n<e._howls.length;n++)if(!e._howls[n]._webAudio)for(var i=e._howls[n]._getSoundIds(),o=0;o<i.length;o++){var r=e._howls[n]._soundById(i[o]);r&&r._node&&(r._node.muted=!!t||r._muted)}return e},unload:function(){for(var t=this||s,e=t._howls.length-1;e>=0;e--)t._howls[e].unload();return t.usingWebAudio&&t.ctx&&void 0!==t.ctx.close&&(t.ctx.close(),t.ctx=null,p()),t},codecs:function(t){return(this||s)._codecs[t.replace(/^x-/,"")]},_setup:function(){var t=this||s;if(t.state=t.ctx?t.ctx.state||"running":"running",t._autoSuspend(),!t.usingWebAudio)if("undefined"!=typeof Audio)try{var e=new Audio;void 0===e.oncanplaythrough&&(t._canPlayEvent="canplay")}catch(e){t.noAudio=!0}else t.noAudio=!0;try{var e=new Audio;e.muted&&(t.noAudio=!0)}catch(t){}return t.noAudio||t._setupCodecs(),t},_setupCodecs:function(){var t=this||s,e=null;try{e="undefined"!=typeof Audio?new Audio:null}catch(e){return t}if(!e||"function"!=typeof e.canPlayType)return t;var n=e.canPlayType("audio/mpeg;").replace(/^no$/,""),i=t._navigator&&t._navigator.userAgent.match(/OPR\/([0-6].)/g),o=i&&parseInt(i[0].split("/")[1],10)<33;return t._codecs={mp3:!(o||!n&&!e.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!n,opus:!!e.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!e.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!e.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(e.canPlayType("audio/x-mp4;")||e.canPlayType("audio/mp4;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!e.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(e.canPlayType("audio/x-flac;")||e.canPlayType("audio/flac;")).replace(/^no$/,"")},t},_enableMobileAudio:function(){var t=this||s,e=/iPhone|iPad|iPod|Android|BlackBerry|BB10|Silk|Mobi/i.test(t._navigator&&t._navigator.userAgent),n=!!("ontouchend"in window||t._navigator&&t._navigator.maxTouchPoints>0||t._navigator&&t._navigator.msMaxTouchPoints>0);if(!t._mobileEnabled&&t.ctx&&(e||n)){t._mobileEnabled=!1,t._mobileUnloaded||44100===t.ctx.sampleRate||(t._mobileUnloaded=!0,t.unload()),t._scratchBuffer=t.ctx.createBuffer(1,1,22050);var i=function(){var e=t.ctx.createBufferSource();e.buffer=t._scratchBuffer,e.connect(t.ctx.destination),void 0===e.start?e.noteOn(0):e.start(0),e.onended=function(){e.disconnect(0),t._mobileEnabled=!0,t.mobileAutoEnable=!1,document.removeEventListener("touchend",i,!0)}};return document.addEventListener("touchend",i,!0),t}},_autoSuspend:function(){var t=this;if(t.autoSuspend&&t.ctx&&void 0!==t.ctx.suspend&&s.usingWebAudio){for(var e=0;e<t._howls.length;e++)if(t._howls[e]._webAudio)for(var n=0;n<t._howls[e]._sounds.length;n++)if(!t._howls[e]._sounds[n]._paused)return t;return t._suspendTimer&&clearTimeout(t._suspendTimer),t._suspendTimer=setTimeout(function(){t.autoSuspend&&(t._suspendTimer=null,t.state="suspending",t.ctx.suspend().then(function(){t.state="suspended",t._resumeAfterSuspend&&(delete t._resumeAfterSuspend,t._autoResume())}))},3e4),t}},_autoResume:function(){var t=this;if(t.ctx&&void 0!==t.ctx.resume&&s.usingWebAudio)return"running"===t.state&&t._suspendTimer?(clearTimeout(t._suspendTimer),t._suspendTimer=null):"suspended"===t.state?(t.state="resuming",t.ctx.resume().then(function(){t.state="running";for(var e=0;e<t._howls.length;e++)t._howls[e]._emit("resume")}),t._suspendTimer&&(clearTimeout(t._suspendTimer),t._suspendTimer=null)):"suspending"===t.state&&(t._resumeAfterSuspend=!0),t}};var s=new r,a=function(t){var e=this;if(!t.src||0===t.src.length)return void console.error("An array of source files must be passed with any new Howl.");e.init(t)};a.prototype={init:function(t){var e=this;return s.ctx||p(),e._autoplay=t.autoplay||!1,e._format="string"!=typeof t.format?t.format:[t.format],e._html5=t.html5||!1,e._muted=t.mute||!1,e._loop=t.loop||!1,e._pool=t.pool||5,e._preload="boolean"!=typeof t.preload||t.preload,e._rate=t.rate||1,e._sprite=t.sprite||{},e._src="string"!=typeof t.src?t.src:[t.src],e._volume=void 0!==t.volume?t.volume:1,e._duration=0,e._state="unloaded",e._sounds=[],e._endTimers={},e._queue=[],e._onend=t.onend?[{fn:t.onend}]:[],e._onfade=t.onfade?[{fn:t.onfade}]:[],e._onload=t.onload?[{fn:t.onload}]:[],e._onloaderror=t.onloaderror?[{fn:t.onloaderror}]:[],e._onpause=t.onpause?[{fn:t.onpause}]:[],e._onplay=t.onplay?[{fn:t.onplay}]:[],e._onstop=t.onstop?[{fn:t.onstop}]:[],e._onmute=t.onmute?[{fn:t.onmute}]:[],e._onvolume=t.onvolume?[{fn:t.onvolume}]:[],e._onrate=t.onrate?[{fn:t.onrate}]:[],e._onseek=t.onseek?[{fn:t.onseek}]:[],e._onresume=[],e._webAudio=s.usingWebAudio&&!e._html5,void 0!==s.ctx&&s.ctx&&s.mobileAutoEnable&&s._enableMobileAudio(),s._howls.push(e),e._autoplay&&e._queue.push({event:"play",action:function(){e.play()}}),e._preload&&e.load(),e},load:function(){var t=this,e=null;if(s.noAudio)return void t._emit("loaderror",null,"No audio support.");"string"==typeof t._src&&(t._src=[t._src]);for(var n=0;n<t._src.length;n++){var i,o;if(t._format&&t._format[n])i=t._format[n];else{if("string"!=typeof(o=t._src[n])){t._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}i=/^data:audio\/([^;,]+);/i.exec(o),i||(i=/\.([^.]+)$/.exec(o.split("?",1)[0])),i&&(i=i[1].toLowerCase())}if(i||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),i&&s.codecs(i)){e=t._src[n];break}}return e?(t._src=e,t._state="loading","https:"===window.location.protocol&&"http:"===e.slice(0,5)&&(t._html5=!0,t._webAudio=!1),new u(t),t._webAudio&&l(t),t):void t._emit("loaderror",null,"No codec support for selected audio sources.")},play:function(t,e){var n=this,i=null;if("number"==typeof t)i=t,t=null;else{if("string"==typeof t&&"loaded"===n._state&&!n._sprite[t])return null;if(void 0===t){t="__default";for(var o=0,r=0;r<n._sounds.length;r++)n._sounds[r]._paused&&!n._sounds[r]._ended&&(o++,i=n._sounds[r]._id);1===o?t=null:i=null}}var a=i?n._soundById(i):n._inactiveSound();if(!a)return null;if(i&&!t&&(t=a._sprite||"__default"),"loaded"!==n._state&&!n._sprite[t])return n._queue.push({event:"play",action:function(){n.play(n._soundById(a._id)?a._id:void 0)}}),a._id;if(i&&!a._paused)return e||setTimeout(function(){n._emit("play",a._id)},0),a._id;n._webAudio&&s._autoResume();var u=Math.max(0,a._seek>0?a._seek:n._sprite[t][0]/1e3),c=Math.max(0,(n._sprite[t][0]+n._sprite[t][1])/1e3-u),l=1e3*c/Math.abs(a._rate);a._paused=!1,a._ended=!1,a._sprite=t,a._seek=u,a._start=n._sprite[t][0]/1e3,a._stop=(n._sprite[t][0]+n._sprite[t][1])/1e3,a._loop=!(!a._loop&&!n._sprite[t][2]);var h=a._node;if(n._webAudio){var d=function(){n._refreshBuffer(a);var t=a._muted||n._muted?0:a._volume;h.gain.setValueAtTime(t,s.ctx.currentTime),a._playStart=s.ctx.currentTime,void 0===h.bufferSource.start?a._loop?h.bufferSource.noteGrainOn(0,u,86400):h.bufferSource.noteGrainOn(0,u,c):a._loop?h.bufferSource.start(0,u,86400):h.bufferSource.start(0,u,c),l!==1/0&&(n._endTimers[a._id]=setTimeout(n._ended.bind(n,a),l)),e||setTimeout(function(){n._emit("play",a._id)},0)},f="running"===s.state;if("loaded"===n._state&&f)d();else{var p=f||"loaded"!==n._state?"load":"resume";n.once(p,d,f?a._id:null),n._clearTimer(a._id)}}else{var _=function(){h.currentTime=u,h.muted=a._muted||n._muted||s._muted||h.muted,h.volume=a._volume*s.volume(),h.playbackRate=a._rate,h.play(),l!==1/0&&(n._endTimers[a._id]=setTimeout(n._ended.bind(n,a),l)),e||n._emit("play",a._id)},v="loaded"===n._state&&(window&&window.ejecta||!h.readyState&&s._navigator.isCocoonJS);if(4===h.readyState||v)_();else{var y=function(){_(),h.removeEventListener(s._canPlayEvent,y,!1)};h.addEventListener(s._canPlayEvent,y,!1),n._clearTimer(a._id)}}return a._id},pause:function(t){var e=this;if("loaded"!==e._state)return e._queue.push({event:"pause",action:function(){e.pause(t)}}),e;for(var n=e._getSoundIds(t),i=0;i<n.length;i++){e._clearTimer(n[i]);var o=e._soundById(n[i]);if(o&&!o._paused&&(o._seek=e.seek(n[i]),o._rateSeek=0,o._paused=!0,e._stopFade(n[i]),o._node))if(e._webAudio){if(!o._node.bufferSource)return e;void 0===o._node.bufferSource.stop?o._node.bufferSource.noteOff(0):o._node.bufferSource.stop(0),e._cleanBuffer(o._node)}else isNaN(o._node.duration)&&o._node.duration!==1/0||o._node.pause();arguments[1]||e._emit("pause",o?o._id:null)}return e},stop:function(t,e){var n=this;if("loaded"!==n._state)return n._queue.push({event:"stop",action:function(){n.stop(t)}}),n;for(var i=n._getSoundIds(t),o=0;o<i.length;o++){n._clearTimer(i[o]);var r=n._soundById(i[o]);if(r&&(r._seek=r._start||0,r._rateSeek=0,r._paused=!0,r._ended=!0,n._stopFade(i[o]),r._node))if(n._webAudio){if(!r._node.bufferSource)return e||n._emit("stop",r._id),n;void 0===r._node.bufferSource.stop?r._node.bufferSource.noteOff(0):r._node.bufferSource.stop(0),n._cleanBuffer(r._node)}else isNaN(r._node.duration)&&r._node.duration!==1/0||(r._node.currentTime=r._start||0,r._node.pause());r&&!e&&n._emit("stop",r._id)}return n},mute:function(t,e){var n=this;if("loaded"!==n._state)return n._queue.push({event:"mute",action:function(){n.mute(t,e)}}),n;if(void 0===e){if("boolean"!=typeof t)return n._muted;n._muted=t}for(var i=n._getSoundIds(e),o=0;o<i.length;o++){var r=n._soundById(i[o]);r&&(r._muted=t,n._webAudio&&r._node?r._node.gain.setValueAtTime(t?0:r._volume,s.ctx.currentTime):r._node&&(r._node.muted=!!s._muted||t),n._emit("mute",r._id))}return n},volume:function(){var t,e,n=this,i=arguments;if(0===i.length)return n._volume;if(1===i.length||2===i.length&&void 0===i[1]){n._getSoundIds().indexOf(i[0])>=0?e=parseInt(i[0],10):t=parseFloat(i[0])}else i.length>=2&&(t=parseFloat(i[0]),e=parseInt(i[1],10));var o;if(!(void 0!==t&&t>=0&&t<=1))return o=e?n._soundById(e):n._sounds[0],o?o._volume:0;if("loaded"!==n._state)return n._queue.push({event:"volume",action:function(){n.volume.apply(n,i)}}),n;void 0===e&&(n._volume=t),e=n._getSoundIds(e);for(var r=0;r<e.length;r++)(o=n._soundById(e[r]))&&(o._volume=t,i[2]||n._stopFade(e[r]),n._webAudio&&o._node&&!o._muted?o._node.gain.setValueAtTime(t,s.ctx.currentTime):o._node&&!o._muted&&(o._node.volume=t*s.volume()),n._emit("volume",o._id));return n},fade:function(t,e,n,i){var o=this,r=Math.abs(t-e),a=t>e?"out":"in",u=r/.01,c=u>0?n/u:n;if(c<4&&(u=Math.ceil(u/(4/c)),c=4),"loaded"!==o._state)return o._queue.push({event:"fade",action:function(){o.fade(t,e,n,i)}}),o;o.volume(t,i);for(var l=o._getSoundIds(i),h=0;h<l.length;h++){var d=o._soundById(l[h]);if(d){if(i||o._stopFade(l[h]),o._webAudio&&!d._muted){var f=s.ctx.currentTime,p=f+n/1e3;d._volume=t,d._node.gain.setValueAtTime(t,f),d._node.gain.linearRampToValueAtTime(e,p)}var _=t;d._interval=setInterval(function(n,r){u>0&&(_+="in"===a?.01:-.01),_=Math.max(0,_),_=Math.min(1,_),_=Math.round(100*_)/100,o._webAudio?(void 0===i&&(o._volume=_),r._volume=_):o.volume(_,n,!0),(e<t&&_<=e||e>t&&_>=e)&&(clearInterval(r._interval),r._interval=null,o.volume(e,n),o._emit("fade",n))}.bind(o,l[h],d),c)}}return o},_stopFade:function(t){var e=this,n=e._soundById(t);return n&&n._interval&&(e._webAudio&&n._node.gain.cancelScheduledValues(s.ctx.currentTime),clearInterval(n._interval),n._interval=null,e._emit("fade",t)),e},loop:function(){var t,e,n,i=this,o=arguments;if(0===o.length)return i._loop;if(1===o.length){if("boolean"!=typeof o[0])return!!(n=i._soundById(parseInt(o[0],10)))&&n._loop;t=o[0],i._loop=t}else 2===o.length&&(t=o[0],e=parseInt(o[1],10));for(var r=i._getSoundIds(e),s=0;s<r.length;s++)(n=i._soundById(r[s]))&&(n._loop=t,i._webAudio&&n._node&&n._node.bufferSource&&(n._node.bufferSource.loop=t,t&&(n._node.bufferSource.loopStart=n._start||0,n._node.bufferSource.loopEnd=n._stop)));return i},rate:function(){var t,e,n=this,i=arguments;if(0===i.length)e=n._sounds[0]._id;else if(1===i.length){var o=n._getSoundIds(),r=o.indexOf(i[0]);r>=0?e=parseInt(i[0],10):t=parseFloat(i[0])}else 2===i.length&&(t=parseFloat(i[0]),e=parseInt(i[1],10));var a;if("number"!=typeof t)return a=n._soundById(e),a?a._rate:n._rate;if("loaded"!==n._state)return n._queue.push({event:"rate",action:function(){n.rate.apply(n,i)}}),n;void 0===e&&(n._rate=t),e=n._getSoundIds(e);for(var u=0;u<e.length;u++)if(a=n._soundById(e[u])){a._rateSeek=n.seek(e[u]),a._playStart=n._webAudio?s.ctx.currentTime:a._playStart,a._rate=t,n._webAudio&&a._node&&a._node.bufferSource?a._node.bufferSource.playbackRate.value=t:a._node&&(a._node.playbackRate=t);var c=n.seek(e[u]),l=(n._sprite[a._sprite][0]+n._sprite[a._sprite][1])/1e3-c,h=1e3*l/Math.abs(a._rate);!n._endTimers[e[u]]&&a._paused||(n._clearTimer(e[u]),n._endTimers[e[u]]=setTimeout(n._ended.bind(n,a),h)),n._emit("rate",a._id)}return n},seek:function(){var t,e,n=this,i=arguments;if(0===i.length)e=n._sounds[0]._id;else if(1===i.length){var o=n._getSoundIds(),r=o.indexOf(i[0]);r>=0?e=parseInt(i[0],10):(e=n._sounds[0]._id,t=parseFloat(i[0]))}else 2===i.length&&(t=parseFloat(i[0]),e=parseInt(i[1],10));if(void 0===e)return n;if("loaded"!==n._state)return n._queue.push({event:"seek",action:function(){n.seek.apply(n,i)}}),n;var a=n._soundById(e);if(a){if(!("number"==typeof t&&t>=0)){if(n._webAudio){var u=n.playing(e)?s.ctx.currentTime-a._playStart:0,c=a._rateSeek?a._rateSeek-a._seek:0;return a._seek+(c+u*Math.abs(a._rate))}return a._node.currentTime}var l=n.playing(e);l&&n.pause(e,!0),a._seek=t,a._ended=!1,n._clearTimer(e),l&&n.play(e,!0),!n._webAudio&&a._node&&(a._node.currentTime=t),n._emit("seek",e)}return n},playing:function(t){var e=this;if("number"==typeof t){var n=e._soundById(t);return!!n&&!n._paused}for(var i=0;i<e._sounds.length;i++)if(!e._sounds[i]._paused)return!0;return!1},duration:function(t){var e=this,n=e._duration,i=e._soundById(t);return i&&(n=e._sprite[i._sprite][1]/1e3),n},state:function(){return this._state},unload:function(){for(var t=this,e=t._sounds,n=0;n<e.length;n++){e[n]._paused||t.stop(e[n]._id),t._webAudio||(e[n]._node.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA",e[n]._node.removeEventListener("error",e[n]._errorFn,!1),e[n]._node.removeEventListener(s._canPlayEvent,e[n]._loadFn,!1)),delete e[n]._node,t._clearTimer(e[n]._id);var i=s._howls.indexOf(t);i>=0&&s._howls.splice(i,1)}var o=!0;for(n=0;n<s._howls.length;n++)if(s._howls[n]._src===t._src){o=!1;break}return c&&o&&delete c[t._src],s.noAudio=!1,t._state="unloaded",t._sounds=[],t=null,null},on:function(t,e,n,i){var o=this,r=o["_on"+t];return"function"==typeof e&&r.push(i?{id:n,fn:e,once:i}:{id:n,fn:e}),o},off:function(t,e,n){var i=this,o=i["_on"+t],r=0;if(e){for(r=0;r<o.length;r++)if(e===o[r].fn&&n===o[r].id){o.splice(r,1);break}}else if(t)i["_on"+t]=[];else{var s=Object.keys(i);for(r=0;r<s.length;r++)0===s[r].indexOf("_on")&&Array.isArray(i[s[r]])&&(i[s[r]]=[])}return i},once:function(t,e,n){var i=this;return i.on(t,e,n,1),i},_emit:function(t,e,n){for(var i=this,o=i["_on"+t],r=o.length-1;r>=0;r--)o[r].id&&o[r].id!==e&&"load"!==t||(setTimeout(function(t){t.call(this,e,n)}.bind(i,o[r].fn),0),o[r].once&&i.off(t,o[r].fn,o[r].id));return i},_loadQueue:function(){var t=this;if(t._queue.length>0){var e=t._queue[0];t.once(e.event,function(){t._queue.shift(),t._loadQueue()}),e.action()}return t},_ended:function(t){var e=this,n=t._sprite,i=!(!t._loop&&!e._sprite[n][2]);if(e._emit("end",t._id),!e._webAudio&&i&&e.stop(t._id,!0).play(t._id),e._webAudio&&i){e._emit("play",t._id),t._seek=t._start||0,t._rateSeek=0,t._playStart=s.ctx.currentTime;var o=1e3*(t._stop-t._start)/Math.abs(t._rate);e._endTimers[t._id]=setTimeout(e._ended.bind(e,t),o)}return e._webAudio&&!i&&(t._paused=!0,t._ended=!0,t._seek=t._start||0,t._rateSeek=0,e._clearTimer(t._id),e._cleanBuffer(t._node),s._autoSuspend()),e._webAudio||i||e.stop(t._id),e},_clearTimer:function(t){var e=this;return e._endTimers[t]&&(clearTimeout(e._endTimers[t]),delete e._endTimers[t]),e},_soundById:function(t){for(var e=this,n=0;n<e._sounds.length;n++)if(t===e._sounds[n]._id)return e._sounds[n];return null},_inactiveSound:function(){var t=this;t._drain();for(var e=0;e<t._sounds.length;e++)if(t._sounds[e]._ended)return t._sounds[e].reset();return new u(t)},_drain:function(){var t=this,e=t._pool,n=0,i=0;if(!(t._sounds.length<e)){for(i=0;i<t._sounds.length;i++)t._sounds[i]._ended&&n++;for(i=t._sounds.length-1;i>=0;i--){if(n<=e)return;t._sounds[i]._ended&&(t._webAudio&&t._sounds[i]._node&&t._sounds[i]._node.disconnect(0),t._sounds.splice(i,1),n--)}}},_getSoundIds:function(t){var e=this;if(void 0===t){for(var n=[],i=0;i<e._sounds.length;i++)n.push(e._sounds[i]._id);return n}return[t]},_refreshBuffer:function(t){var e=this;return t._node.bufferSource=s.ctx.createBufferSource(),t._node.bufferSource.buffer=c[e._src],t._panner?t._node.bufferSource.connect(t._panner):t._node.bufferSource.connect(t._node),t._node.bufferSource.loop=t._loop,t._loop&&(t._node.bufferSource.loopStart=t._start||0,t._node.bufferSource.loopEnd=t._stop),t._node.bufferSource.playbackRate.value=t._rate,e},_cleanBuffer:function(t){var e=this;if(e._scratchBuffer){t.bufferSource.onended=null,t.bufferSource.disconnect(0);try{t.bufferSource.buffer=e._scratchBuffer}catch(t){}}return t.bufferSource=null,e}};var u=function(t){this._parent=t,this.init()};u.prototype={init:function(){var t=this,e=t._parent;return t._muted=e._muted,t._loop=e._loop,t._volume=e._volume,t._muted=e._muted,t._rate=e._rate,t._seek=0,t._paused=!0,t._ended=!0,t._sprite="__default",t._id=++s._counter,e._sounds.push(t),t.create(),t},create:function(){var t=this,e=t._parent,n=s._muted||t._muted||t._parent._muted?0:t._volume;return e._webAudio?(t._node=void 0===s.ctx.createGain?s.ctx.createGainNode():s.ctx.createGain(),t._node.gain.setValueAtTime(n,s.ctx.currentTime),t._node.paused=!0,t._node.connect(s.masterGain)):(t._node=new Audio,t._errorFn=t._errorListener.bind(t),t._node.addEventListener("error",t._errorFn,!1),t._loadFn=t._loadListener.bind(t),t._node.addEventListener(s._canPlayEvent,t._loadFn,!1),t._node.src=e._src,t._node.preload="auto",t._node.volume=n*s.volume(),t._node.load()),t},reset:function(){var t=this,e=t._parent;return t._muted=e._muted,t._loop=e._loop,t._volume=e._volume,t._muted=e._muted,t._rate=e._rate,t._seek=0,t._rateSeek=0,t._paused=!0,t._ended=!0,t._sprite="__default",t._id=++s._counter,t},_errorListener:function(){var t=this;t._parent._emit("loaderror",t._id,t._node.error?t._node.error.code:0),t._node.removeEventListener("error",t._errorListener,!1)},_loadListener:function(){var t=this,e=t._parent;e._duration=Math.ceil(10*t._node.duration)/10,0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue()),t._node.removeEventListener(s._canPlayEvent,t._loadFn,!1)}};var c={},l=function(t){var e=t._src;if(c[e])return t._duration=c[e].duration,void f(t);if(/^data:[^;]+;base64,/.test(e)){for(var n=atob(e.split(",")[1]),i=new Uint8Array(n.length),o=0;o<n.length;++o)i[o]=n.charCodeAt(o);d(i.buffer,t)}else{var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(){var e=(r.status+"")[0];if("0"!==e&&"2"!==e&&"3"!==e)return void t._emit("loaderror",null,"Failed loading audio file with status: "+r.status+".");d(r.response,t)},r.onerror=function(){t._webAudio&&(t._html5=!0,t._webAudio=!1,t._sounds=[],delete c[e],t.load())},h(r)}},h=function(t){try{t.send()}catch(e){t.onerror()}},d=function(t,e){s.ctx.decodeAudioData(t,function(t){t&&e._sounds.length>0&&(c[e._src]=t,f(e,t))},function(){e._emit("loaderror",null,"Decoding audio data failed.")})},f=function(t,e){e&&!t._duration&&(t._duration=e.duration),0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue())},p=function(){try{"undefined"!=typeof AudioContext?s.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?s.ctx=new webkitAudioContext:s.usingWebAudio=!1}catch(t){s.usingWebAudio=!1}var t=/iP(hone|od|ad)/.test(s._navigator&&s._navigator.platform),e=s._navigator&&s._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),n=e?parseInt(e[1],10):null;if(t&&n&&n<9){var i=/safari/.test(s._navigator&&s._navigator.userAgent.toLowerCase());(s._navigator&&s._navigator.standalone&&!i||s._navigator&&!s._navigator.standalone&&!i)&&(s.usingWebAudio=!1)}s.usingWebAudio&&(s.masterGain=void 0===s.ctx.createGain?s.ctx.createGainNode():s.ctx.createGain(),s.masterGain.gain.value=1,s.masterGain.connect(s.ctx.destination)),s._setup()};i=[],void 0!==(o=function(){return{Howler:s,Howl:a}}.apply(e,i))&&(t.exports=o),e.Howler=s,e.Howl=a,"undefined"!=typeof window?(window.HowlerGlobal=r,window.Howler=s,window.Howl=a,window.Sound=u):void 0!==n&&(n.HowlerGlobal=r,n.Howler=s,n.Howl=a,n.Sound=u)}(),function(){"use strict";HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){var e=this;if(!e.ctx||!e.ctx.listener)return e;for(var n=e._howls.length-1;n>=0;n--)e._howls[n].stereo(t);return e},HowlerGlobal.prototype.pos=function(t,e,n){var i=this;return i.ctx&&i.ctx.listener?(e="number"!=typeof e?i._pos[1]:e,n="number"!=typeof n?i._pos[2]:n,"number"!=typeof t?i._pos:(i._pos=[t,e,n],i.ctx.listener.setPosition(i._pos[0],i._pos[1],i._pos[2]),i)):i},HowlerGlobal.prototype.orientation=function(t,e,n,i,o,r){var s=this;if(!s.ctx||!s.ctx.listener)return s;var a=s._orientation;return e="number"!=typeof e?a[1]:e,n="number"!=typeof n?a[2]:n,i="number"!=typeof i?a[3]:i,o="number"!=typeof o?a[4]:o,r="number"!=typeof r?a[5]:r,"number"!=typeof t?a:(s._orientation=[t,e,n,i,o,r],s.ctx.listener.setOrientation(t,e,n,i,o,r),s)},Howl.prototype.init=function(t){return function(e){var n=this;return n._orientation=e.orientation||[1,0,0],n._stereo=e.stereo||null,n._pos=e.pos||null,n._pannerAttr={coneInnerAngle:void 0!==e.coneInnerAngle?e.coneInnerAngle:360,coneOuterAngle:void 0!==e.coneOuterAngle?e.coneOuterAngle:360,coneOuterGain:void 0!==e.coneOuterGain?e.coneOuterGain:0,distanceModel:void 0!==e.distanceModel?e.distanceModel:"inverse",maxDistance:void 0!==e.maxDistance?e.maxDistance:1e4,panningModel:void 0!==e.panningModel?e.panningModel:"HRTF",refDistance:void 0!==e.refDistance?e.refDistance:1,rolloffFactor:void 0!==e.rolloffFactor?e.rolloffFactor:1},n._onstereo=e.onstereo?[{fn:e.onstereo}]:[],n._onpos=e.onpos?[{fn:e.onpos}]:[],n._onorientation=e.onorientation?[{fn:e.onorientation}]:[],t.call(this,e)}}(Howl.prototype.init),Howl.prototype.stereo=function(e,n){var i=this;if(!i._webAudio)return i;if("loaded"!==i._state)return i._queue.push({event:"stereo",action:function(){i.stereo(e,n)}}),i;var o=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===n){if("number"!=typeof e)return i._stereo;i._stereo=e,i._pos=[e,0,0]}for(var r=i._getSoundIds(n),s=0;s<r.length;s++){var a=i._soundById(r[s]);if(a){if("number"!=typeof e)return a._stereo;a._stereo=e,a._pos=[e,0,0],a._node&&(a._pannerAttr.panningModel="equalpower",a._panner&&a._panner.pan||t(a,o),"spatial"===o?a._panner.setPosition(e,0,0):a._panner.pan.value=e),i._emit("stereo",a._id)}}return i},Howl.prototype.pos=function(e,n,i,o){var r=this;if(!r._webAudio)return r;if("loaded"!==r._state)return r._queue.push({event:"pos",action:function(){r.pos(e,n,i,o)}}),r;if(n="number"!=typeof n?0:n,i="number"!=typeof i?-.5:i,void 0===o){if("number"!=typeof e)return r._pos;r._pos=[e,n,i]}for(var s=r._getSoundIds(o),a=0;a<s.length;a++){var u=r._soundById(s[a]);if(u){if("number"!=typeof e)return u._pos;u._pos=[e,n,i],u._node&&(u._panner&&!u._panner.pan||t(u,"spatial"),u._panner.setPosition(e,n,i)),r._emit("pos",u._id)}}return r},Howl.prototype.orientation=function(e,n,i,o){var r=this;if(!r._webAudio)return r;if("loaded"!==r._state)return r._queue.push({event:"orientation",action:function(){r.orientation(e,n,i,o)}}),r;if(n="number"!=typeof n?r._orientation[1]:n,i="number"!=typeof i?r._orientation[2]:i,void 0===o){if("number"!=typeof e)return r._orientation;r._orientation=[e,n,i]}for(var s=r._getSoundIds(o),a=0;a<s.length;a++){var u=r._soundById(s[a]);if(u){if("number"!=typeof e)return u._orientation;u._orientation=[e,n,i],u._node&&(u._panner||(u._pos||(u._pos=r._pos||[0,0,-.5]),t(u,"spatial")),u._panner.setOrientation(e,n,i)),r._emit("orientation",u._id)}}return r},Howl.prototype.pannerAttr=function(){var e,n,i,o=this,r=arguments;if(!o._webAudio)return o;if(0===r.length)return o._pannerAttr;if(1===r.length){if("object"!=typeof r[0])return i=o._soundById(parseInt(r[0],10)),i?i._pannerAttr:o._pannerAttr;e=r[0],void 0===n&&(o._pannerAttr={coneInnerAngle:void 0!==e.coneInnerAngle?e.coneInnerAngle:o._coneInnerAngle,coneOuterAngle:void 0!==e.coneOuterAngle?e.coneOuterAngle:o._coneOuterAngle,coneOuterGain:void 0!==e.coneOuterGain?e.coneOuterGain:o._coneOuterGain,distanceModel:void 0!==e.distanceModel?e.distanceModel:o._distanceModel,maxDistance:void 0!==e.maxDistance?e.maxDistance:o._maxDistance,panningModel:void 0!==e.panningModel?e.panningModel:o._panningModel,refDistance:void 0!==e.refDistance?e.refDistance:o._refDistance,rolloffFactor:void 0!==e.rolloffFactor?e.rolloffFactor:o._rolloffFactor})}else 2===r.length&&(e=r[0],n=parseInt(r[1],10));for(var s=o._getSoundIds(n),a=0;a<s.length;a++)if(i=o._soundById(s[a])){var u=i._pannerAttr;u={coneInnerAngle:void 0!==e.coneInnerAngle?e.coneInnerAngle:u.coneInnerAngle,coneOuterAngle:void 0!==e.coneOuterAngle?e.coneOuterAngle:u.coneOuterAngle,coneOuterGain:void 0!==e.coneOuterGain?e.coneOuterGain:u.coneOuterGain,distanceModel:void 0!==e.distanceModel?e.distanceModel:u.distanceModel,maxDistance:void 0!==e.maxDistance?e.maxDistance:u.maxDistance,panningModel:void 0!==e.panningModel?e.panningModel:u.panningModel,refDistance:void 0!==e.refDistance?e.refDistance:u.refDistance,rolloffFactor:void 0!==e.rolloffFactor?e.rolloffFactor:u.rolloffFactor};var c=i._panner;c?(c.coneInnerAngle=u.coneInnerAngle,c.coneOuterAngle=u.coneOuterAngle,c.coneOuterGain=u.coneOuterGain,c.distanceModel=u.distanceModel,c.maxDistance=u.maxDistance,c.panningModel=u.panningModel,c.refDistance=u.refDistance,c.rolloffFactor=u.rolloffFactor):(i._pos||(i._pos=o._pos||[0,0,-.5]),t(i,"spatial"))}return o},Sound.prototype.init=function(t){return function(){var e=this,n=e._parent;e._orientation=n._orientation,e._stereo=n._stereo,e._pos=n._pos,e._pannerAttr=n._pannerAttr,t.call(this),e._stereo?n.stereo(e._stereo):e._pos&&n.pos(e._pos[0],e._pos[1],e._pos[2],e._id)}}(Sound.prototype.init),Sound.prototype.reset=function(t){return function(){var e=this,n=e._parent;return e._orientation=n._orientation,e._pos=n._pos,e._pannerAttr=n._pannerAttr,t.call(this)}}(Sound.prototype.reset);var t=function(t,e){e=e||"spatial","spatial"===e?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.panningModel=t._pannerAttr.panningModel,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.value=t._stereo),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id)}}()}).call(e,n(32))},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=n(1),s=n(2),a=n(9),u=n(3),c=600*o.default.objectScale,l=800*o.default.objectScale,h=225*o.default.objectScale,d=250*o.default.objectScale,f=function(t){function e(e){var n=t.call(this,0,0)||this;return n.moveTimer=0,n.moveTime=1,n.bulletTimer=0,n.bulletTime=.7,n.velocity.y=0,n.origin.y=r.random(100,o.default.height-100),n.origin.y%2==0?(n.origin.x=40,n.velocity.x=e):(n.origin.x=o.default.width-40,n.velocity.x=-e),n.points=[{x:.5,y:-2},{x:1,y:-1},{x:2.5,y:0},{x:1,y:1},{x:-1,y:1},{x:-2.5,y:0},{x:-1,y:-1},{x:-.5,y:-2}],n}return i(e,t),e.prototype.update=function(t){if(this.move(t),this.origin.x>=o.default.width-5||this.origin.x<=5)return void this.trigger("expired");if(this.moveTimer+=t,this.moveTimer>=1&&0!==this.velocity.y&&(this.velocity.y=0,this.moveTimer=0),this.moveTimer>=this.moveTime){r.random(1,20)%2==0&&(this.velocity.y=this.origin.x%2==0?this.velocity.x:-this.velocity.x),this.moveTimer=0}this.bulletTimer+=t,this.bulletTimer>=this.bulletTime&&(this.fire(),this.bulletTimer=0)},e.prototype.render=function(){this.draw()},e.prototype.draw=function(){t.prototype.draw.call(this),o.default.draw.vectorShape([this.points[1],this.points[6]],this.origin.x,this.origin.y),o.default.draw.vectorShape([this.points[2],this.points[5]],this.origin.x,this.origin.y)},e}(s.Object2D);e.Alien=f;var p=function(t){function e(){var e=t.call(this,h)||this;return e.score=200,e.scale(7),e}return i(e,t),e.prototype.fire=function(){var t=u.Vector.fromAngle(r.random(1,360),c),e=new a.Bullet(this.origin,t);this.trigger("fire",e)},e.prototype.destroy=function(){this.trigger("expired")},e}(f);e.BigAlien=p;var _=function(t){function e(e){var n=t.call(this,d)||this;return n.ship=e,n.score=1e3,n.bulletTime=1,n.scale(4),n}return i(e,t),e.prototype.fire=function(){var t;if(this.ship){var e=u.Vector.fromXY(this.ship.origin,this.origin,l);t=new a.Bullet(this.origin,e,2)}else{var e=u.Vector.fromAngle(r.random(1,360),l);t=new a.Bullet(this.origin,e,2)}this.trigger("fire",t)},e.prototype.destroy=function(){this.ship=null,this.trigger("expired")},e}(f);e.SmallAlien=_},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,o=n(17),r=n(8),s=n(18),a=n(4),u=n(7),c=n(15),l=n(16),h=n(13),d=n(14),f=n(6);!function(t){t[t.Attract=0]="Attract",t[t.Game=1]="Game",t[t.Initials=2]="Initials",t[t.Start=3]="Start"}(i||(i={}));var p=function(){function t(){this.lastScore=0,this.init()}return t.prototype.init=function(t){var e=this;a.Sound.stop(),a.Sound.off(),this.mode=i.Start,this.highScoreMode=new c.HighScoreMode(this.lastScore),this.attractMode=new h.AttractMode(t||new s.World(u.highscores.top.score)),this.gameMode=new d.GameMode(new s.World(u.highscores.top.score)),this.attractTimer=0,this.gameMode.on("done",function(t,n){e.lastScore=n.score,u.highscores.qualifies(n.score)?(e.initialsMode=new l.InitialsMode(n.score),e.initialsMode.on("done",function(){e.init(n)}),a.Sound.stop(),a.Sound.off(),e.mode=i.Initials):e.init(n)}),this.attractStarted=!1},t.prototype.update=function(t){if(r.Key.isPressed(r.Key.GOD)&&(f.default.god=!f.default.god),r.Key.isPressed(r.Key.DEBUG)&&(f.default.debug=!f.default.debug),r.Key.isPressed(r.Key.MONITOR_BURN)&&(f.default.burn=!f.default.burn),r.Key.isPressed(r.Key.PAUSE)&&(f.default.paused=!f.default.paused,f.default.paused?a.Sound.off():a.Sound.on()),!f.default.paused)switch(this.mode){case i.Start:this.highScoreMode.update(t),this.attractStarted&&this.attractMode.update(t),r.Key.isPressed(r.Key.PLAYER_ONE_START)?(a.Sound.on(),this.mode=i.Game):this.updateAttractTimer(t);break;case i.Attract:this.attractMode.update(t),r.Key.isPressed(r.Key.PLAYER_ONE_START)?(a.Sound.on(),this.mode=i.Game):this.updateAttractTimer(t);break;case i.Initials:this.initialsMode.update(t);break;case i.Game:this.gameMode.update(t)}},t.prototype.render=function(t){switch(this.mode){case i.Start:this.highScoreMode.render(t);break;case i.Attract:this.attractMode.render(t);break;case i.Initials:this.initialsMode.render(t);break;case i.Game:this.gameMode.render(t)}r.Key.update()},t.prototype.updateAttractTimer=function(t){this.attractTimer+=t,this.attractTimer>=15&&(this.attractTimer=0,this.mode=this.mode===i.Attract?i.Start:i.Attract)},t}();e.Asteroids=p;var _=new p;setTimeout(function(){o.loop(_)},1e3)},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(5),r=n(0),s=n(3),a=n(1),u=300*r.default.objectScale,c=function(t){function e(e,n,i){void 0===i&&(i=100);var o=t.call(this)||this;o.x=e,o.y=n,o.size=i,o.life=1,o.points=[];for(var r=0;r<15;r++){var c=s.Vector.fromAngle(a.random(1,360),Math.random()*u);o.points.push({x:e,y:n,vx:c.x,vy:c.y,alpha:Math.random()})}return o}return i(e,t),e.prototype.update=function(t){this.points.forEach(function(e){e.x+=e.vx*t,e.y+=e.vy*t,e.alpha-=.002}),this.life-=t,this.life<=.1&&this.trigger("expired")},e.prototype.render=function(t){this.points.forEach(function(t){a.random(1,10)%2==0&&r.default.draw.rect(t.x,t.y,2,2,"rgba(255,255,255,"+t.alpha+")")})},e}(o.EventSource);e.Explosion=c},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=n(5),s=function(t){function e(e){var n=t.call(this)||this;return n.frames=e,n}return i(e,t),e.prototype.render=function(){this.draw()},e.prototype.update=function(t){--this.frames<=0&&this.trigger("expired")},e.prototype.draw=function(){o.default.draw.background("#ffffff"),o.default.draw.scanlines()},e}(r.EventSource);e.Flash=s},function(t,e,n){"use strict";function i(t,e,n,i){return 8&n?[t[0]+(e[0]-t[0])*(i[3]-t[1])/(e[1]-t[1]),i[3]]:4&n?[t[0]+(e[0]-t[0])*(i[1]-t[1])/(e[1]-t[1]),i[1]]:2&n?[i[2],t[1]+(e[1]-t[1])*(i[2]-t[0])/(e[0]-t[0])]:1&n?[i[0],t[1]+(e[1]-t[1])*(i[0]-t[0])/(e[0]-t[0])]:null}function o(t,e){var n=0;return t[0]<e[0]?n|=1:t[0]>e[2]&&(n|=2),t[1]<e[1]?n|=4:t[1]>e[3]&&(n|=8),n}function r(t,e,n){var r,s,a,u,c,l=t.length,h=o(t[0],e),d=[];for(n||(n=[]),r=1;r<l;r++){for(s=t[r-1],a=t[r],u=c=o(a,e);;){if(!(h|u)){d.push(s),u!==c?(d.push(a),r<l-1&&(n.push(d),d=[])):r===l-1&&d.push(a);break}if(h&u)break;h?(s=i(s,a,h,e),h=o(s,e)):(a=i(s,a,u,e),u=o(a,e))}h=c}return d.length&&n.push(d),n}function s(t,e){var n,r,s,a,u,c,l;for(r=1;r<=8;r*=2){for(n=[],s=t[t.length-1],a=!(o(s,e)&r),u=0;u<t.length;u++)c=t[u],l=!(o(c,e)&r),l!==a&&n.push(i(s,c,r,e)),l&&n.push(c),s=c,a=l;if(t=n,!t.length)break}return n}Object.defineProperty(e,"__esModule",{value:!0}),e.lineclip=r,e.polygonclip=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={};e.RAD=i;var o={};e.COS=o;var r={};e.SIN=r;for(var s=Math.PI/180,a=0;a<=360;a++)i[a]=a*s,o[a]=Math.cos(i[a]),r[a]=Math.sin(i[a]),i[-a]=-a*s,o[-a]=Math.cos(i[-a]),r[-a]=Math.sin(i[-a])},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e,n,i){void 0===e&&(e=10),void 0===n&&(n=4),void 0===i&&(i=0),this.bounds=t,this.maxObjects=e,this.maxLevels=n,this.level=i,this.objects=[],this.nodes=[],this.width2=this.bounds.width/2,this.height2=this.bounds.height/2,this.xmid=this.bounds.x+this.width2,this.ymid=this.bounds.y+this.height2}return t.prototype.insert=function(t){var e=this;if(t){var n,i=0;if(this.nodes.length&&(n=this.getIndex(t),n.length))return void n.forEach(function(n){e.nodes[n].insert(t)});if(this.objects.push(t),this.objects.length>this.maxObjects&&this.level<this.maxLevels){this.nodes.length||this.split();for(var o=this;i<this.objects.length;)!function(){if(n=o.getIndex(o.objects[i]),n.length){var t=o.objects.splice(i,1)[0];n.forEach(function(n){e.nodes[n].insert(t)})}else i+=1}()}}},t.prototype.retrieve=function(t){var e=this;if(!t)return[];var n=this.getIndex(t),i=this.objects;if(this.nodes.length)if(n.length)n.forEach(function(n){i=i.concat(e.nodes[n].retrieve(t))});else for(var o=0;o<this.nodes.length;o++)i=i.concat(this.nodes[o].retrieve(t));return i.filter(function(t,e,n){return n.indexOf(t)===e})},t.prototype.clear=function(){this.objects=[];for(var t=0;t<this.nodes.length;t++)this.nodes[t]&&this.nodes[t].clear();this.nodes=[]},t.prototype.getIndex=function(t){if(!t)return[];var e=[],n=this,i=n.xmid,o=n.ymid,r=t.y<=o,s=t.y>o;if(t.x<=i)if(r){e.push(1);var a=!1;t.x+t.width>i&&(e.push(0),a=!0),t.y+t.height>o&&(e.push(2),a&&e.push(3))}else s&&(e.push(2),t.x+t.width>i&&e.push(3));else t.x>i&&(r?(e.push(0),t.y+t.height>o&&e.push(3)):e.push(3));return e},t.prototype.split=function(){var e=this,n=Math.round(this.width2),i=Math.round(this.height2),o=Math.round(this.bounds.x),r=Math.round(this.bounds.y),s=function(o,r){return new t({x:o,y:r,width:n,height:i},e.maxObjects,e.maxLevels,e.level+1)};this.nodes=[s(o+n,r),s(o,r),s(o,r+i),s(o+n,r+i)]},t}();e.Quadtree=i},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o,r=n(0),s=n(2),a=n(3),u=n(1),c=n(4);!function(t){t[t.Small=5]="Small",t[t.Medium=10]="Medium",t[t.Large=20]="Large"}(o=e.RockSize||(e.RockSize={}));var l=function(t){function e(e,n,i,o,s){void 0===s&&(s=1);var a=t.call(this,e,n)||this;a.rotTimer=0,a.rock1=[[.5,-2],[2,-1],[2,-.7],[1.2,0],[2,1],[1,2],[.5,1.5],[-1,2],[-2,.7],[-2,-1],[-.5,-1],[-1,-2]],a.rock2=[[0,-1.5],[1,-2],[2,-1],[1,-.5],[2,.5],[1,2],[-.5,1.5],[-1,2],[-2,1],[-1.5,0],[-2,-1],[-1,-2]],a.rock3=[[0,-1],[1,-2],[2,-1],[1.5,0],[2,1],[1,2],[-1,2],[-2,1],[-2,-1],[-1,-2]],a.rocks=[a.rock1,a.rock2,a.rock3];var c=s*r.default.objectScale;a.velocity.x=i.x*c,a.velocity.y=i.y*c;var l=u.random(0,2),h=a.rocks[l];return a.points=h.map(function(t){return{x:t[0]*o,y:t[1]*o}}),a.size=o,a.rotate(u.random(1,90)),a.rot=u.random(.01,1)%2==0?1:-1,a.timeToRot=u.random(1,5),a}return i(e,t),e.prototype.update=function(t){this.rotTimer+=1,this.move(t),this.rotTimer===this.timeToRot&&(this.rotate(this.rot),this.rotTimer=0)},e.prototype.render=function(){this.draw()},Object.defineProperty(e.prototype,"direction",{get:function(){var t=Math.atan2(this.velocity.y,this.velocity.x),e=t*(180/Math.PI);return e=e>0?e:360+e,Math.floor(e)},enumerable:!0,configurable:!0}),e.prototype.split=function(){var t;switch(this.size){case o.Large:t=c.largeExplosion;break;case o.Medium:t=c.mediumExplosion;break;case o.Small:t=c.smallExplosion}var n=u.randomFloat(.7,1);if(t.rate(n),t.play(),this.size>o.Small){var i=u.random(this.direction,this.direction+80),r=u.random(this.direction-80,this.direction);i<0&&(i+=360),i>360&&(i-=360),r<0&&(r+=360),r>360&&(r-=360);var s=this.size===o.Large?o.Medium:o.Small,l=a.Vector.fromAngle(i),h=a.Vector.fromAngle(r),d=s===o.Medium?u.random(150,250):u.random(250,350),f=s===o.Medium?u.random(150,250):u.random(250,350);return[new e(this.origin.x,this.origin.y,l,s,d),new e(this.origin.x,this.origin.y,h,s,f)]}return[]},Object.defineProperty(e.prototype,"score",{get:function(){return this.size===o.Large?20:this.size===o.Medium?50:100},enumerable:!0,configurable:!0}),e}(s.Object2D);e.Rock=l},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=n(11),s=n(2),a=function(t){function e(e,n){var i=t.call(this,e.origin.x,e.origin.y)||this;return i.text=n,i.life=1,i.velocity=e.velocity,i}return i(e,t),e.prototype.render=function(){this.draw()},e.prototype.update=function(t){this.move(t),this.life-=t,this.life<=0&&this.destroy()},e.prototype.draw=function(){o.default.draw.text(this.text,this.origin.x,this.origin.y,50*this.life,r.white(this.life))},e.prototype.destroy=function(){this.life=0,this.trigger("expired")},e}(s.Object2D);e.ScoreMarker=a},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=n(2),s=n(1),a=function(t){function e(e,n,i,o,r){void 0===r&&(r=1);var s=t.call(this,e,n)||this;return s.velocity=i,s.size=o,s.multiplier=r,s.life=1,s.frame=0,s.radius=1,s.rocks=[],s}return i(e,t),e.prototype.update=function(t){this.frame++,this.radius=this.size*(this.frame/10),this.life-=t,this.origin.x+=this.velocity.x*t,this.origin.y+=this.velocity.y*t,this.life<=.1&&(this.rocks.length=0,this.trigger("expired"))},e.prototype.render=function(t){if(1===this.frame){var e=this.size*s.random(25,55)/10,n=o.default.ctx;n.beginPath(),n.arc(this.origin.x,this.origin.y,e,0,2*Math.PI,!1),n.fillStyle="rgba(255, 255, 255, "+s.random(.2,.5)+")",n.fill(),n.stroke(),n.closePath(),o.default.draw.scanlines()}o.default.draw.circle(this.origin.x,this.origin.y,this.radius,"rgba(128,128,128,"+(.5-this.frame/100)+")")},Object.defineProperty(e.prototype,"x",{get:function(){return this.origin.x-this.radius},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.origin.y-this.radius},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return 2*this.radius},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return 2*this.radius},enumerable:!0,configurable:!0}),e}(r.Object2D);e.Shockwave=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(4),o=function(){function t(){this.lo=!0,this.reset()}return t.prototype.reset=function(){this.thumpBeatTimer=0,this.thumpBeat=1,this.thumpTimer=0,this.thumpTime=10,this.max=!1},t.prototype.update=function(t){this.thumpTimer+=t,this.thumpBeatTimer+=t,this.thumpBeat-=2e-4,this.thumpBeat<=.15&&(this.thumpBeat=.15),this.thumpBeatTimer>=this.thumpBeat&&(this.lo?i.thumpLo.play():i.thumpHi.play(),this.lo=!this.lo,this.thumpBeatTimer=0)},t}();e.Thumper=o},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n}]);