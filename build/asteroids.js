/*! For license information please see asteroids.js.LICENSE.txt */
(()=>{var t={840:(t,e,n)=>{var i;!function(o,r,s,a){"use strict";var u,l=["","webkit","Moz","MS","ms","o"],c=r.createElement("div"),d=Math.round,h=Math.abs,p=Date.now;function f(t,e,n){return setTimeout(x(t,n),e)}function _(t,e,n){return!!Array.isArray(t)&&(y(t,n[e],n),!0)}function y(t,e,n){var i;if(t)if(t.forEach)t.forEach(e,n);else if(t.length!==a)for(i=0;i<t.length;)e.call(n,t[i],i,t),i++;else for(i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i,t)}function v(t,e,n){var i="DEPRECATED METHOD: "+e+"\n"+n+" AT \n";return function(){var e=new Error("get-stack-trace"),n=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",r=o.console&&(o.console.warn||o.console.log);return r&&r.call(o.console,i,n),t.apply(this,arguments)}}u="function"!=typeof Object.assign?function(t){if(t===a||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var i=arguments[n];if(i!==a&&null!==i)for(var o in i)i.hasOwnProperty(o)&&(e[o]=i[o])}return e}:Object.assign;var m=v((function(t,e,n){for(var i=Object.keys(e),o=0;o<i.length;)(!n||n&&t[i[o]]===a)&&(t[i[o]]=e[i[o]]),o++;return t}),"extend","Use `assign`."),g=v((function(t,e){return m(t,e,!0)}),"merge","Use `assign`.");function w(t,e,n){var i,o=e.prototype;(i=t.prototype=Object.create(o)).constructor=t,i._super=o,n&&u(i,n)}function x(t,e){return function(){return t.apply(e,arguments)}}function b(t,e){return"function"==typeof t?t.apply(e&&e[0]||a,e):t}function T(t,e){return t===a?e:t}function A(t,e,n){y(P(e),(function(e){t.addEventListener(e,n,!1)}))}function S(t,e,n){y(P(e),(function(e){t.removeEventListener(e,n,!1)}))}function k(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function O(t,e){return t.indexOf(e)>-1}function P(t){return t.trim().split(/\s+/g)}function E(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var i=0;i<t.length;){if(n&&t[i][n]==e||!n&&t[i]===e)return i;i++}return-1}function M(t){return Array.prototype.slice.call(t,0)}function I(t,e,n){for(var i=[],o=[],r=0;r<t.length;){var s=e?t[r][e]:t[r];E(o,s)<0&&i.push(t[r]),o[r]=s,r++}return n&&(i=e?i.sort((function(t,n){return t[e]>n[e]})):i.sort()),i}function j(t,e){for(var n,i,o=e[0].toUpperCase()+e.slice(1),r=0;r<l.length;){if((i=(n=l[r])?n+o:e)in t)return i;r++}return a}var R=1;function D(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||o}var L="ontouchstart"in o,H=j(o,"PointerEvent")!==a,C=L&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),B="touch",F="mouse",G=["x","y"],V=["clientX","clientY"];function z(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){b(t.options.enable,[t])&&n.handler(e)},this.init()}function X(t,e,n){var i=n.pointers.length,o=n.changedPointers.length,r=1&e&&i-o==0,s=12&e&&i-o==0;n.isFirst=!!r,n.isFinal=!!s,r&&(t.session={}),n.eventType=e,function(t,e){var n=t.session,i=e.pointers,o=i.length;n.firstInput||(n.firstInput=K(e)),o>1&&!n.firstMultiple?n.firstMultiple=K(e):1===o&&(n.firstMultiple=!1);var r=n.firstInput,s=n.firstMultiple,u=s?s.center:r.center,l=e.center=N(i);e.timeStamp=p(),e.deltaTime=e.timeStamp-r.timeStamp,e.angle=U(u,l),e.distance=q(u,l),function(t,e){var n=e.center,i=t.offsetDelta||{},o=t.prevDelta||{},r=t.prevInput||{};1!==e.eventType&&4!==r.eventType||(o=t.prevDelta={x:r.deltaX||0,y:r.deltaY||0},i=t.offsetDelta={x:n.x,y:n.y}),e.deltaX=o.x+(n.x-i.x),e.deltaY=o.y+(n.y-i.y)}(n,e),e.offsetDirection=Y(e.deltaX,e.deltaY);var c,d,f=W(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=f.x,e.overallVelocityY=f.y,e.overallVelocity=h(f.x)>h(f.y)?f.x:f.y,e.scale=s?(c=s.pointers,q((d=i)[0],d[1],V)/q(c[0],c[1],V)):1,e.rotation=s?function(t,e){return U(e[1],e[0],V)+U(t[1],t[0],V)}(s.pointers,i):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,function(t,e){var n,i,o,r,s=t.lastInterval||e,u=e.timeStamp-s.timeStamp;if(8!=e.eventType&&(u>25||s.velocity===a)){var l=e.deltaX-s.deltaX,c=e.deltaY-s.deltaY,d=W(u,l,c);i=d.x,o=d.y,n=h(d.x)>h(d.y)?d.x:d.y,r=Y(l,c),t.lastInterval=e}else n=s.velocity,i=s.velocityX,o=s.velocityY,r=s.direction;e.velocity=n,e.velocityX=i,e.velocityY=o,e.direction=r}(n,e);var _=t.element;k(e.srcEvent.target,_)&&(_=e.srcEvent.target),e.target=_}(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function K(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:d(t.pointers[n].clientX),clientY:d(t.pointers[n].clientY)},n++;return{timeStamp:p(),pointers:e,center:N(e),deltaX:t.deltaX,deltaY:t.deltaY}}function N(t){var e=t.length;if(1===e)return{x:d(t[0].clientX),y:d(t[0].clientY)};for(var n=0,i=0,o=0;o<e;)n+=t[o].clientX,i+=t[o].clientY,o++;return{x:d(n/e),y:d(i/e)}}function W(t,e,n){return{x:e/t||0,y:n/t||0}}function Y(t,e){return t===e?1:h(t)>=h(e)?t<0?2:4:e<0?8:16}function q(t,e,n){n||(n=G);var i=e[n[0]]-t[n[0]],o=e[n[1]]-t[n[1]];return Math.sqrt(i*i+o*o)}function U(t,e,n){n||(n=G);var i=e[n[0]]-t[n[0]],o=e[n[1]]-t[n[1]];return 180*Math.atan2(o,i)/Math.PI}z.prototype={handler:function(){},init:function(){this.evEl&&A(this.element,this.evEl,this.domHandler),this.evTarget&&A(this.target,this.evTarget,this.domHandler),this.evWin&&A(D(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&S(this.element,this.evEl,this.domHandler),this.evTarget&&S(this.target,this.evTarget,this.domHandler),this.evWin&&S(D(this.element),this.evWin,this.domHandler)}};var $={mousedown:1,mousemove:2,mouseup:4},Q="mousedown",Z="mousemove mouseup";function J(){this.evEl=Q,this.evWin=Z,this.pressed=!1,z.apply(this,arguments)}w(J,z,{handler:function(t){var e=$[t.type];1&e&&0===t.button&&(this.pressed=!0),2&e&&1!==t.which&&(e=4),this.pressed&&(4&e&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:F,srcEvent:t}))}});var tt={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},et={2:B,3:"pen",4:F,5:"kinect"},nt="pointerdown",it="pointermove pointerup pointercancel";function ot(){this.evEl=nt,this.evWin=it,z.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}o.MSPointerEvent&&!o.PointerEvent&&(nt="MSPointerDown",it="MSPointerMove MSPointerUp MSPointerCancel"),w(ot,z,{handler:function(t){var e=this.store,n=!1,i=t.type.toLowerCase().replace("ms",""),o=tt[i],r=et[t.pointerType]||t.pointerType,s=r==B,a=E(e,t.pointerId,"pointerId");1&o&&(0===t.button||s)?a<0&&(e.push(t),a=e.length-1):12&o&&(n=!0),a<0||(e[a]=t,this.callback(this.manager,o,{pointers:e,changedPointers:[t],pointerType:r,srcEvent:t}),n&&e.splice(a,1))}});var rt={touchstart:1,touchmove:2,touchend:4,touchcancel:8},st="touchstart",at="touchstart touchmove touchend touchcancel";function ut(){this.evTarget=st,this.evWin=at,this.started=!1,z.apply(this,arguments)}function lt(t,e){var n=M(t.touches),i=M(t.changedTouches);return 12&e&&(n=I(n.concat(i),"identifier",!0)),[n,i]}w(ut,z,{handler:function(t){var e=rt[t.type];if(1===e&&(this.started=!0),this.started){var n=lt.call(this,t,e);12&e&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:B,srcEvent:t})}}});var ct={touchstart:1,touchmove:2,touchend:4,touchcancel:8},dt="touchstart touchmove touchend touchcancel";function ht(){this.evTarget=dt,this.targetIds={},z.apply(this,arguments)}function pt(t,e){var n=M(t.touches),i=this.targetIds;if(3&e&&1===n.length)return i[n[0].identifier]=!0,[n,n];var o,r,s=M(t.changedTouches),a=[],u=this.target;if(r=n.filter((function(t){return k(t.target,u)})),1===e)for(o=0;o<r.length;)i[r[o].identifier]=!0,o++;for(o=0;o<s.length;)i[s[o].identifier]&&a.push(s[o]),12&e&&delete i[s[o].identifier],o++;return a.length?[I(r.concat(a),"identifier",!0),a]:void 0}function ft(){z.apply(this,arguments);var t=x(this.handler,this);this.touch=new ht(this.manager,t),this.mouse=new J(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function _t(t,e){1&t?(this.primaryTouch=e.changedPointers[0].identifier,yt.call(this,e)):12&t&&yt.call(this,e)}function yt(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY};this.lastTouches.push(n);var i=this.lastTouches;setTimeout((function(){var t=i.indexOf(n);t>-1&&i.splice(t,1)}),2500)}}function vt(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,i=0;i<this.lastTouches.length;i++){var o=this.lastTouches[i],r=Math.abs(e-o.x),s=Math.abs(n-o.y);if(r<=25&&s<=25)return!0}return!1}w(ht,z,{handler:function(t){var e=ct[t.type],n=pt.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:B,srcEvent:t})}}),w(ft,z,{handler:function(t,e,n){var i=n.pointerType==B,o=n.pointerType==F;if(!(o&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(i)_t.call(this,e,n);else if(o&&vt.call(this,n))return;this.callback(t,e,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var mt=j(c.style,"touchAction"),gt=mt!==a,wt="compute",xt="auto",bt="manipulation",Tt="none",At="pan-x",St="pan-y",kt=function(){if(!gt)return!1;var t={},e=o.CSS&&o.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(n){t[n]=!e||o.CSS.supports("touch-action",n)})),t}();function Ot(t,e){this.manager=t,this.set(e)}Ot.prototype={set:function(t){t==wt&&(t=this.compute()),gt&&this.manager.element.style&&kt[t]&&(this.manager.element.style[mt]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return y(this.manager.recognizers,(function(e){b(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))})),function(t){if(O(t,Tt))return Tt;var e=O(t,At),n=O(t,St);return e&&n?Tt:e||n?e?At:St:O(t,bt)?bt:xt}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var i=this.actions,o=O(i,Tt)&&!kt[Tt],r=O(i,St)&&!kt[St],s=O(i,At)&&!kt[At];if(o){var a=1===t.pointers.length,u=t.distance<2,l=t.deltaTime<250;if(a&&u&&l)return}if(!s||!r)return o||r&&6&n||s&&24&n?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var Pt=32;function Et(t){this.options=u({},this.defaults,t||{}),this.id=R++,this.manager=null,this.options.enable=T(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function Mt(t){return 16&t?"cancel":8&t?"end":4&t?"move":2&t?"start":""}function It(t){return 16==t?"down":8==t?"up":2==t?"left":4==t?"right":""}function jt(t,e){var n=e.manager;return n?n.get(t):t}function Rt(){Et.apply(this,arguments)}function Dt(){Rt.apply(this,arguments),this.pX=null,this.pY=null}function Lt(){Rt.apply(this,arguments)}function Ht(){Et.apply(this,arguments),this._timer=null,this._input=null}function Ct(){Rt.apply(this,arguments)}function Bt(){Rt.apply(this,arguments)}function Ft(){Et.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Gt(t,e){return(e=e||{}).recognizers=T(e.recognizers,Gt.defaults.preset),new Vt(t,e)}function Vt(t,e){this.options=u({},Gt.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new(this.options.inputClass||(H?ot:C?ht:L?ft:J))(this,X),this.touchAction=new Ot(this,this.options.touchAction),zt(this,!0),y(this.options.recognizers,(function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])}),this)}function zt(t,e){var n,i=t.element;i.style&&(y(t.options.cssProps,(function(o,r){n=j(i.style,r),e?(t.oldCssProps[n]=i.style[n],i.style[n]=o):i.style[n]=t.oldCssProps[n]||""})),e||(t.oldCssProps={}))}Et.prototype={defaults:{},set:function(t){return u(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(_(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=jt(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return _(t,"dropRecognizeWith",this)||(t=jt(t,this),delete this.simultaneous[t.id]),this},requireFailure:function(t){if(_(t,"requireFailure",this))return this;var e=this.requireFail;return-1===E(e,t=jt(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(_(t,"dropRequireFailure",this))return this;t=jt(t,this);var e=E(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,n=this.state;function i(n){e.manager.emit(n,t)}n<8&&i(e.options.event+Mt(n)),i(e.options.event),t.additionalEvent&&i(t.additionalEvent),n>=8&&i(e.options.event+Mt(n))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=Pt},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(33&this.requireFail[t].state))return!1;t++}return!0},recognize:function(t){var e=u({},t);if(!b(this.options.enable,[this,e]))return this.reset(),void(this.state=Pt);56&this.state&&(this.state=1),this.state=this.process(e),30&this.state&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},w(Rt,Et,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,i=6&e,o=this.attrTest(t);return i&&(8&n||!o)?16|e:i||o?4&n?8|e:2&e?4|e:2:Pt}}),w(Dt,Rt,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var t=this.options.direction,e=[];return 6&t&&e.push(St),24&t&&e.push(At),e},directionTest:function(t){var e=this.options,n=!0,i=t.distance,o=t.direction,r=t.deltaX,s=t.deltaY;return o&e.direction||(6&e.direction?(o=0===r?1:r<0?2:4,n=r!=this.pX,i=Math.abs(t.deltaX)):(o=0===s?1:s<0?8:16,n=s!=this.pY,i=Math.abs(t.deltaY))),t.direction=o,n&&i>e.threshold&&o&e.direction},attrTest:function(t){return Rt.prototype.attrTest.call(this,t)&&(2&this.state||!(2&this.state)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=It(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),w(Lt,Rt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Tt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||2&this.state)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),w(Ht,Et,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[xt]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,i=t.distance<e.threshold,o=t.deltaTime>e.time;if(this._input=t,!i||!n||12&t.eventType&&!o)this.reset();else if(1&t.eventType)this.reset(),this._timer=f((function(){this.state=8,this.tryEmit()}),e.time,this);else if(4&t.eventType)return 8;return Pt},reset:function(){clearTimeout(this._timer)},emit:function(t){8===this.state&&(t&&4&t.eventType?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=p(),this.manager.emit(this.options.event,this._input)))}}),w(Ct,Rt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Tt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||2&this.state)}}),w(Bt,Rt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return Dt.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return 30&n?e=t.overallVelocity:6&n?e=t.overallVelocityX:24&n&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&h(e)>this.options.velocity&&4&t.eventType},emit:function(t){var e=It(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),w(Ft,Et,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[bt]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,i=t.distance<e.threshold,o=t.deltaTime<e.time;if(this.reset(),1&t.eventType&&0===this.count)return this.failTimeout();if(i&&o&&n){if(4!=t.eventType)return this.failTimeout();var r=!this.pTime||t.timeStamp-this.pTime<e.interval,s=!this.pCenter||q(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,s&&r?this.count+=1:this.count=1,this._input=t,0==this.count%e.taps)return this.hasRequireFailures()?(this._timer=f((function(){this.state=8,this.tryEmit()}),e.interval,this),2):8}return Pt},failTimeout:function(){return this._timer=f((function(){this.state=Pt}),this.options.interval,this),Pt},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Gt.VERSION="2.0.7",Gt.defaults={domEvents:!1,touchAction:wt,enable:!0,inputTarget:null,inputClass:null,preset:[[Ct,{enable:!1}],[Lt,{enable:!1},["rotate"]],[Bt,{direction:6}],[Dt,{direction:6},["swipe"]],[Ft],[Ft,{event:"doubletap",taps:2},["tap"]],[Ht]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},Vt.prototype={set:function(t){return u(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){var n;this.touchAction.preventDefaults(t);var i=this.recognizers,o=e.curRecognizer;(!o||o&&8&o.state)&&(o=e.curRecognizer=null);for(var r=0;r<i.length;)n=i[r],2===e.stopped||o&&n!=o&&!n.canRecognizeWith(o)?n.reset():n.recognize(t),!o&&14&n.state&&(o=e.curRecognizer=n),r++}},get:function(t){if(t instanceof Et)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(_(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(_(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,n=E(e,t);-1!==n&&(e.splice(n,1),this.touchAction.update())}return this},on:function(t,e){if(t!==a&&e!==a){var n=this.handlers;return y(P(t),(function(t){n[t]=n[t]||[],n[t].push(e)})),this}},off:function(t,e){if(t!==a){var n=this.handlers;return y(P(t),(function(t){e?n[t]&&n[t].splice(E(n[t],e),1):delete n[t]})),this}},emit:function(t,e){this.options.domEvents&&function(t,e){var n=r.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e,e.target.dispatchEvent(n)}(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var i=0;i<n.length;)n[i](e),i++}},destroy:function(){this.element&&zt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},u(Gt,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:Pt,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:24,DIRECTION_ALL:30,Manager:Vt,Input:z,TouchAction:Ot,TouchInput:ht,MouseInput:J,PointerEventInput:ot,TouchMouseInput:ft,SingleTouchInput:ut,Recognizer:Et,AttrRecognizer:Rt,Tap:Ft,Pan:Dt,Swipe:Bt,Pinch:Lt,Rotate:Ct,Press:Ht,on:A,off:S,each:y,merge:g,extend:m,assign:u,inherit:w,bindFn:x,prefixed:j}),(void 0!==o?o:"undefined"!=typeof self?self:{}).Hammer=Gt,(i=function(){return Gt}.call(e,n,e,t))===a||(t.exports=i)}(window,document)},766:(t,e,n)=>{var i;!function(){"use strict";var o=function(){this.init()};o.prototype={init:function(){var t=this||r;return t._counter=1e3,t._html5AudioPool=[],t.html5PoolSize=10,t._codecs={},t._howls=[],t._muted=!1,t._volume=1,t._canPlayEvent="canplaythrough",t._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,t.masterGain=null,t.noAudio=!1,t.usingWebAudio=!0,t.autoSuspend=!0,t.ctx=null,t.autoUnlock=!0,t._setup(),t},volume:function(t){var e=this||r;if(t=parseFloat(t),e.ctx||p(),void 0!==t&&t>=0&&t<=1){if(e._volume=t,e._muted)return e;e.usingWebAudio&&e.masterGain.gain.setValueAtTime(t,r.ctx.currentTime);for(var n=0;n<e._howls.length;n++)if(!e._howls[n]._webAudio)for(var i=e._howls[n]._getSoundIds(),o=0;o<i.length;o++){var s=e._howls[n]._soundById(i[o]);s&&s._node&&(s._node.volume=s._volume*t)}return e}return e._volume},mute:function(t){var e=this||r;e.ctx||p(),e._muted=t,e.usingWebAudio&&e.masterGain.gain.setValueAtTime(t?0:e._volume,r.ctx.currentTime);for(var n=0;n<e._howls.length;n++)if(!e._howls[n]._webAudio)for(var i=e._howls[n]._getSoundIds(),o=0;o<i.length;o++){var s=e._howls[n]._soundById(i[o]);s&&s._node&&(s._node.muted=!!t||s._muted)}return e},stop:function(){for(var t=this||r,e=0;e<t._howls.length;e++)t._howls[e].stop();return t},unload:function(){for(var t=this||r,e=t._howls.length-1;e>=0;e--)t._howls[e].unload();return t.usingWebAudio&&t.ctx&&void 0!==t.ctx.close&&(t.ctx.close(),t.ctx=null,p()),t},codecs:function(t){return(this||r)._codecs[t.replace(/^x-/,"")]},_setup:function(){var t=this||r;if(t.state=t.ctx&&t.ctx.state||"suspended",t._autoSuspend(),!t.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===(new Audio).oncanplaythrough&&(t._canPlayEvent="canplay")}catch(e){t.noAudio=!0}else t.noAudio=!0;try{(new Audio).muted&&(t.noAudio=!0)}catch(t){}return t.noAudio||t._setupCodecs(),t},_setupCodecs:function(){var t=this||r,e=null;try{e="undefined"!=typeof Audio?new Audio:null}catch(e){return t}if(!e||"function"!=typeof e.canPlayType)return t;var n=e.canPlayType("audio/mpeg;").replace(/^no$/,""),i=t._navigator?t._navigator.userAgent:"",o=i.match(/OPR\/([0-6].)/g),s=o&&parseInt(o[0].split("/")[1],10)<33,a=-1!==i.indexOf("Safari")&&-1===i.indexOf("Chrome"),u=i.match(/Version\/(.*?) /),l=a&&u&&parseInt(u[1],10)<15;return t._codecs={mp3:!(s||!n&&!e.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!n,opus:!!e.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(e.canPlayType('audio/wav; codecs="1"')||e.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!e.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!e.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(e.canPlayType("audio/x-m4b;")||e.canPlayType("audio/m4b;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(e.canPlayType("audio/x-mp4;")||e.canPlayType("audio/mp4;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!(l||!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!(l||!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!e.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(e.canPlayType("audio/x-flac;")||e.canPlayType("audio/flac;")).replace(/^no$/,"")},t},_unlockAudio:function(){var t=this||r;if(!t._audioUnlocked&&t.ctx){t._audioUnlocked=!1,t.autoUnlock=!1,t._mobileUnloaded||44100===t.ctx.sampleRate||(t._mobileUnloaded=!0,t.unload()),t._scratchBuffer=t.ctx.createBuffer(1,1,22050);var e=function(n){for(;t._html5AudioPool.length<t.html5PoolSize;)try{var i=new Audio;i._unlocked=!0,t._releaseHtml5Audio(i)}catch(n){t.noAudio=!0;break}for(var o=0;o<t._howls.length;o++)if(!t._howls[o]._webAudio)for(var r=t._howls[o]._getSoundIds(),s=0;s<r.length;s++){var a=t._howls[o]._soundById(r[s]);a&&a._node&&!a._node._unlocked&&(a._node._unlocked=!0,a._node.load())}t._autoResume();var u=t.ctx.createBufferSource();u.buffer=t._scratchBuffer,u.connect(t.ctx.destination),void 0===u.start?u.noteOn(0):u.start(0),"function"==typeof t.ctx.resume&&t.ctx.resume(),u.onended=function(){u.disconnect(0),t._audioUnlocked=!0,document.removeEventListener("touchstart",e,!0),document.removeEventListener("touchend",e,!0),document.removeEventListener("click",e,!0),document.removeEventListener("keydown",e,!0);for(var n=0;n<t._howls.length;n++)t._howls[n]._emit("unlock")}};return document.addEventListener("touchstart",e,!0),document.addEventListener("touchend",e,!0),document.addEventListener("click",e,!0),document.addEventListener("keydown",e,!0),t}},_obtainHtml5Audio:function(){var t=this||r;if(t._html5AudioPool.length)return t._html5AudioPool.pop();var e=(new Audio).play();return e&&"undefined"!=typeof Promise&&(e instanceof Promise||"function"==typeof e.then)&&e.catch((function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")})),new Audio},_releaseHtml5Audio:function(t){var e=this||r;return t._unlocked&&e._html5AudioPool.push(t),e},_autoSuspend:function(){var t=this;if(t.autoSuspend&&t.ctx&&void 0!==t.ctx.suspend&&r.usingWebAudio){for(var e=0;e<t._howls.length;e++)if(t._howls[e]._webAudio)for(var n=0;n<t._howls[e]._sounds.length;n++)if(!t._howls[e]._sounds[n]._paused)return t;return t._suspendTimer&&clearTimeout(t._suspendTimer),t._suspendTimer=setTimeout((function(){if(t.autoSuspend){t._suspendTimer=null,t.state="suspending";var e=function(){t.state="suspended",t._resumeAfterSuspend&&(delete t._resumeAfterSuspend,t._autoResume())};t.ctx.suspend().then(e,e)}}),3e4),t}},_autoResume:function(){var t=this;if(t.ctx&&void 0!==t.ctx.resume&&r.usingWebAudio)return"running"===t.state&&"interrupted"!==t.ctx.state&&t._suspendTimer?(clearTimeout(t._suspendTimer),t._suspendTimer=null):"suspended"===t.state||"running"===t.state&&"interrupted"===t.ctx.state?(t.ctx.resume().then((function(){t.state="running";for(var e=0;e<t._howls.length;e++)t._howls[e]._emit("resume")})),t._suspendTimer&&(clearTimeout(t._suspendTimer),t._suspendTimer=null)):"suspending"===t.state&&(t._resumeAfterSuspend=!0),t}};var r=new o,s=function(t){t.src&&0!==t.src.length?this.init(t):console.error("An array of source files must be passed with any new Howl.")};s.prototype={init:function(t){var e=this;return r.ctx||p(),e._autoplay=t.autoplay||!1,e._format="string"!=typeof t.format?t.format:[t.format],e._html5=t.html5||!1,e._muted=t.mute||!1,e._loop=t.loop||!1,e._pool=t.pool||5,e._preload="boolean"!=typeof t.preload&&"metadata"!==t.preload||t.preload,e._rate=t.rate||1,e._sprite=t.sprite||{},e._src="string"!=typeof t.src?t.src:[t.src],e._volume=void 0!==t.volume?t.volume:1,e._xhr={method:t.xhr&&t.xhr.method?t.xhr.method:"GET",headers:t.xhr&&t.xhr.headers?t.xhr.headers:null,withCredentials:!(!t.xhr||!t.xhr.withCredentials)&&t.xhr.withCredentials},e._duration=0,e._state="unloaded",e._sounds=[],e._endTimers={},e._queue=[],e._playLock=!1,e._onend=t.onend?[{fn:t.onend}]:[],e._onfade=t.onfade?[{fn:t.onfade}]:[],e._onload=t.onload?[{fn:t.onload}]:[],e._onloaderror=t.onloaderror?[{fn:t.onloaderror}]:[],e._onplayerror=t.onplayerror?[{fn:t.onplayerror}]:[],e._onpause=t.onpause?[{fn:t.onpause}]:[],e._onplay=t.onplay?[{fn:t.onplay}]:[],e._onstop=t.onstop?[{fn:t.onstop}]:[],e._onmute=t.onmute?[{fn:t.onmute}]:[],e._onvolume=t.onvolume?[{fn:t.onvolume}]:[],e._onrate=t.onrate?[{fn:t.onrate}]:[],e._onseek=t.onseek?[{fn:t.onseek}]:[],e._onunlock=t.onunlock?[{fn:t.onunlock}]:[],e._onresume=[],e._webAudio=r.usingWebAudio&&!e._html5,void 0!==r.ctx&&r.ctx&&r.autoUnlock&&r._unlockAudio(),r._howls.push(e),e._autoplay&&e._queue.push({event:"play",action:function(){e.play()}}),e._preload&&"none"!==e._preload&&e.load(),e},load:function(){var t=this,e=null;if(r.noAudio)t._emit("loaderror",null,"No audio support.");else{"string"==typeof t._src&&(t._src=[t._src]);for(var n=0;n<t._src.length;n++){var i,o;if(t._format&&t._format[n])i=t._format[n];else{if("string"!=typeof(o=t._src[n])){t._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(i=/^data:audio\/([^;,]+);/i.exec(o))||(i=/\.([^.]+)$/.exec(o.split("?",1)[0])),i&&(i=i[1].toLowerCase())}if(i||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),i&&r.codecs(i)){e=t._src[n];break}}if(e)return t._src=e,t._state="loading","https:"===window.location.protocol&&"http:"===e.slice(0,5)&&(t._html5=!0,t._webAudio=!1),new a(t),t._webAudio&&l(t),t;t._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(t,e){var n=this,i=null;if("number"==typeof t)i=t,t=null;else{if("string"==typeof t&&"loaded"===n._state&&!n._sprite[t])return null;if(void 0===t&&(t="__default",!n._playLock)){for(var o=0,s=0;s<n._sounds.length;s++)n._sounds[s]._paused&&!n._sounds[s]._ended&&(o++,i=n._sounds[s]._id);1===o?t=null:i=null}}var a=i?n._soundById(i):n._inactiveSound();if(!a)return null;if(i&&!t&&(t=a._sprite||"__default"),"loaded"!==n._state){a._sprite=t,a._ended=!1;var u=a._id;return n._queue.push({event:"play",action:function(){n.play(u)}}),u}if(i&&!a._paused)return e||n._loadQueue("play"),a._id;n._webAudio&&r._autoResume();var l=Math.max(0,a._seek>0?a._seek:n._sprite[t][0]/1e3),c=Math.max(0,(n._sprite[t][0]+n._sprite[t][1])/1e3-l),d=1e3*c/Math.abs(a._rate),h=n._sprite[t][0]/1e3,p=(n._sprite[t][0]+n._sprite[t][1])/1e3;a._sprite=t,a._ended=!1;var f=function(){a._paused=!1,a._seek=l,a._start=h,a._stop=p,a._loop=!(!a._loop&&!n._sprite[t][2])};if(!(l>=p)){var _=a._node;if(n._webAudio){var y=function(){n._playLock=!1,f(),n._refreshBuffer(a);var t=a._muted||n._muted?0:a._volume;_.gain.setValueAtTime(t,r.ctx.currentTime),a._playStart=r.ctx.currentTime,void 0===_.bufferSource.start?a._loop?_.bufferSource.noteGrainOn(0,l,86400):_.bufferSource.noteGrainOn(0,l,c):a._loop?_.bufferSource.start(0,l,86400):_.bufferSource.start(0,l,c),d!==1/0&&(n._endTimers[a._id]=setTimeout(n._ended.bind(n,a),d)),e||setTimeout((function(){n._emit("play",a._id),n._loadQueue()}),0)};"running"===r.state&&"interrupted"!==r.ctx.state?y():(n._playLock=!0,n.once("resume",y),n._clearTimer(a._id))}else{var v=function(){_.currentTime=l,_.muted=a._muted||n._muted||r._muted||_.muted,_.volume=a._volume*r.volume(),_.playbackRate=a._rate;try{var i=_.play();if(i&&"undefined"!=typeof Promise&&(i instanceof Promise||"function"==typeof i.then)?(n._playLock=!0,f(),i.then((function(){n._playLock=!1,_._unlocked=!0,e?n._loadQueue():n._emit("play",a._id)})).catch((function(){n._playLock=!1,n._emit("playerror",a._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),a._ended=!0,a._paused=!0}))):e||(n._playLock=!1,f(),n._emit("play",a._id)),_.playbackRate=a._rate,_.paused)return void n._emit("playerror",a._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==t||a._loop?n._endTimers[a._id]=setTimeout(n._ended.bind(n,a),d):(n._endTimers[a._id]=function(){n._ended(a),_.removeEventListener("ended",n._endTimers[a._id],!1)},_.addEventListener("ended",n._endTimers[a._id],!1))}catch(t){n._emit("playerror",a._id,t)}};"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===_.src&&(_.src=n._src,_.load());var m=window&&window.ejecta||!_.readyState&&r._navigator.isCocoonJS;if(_.readyState>=3||m)v();else{n._playLock=!0,n._state="loading";var g=function(){n._state="loaded",v(),_.removeEventListener(r._canPlayEvent,g,!1)};_.addEventListener(r._canPlayEvent,g,!1),n._clearTimer(a._id)}}return a._id}n._ended(a)},pause:function(t){var e=this;if("loaded"!==e._state||e._playLock)return e._queue.push({event:"pause",action:function(){e.pause(t)}}),e;for(var n=e._getSoundIds(t),i=0;i<n.length;i++){e._clearTimer(n[i]);var o=e._soundById(n[i]);if(o&&!o._paused&&(o._seek=e.seek(n[i]),o._rateSeek=0,o._paused=!0,e._stopFade(n[i]),o._node))if(e._webAudio){if(!o._node.bufferSource)continue;void 0===o._node.bufferSource.stop?o._node.bufferSource.noteOff(0):o._node.bufferSource.stop(0),e._cleanBuffer(o._node)}else isNaN(o._node.duration)&&o._node.duration!==1/0||o._node.pause();arguments[1]||e._emit("pause",o?o._id:null)}return e},stop:function(t,e){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"stop",action:function(){n.stop(t)}}),n;for(var i=n._getSoundIds(t),o=0;o<i.length;o++){n._clearTimer(i[o]);var r=n._soundById(i[o]);r&&(r._seek=r._start||0,r._rateSeek=0,r._paused=!0,r._ended=!0,n._stopFade(i[o]),r._node&&(n._webAudio?r._node.bufferSource&&(void 0===r._node.bufferSource.stop?r._node.bufferSource.noteOff(0):r._node.bufferSource.stop(0),n._cleanBuffer(r._node)):isNaN(r._node.duration)&&r._node.duration!==1/0||(r._node.currentTime=r._start||0,r._node.pause(),r._node.duration===1/0&&n._clearSound(r._node))),e||n._emit("stop",r._id))}return n},mute:function(t,e){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"mute",action:function(){n.mute(t,e)}}),n;if(void 0===e){if("boolean"!=typeof t)return n._muted;n._muted=t}for(var i=n._getSoundIds(e),o=0;o<i.length;o++){var s=n._soundById(i[o]);s&&(s._muted=t,s._interval&&n._stopFade(s._id),n._webAudio&&s._node?s._node.gain.setValueAtTime(t?0:s._volume,r.ctx.currentTime):s._node&&(s._node.muted=!!r._muted||t),n._emit("mute",s._id))}return n},volume:function(){var t,e,n,i=this,o=arguments;if(0===o.length)return i._volume;if(1===o.length||2===o.length&&void 0===o[1]){var s=i._getSoundIds(),a=s.indexOf(o[0]);a>=0?e=parseInt(o[0],10):t=parseFloat(o[0])}else o.length>=2&&(t=parseFloat(o[0]),e=parseInt(o[1],10));if(!(void 0!==t&&t>=0&&t<=1))return(n=e?i._soundById(e):i._sounds[0])?n._volume:0;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"volume",action:function(){i.volume.apply(i,o)}}),i;void 0===e&&(i._volume=t),e=i._getSoundIds(e);for(var u=0;u<e.length;u++)(n=i._soundById(e[u]))&&(n._volume=t,o[2]||i._stopFade(e[u]),i._webAudio&&n._node&&!n._muted?n._node.gain.setValueAtTime(t,r.ctx.currentTime):n._node&&!n._muted&&(n._node.volume=t*r.volume()),i._emit("volume",n._id));return i},fade:function(t,e,n,i){var o=this;if("loaded"!==o._state||o._playLock)return o._queue.push({event:"fade",action:function(){o.fade(t,e,n,i)}}),o;t=Math.min(Math.max(0,parseFloat(t)),1),e=Math.min(Math.max(0,parseFloat(e)),1),n=parseFloat(n),o.volume(t,i);for(var s=o._getSoundIds(i),a=0;a<s.length;a++){var u=o._soundById(s[a]);if(u){if(i||o._stopFade(s[a]),o._webAudio&&!u._muted){var l=r.ctx.currentTime,c=l+n/1e3;u._volume=t,u._node.gain.setValueAtTime(t,l),u._node.gain.linearRampToValueAtTime(e,c)}o._startFadeInterval(u,t,e,n,s[a],void 0===i)}}return o},_startFadeInterval:function(t,e,n,i,o,r){var s=this,a=e,u=n-e,l=Math.abs(u/.01),c=Math.max(4,l>0?i/l:i),d=Date.now();t._fadeTo=n,t._interval=setInterval((function(){var o=(Date.now()-d)/i;d=Date.now(),a+=u*o,a=Math.round(100*a)/100,a=u<0?Math.max(n,a):Math.min(n,a),s._webAudio?t._volume=a:s.volume(a,t._id,!0),r&&(s._volume=a),(n<e&&a<=n||n>e&&a>=n)&&(clearInterval(t._interval),t._interval=null,t._fadeTo=null,s.volume(n,t._id),s._emit("fade",t._id))}),c)},_stopFade:function(t){var e=this,n=e._soundById(t);return n&&n._interval&&(e._webAudio&&n._node.gain.cancelScheduledValues(r.ctx.currentTime),clearInterval(n._interval),n._interval=null,e.volume(n._fadeTo,t),n._fadeTo=null,e._emit("fade",t)),e},loop:function(){var t,e,n,i=this,o=arguments;if(0===o.length)return i._loop;if(1===o.length){if("boolean"!=typeof o[0])return!!(n=i._soundById(parseInt(o[0],10)))&&n._loop;t=o[0],i._loop=t}else 2===o.length&&(t=o[0],e=parseInt(o[1],10));for(var r=i._getSoundIds(e),s=0;s<r.length;s++)(n=i._soundById(r[s]))&&(n._loop=t,i._webAudio&&n._node&&n._node.bufferSource&&(n._node.bufferSource.loop=t,t&&(n._node.bufferSource.loopStart=n._start||0,n._node.bufferSource.loopEnd=n._stop,i.playing(r[s])&&(i.pause(r[s],!0),i.play(r[s],!0)))));return i},rate:function(){var t,e,n,i=this,o=arguments;if(0===o.length)e=i._sounds[0]._id;else if(1===o.length){var s=i._getSoundIds(),a=s.indexOf(o[0]);a>=0?e=parseInt(o[0],10):t=parseFloat(o[0])}else 2===o.length&&(t=parseFloat(o[0]),e=parseInt(o[1],10));if("number"!=typeof t)return(n=i._soundById(e))?n._rate:i._rate;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"rate",action:function(){i.rate.apply(i,o)}}),i;void 0===e&&(i._rate=t),e=i._getSoundIds(e);for(var u=0;u<e.length;u++)if(n=i._soundById(e[u])){i.playing(e[u])&&(n._rateSeek=i.seek(e[u]),n._playStart=i._webAudio?r.ctx.currentTime:n._playStart),n._rate=t,i._webAudio&&n._node&&n._node.bufferSource?n._node.bufferSource.playbackRate.setValueAtTime(t,r.ctx.currentTime):n._node&&(n._node.playbackRate=t);var l=i.seek(e[u]),c=(i._sprite[n._sprite][0]+i._sprite[n._sprite][1])/1e3-l,d=1e3*c/Math.abs(n._rate);!i._endTimers[e[u]]&&n._paused||(i._clearTimer(e[u]),i._endTimers[e[u]]=setTimeout(i._ended.bind(i,n),d)),i._emit("rate",n._id)}return i},seek:function(){var t,e,n=this,i=arguments;if(0===i.length)n._sounds.length&&(e=n._sounds[0]._id);else if(1===i.length){var o=n._getSoundIds(),s=o.indexOf(i[0]);s>=0?e=parseInt(i[0],10):n._sounds.length&&(e=n._sounds[0]._id,t=parseFloat(i[0]))}else 2===i.length&&(t=parseFloat(i[0]),e=parseInt(i[1],10));if(void 0===e)return 0;if("number"==typeof t&&("loaded"!==n._state||n._playLock))return n._queue.push({event:"seek",action:function(){n.seek.apply(n,i)}}),n;var a=n._soundById(e);if(a){if(!("number"==typeof t&&t>=0)){if(n._webAudio){var u=n.playing(e)?r.ctx.currentTime-a._playStart:0,l=a._rateSeek?a._rateSeek-a._seek:0;return a._seek+(l+u*Math.abs(a._rate))}return a._node.currentTime}var c=n.playing(e);c&&n.pause(e,!0),a._seek=t,a._ended=!1,n._clearTimer(e),n._webAudio||!a._node||isNaN(a._node.duration)||(a._node.currentTime=t);var d=function(){c&&n.play(e,!0),n._emit("seek",e)};if(c&&!n._webAudio){var h=function(){n._playLock?setTimeout(h,0):d()};setTimeout(h,0)}else d()}return n},playing:function(t){var e=this;if("number"==typeof t){var n=e._soundById(t);return!!n&&!n._paused}for(var i=0;i<e._sounds.length;i++)if(!e._sounds[i]._paused)return!0;return!1},duration:function(t){var e=this,n=e._duration,i=e._soundById(t);return i&&(n=e._sprite[i._sprite][1]/1e3),n},state:function(){return this._state},unload:function(){for(var t=this,e=t._sounds,n=0;n<e.length;n++)e[n]._paused||t.stop(e[n]._id),t._webAudio||(t._clearSound(e[n]._node),e[n]._node.removeEventListener("error",e[n]._errorFn,!1),e[n]._node.removeEventListener(r._canPlayEvent,e[n]._loadFn,!1),e[n]._node.removeEventListener("ended",e[n]._endFn,!1),r._releaseHtml5Audio(e[n]._node)),delete e[n]._node,t._clearTimer(e[n]._id);var i=r._howls.indexOf(t);i>=0&&r._howls.splice(i,1);var o=!0;for(n=0;n<r._howls.length;n++)if(r._howls[n]._src===t._src||t._src.indexOf(r._howls[n]._src)>=0){o=!1;break}return u&&o&&delete u[t._src],r.noAudio=!1,t._state="unloaded",t._sounds=[],t=null,null},on:function(t,e,n,i){var o=this["_on"+t];return"function"==typeof e&&o.push(i?{id:n,fn:e,once:i}:{id:n,fn:e}),this},off:function(t,e,n){var i=this,o=i["_on"+t],r=0;if("number"==typeof e&&(n=e,e=null),e||n)for(r=0;r<o.length;r++){var s=n===o[r].id;if(e===o[r].fn&&s||!e&&s){o.splice(r,1);break}}else if(t)i["_on"+t]=[];else{var a=Object.keys(i);for(r=0;r<a.length;r++)0===a[r].indexOf("_on")&&Array.isArray(i[a[r]])&&(i[a[r]]=[])}return i},once:function(t,e,n){return this.on(t,e,n,1),this},_emit:function(t,e,n){for(var i=this,o=i["_on"+t],r=o.length-1;r>=0;r--)o[r].id&&o[r].id!==e&&"load"!==t||(setTimeout(function(t){t.call(this,e,n)}.bind(i,o[r].fn),0),o[r].once&&i.off(t,o[r].fn,o[r].id));return i._loadQueue(t),i},_loadQueue:function(t){var e=this;if(e._queue.length>0){var n=e._queue[0];n.event===t&&(e._queue.shift(),e._loadQueue()),t||n.action()}return e},_ended:function(t){var e=this,n=t._sprite;if(!e._webAudio&&t._node&&!t._node.paused&&!t._node.ended&&t._node.currentTime<t._stop)return setTimeout(e._ended.bind(e,t),100),e;var i=!(!t._loop&&!e._sprite[n][2]);if(e._emit("end",t._id),!e._webAudio&&i&&e.stop(t._id,!0).play(t._id),e._webAudio&&i){e._emit("play",t._id),t._seek=t._start||0,t._rateSeek=0,t._playStart=r.ctx.currentTime;var o=1e3*(t._stop-t._start)/Math.abs(t._rate);e._endTimers[t._id]=setTimeout(e._ended.bind(e,t),o)}return e._webAudio&&!i&&(t._paused=!0,t._ended=!0,t._seek=t._start||0,t._rateSeek=0,e._clearTimer(t._id),e._cleanBuffer(t._node),r._autoSuspend()),e._webAudio||i||e.stop(t._id,!0),e},_clearTimer:function(t){var e=this;if(e._endTimers[t]){if("function"!=typeof e._endTimers[t])clearTimeout(e._endTimers[t]);else{var n=e._soundById(t);n&&n._node&&n._node.removeEventListener("ended",e._endTimers[t],!1)}delete e._endTimers[t]}return e},_soundById:function(t){for(var e=this,n=0;n<e._sounds.length;n++)if(t===e._sounds[n]._id)return e._sounds[n];return null},_inactiveSound:function(){var t=this;t._drain();for(var e=0;e<t._sounds.length;e++)if(t._sounds[e]._ended)return t._sounds[e].reset();return new a(t)},_drain:function(){var t=this,e=t._pool,n=0,i=0;if(!(t._sounds.length<e)){for(i=0;i<t._sounds.length;i++)t._sounds[i]._ended&&n++;for(i=t._sounds.length-1;i>=0;i--){if(n<=e)return;t._sounds[i]._ended&&(t._webAudio&&t._sounds[i]._node&&t._sounds[i]._node.disconnect(0),t._sounds.splice(i,1),n--)}}},_getSoundIds:function(t){if(void 0===t){for(var e=[],n=0;n<this._sounds.length;n++)e.push(this._sounds[n]._id);return e}return[t]},_refreshBuffer:function(t){return t._node.bufferSource=r.ctx.createBufferSource(),t._node.bufferSource.buffer=u[this._src],t._panner?t._node.bufferSource.connect(t._panner):t._node.bufferSource.connect(t._node),t._node.bufferSource.loop=t._loop,t._loop&&(t._node.bufferSource.loopStart=t._start||0,t._node.bufferSource.loopEnd=t._stop||0),t._node.bufferSource.playbackRate.setValueAtTime(t._rate,r.ctx.currentTime),this},_cleanBuffer:function(t){var e=r._navigator&&r._navigator.vendor.indexOf("Apple")>=0;if(r._scratchBuffer&&t.bufferSource&&(t.bufferSource.onended=null,t.bufferSource.disconnect(0),e))try{t.bufferSource.buffer=r._scratchBuffer}catch(t){}return t.bufferSource=null,this},_clearSound:function(t){/MSIE |Trident\//.test(r._navigator&&r._navigator.userAgent)||(t.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var a=function(t){this._parent=t,this.init()};a.prototype={init:function(){var t=this,e=t._parent;return t._muted=e._muted,t._loop=e._loop,t._volume=e._volume,t._rate=e._rate,t._seek=0,t._paused=!0,t._ended=!0,t._sprite="__default",t._id=++r._counter,e._sounds.push(t),t.create(),t},create:function(){var t=this,e=t._parent,n=r._muted||t._muted||t._parent._muted?0:t._volume;return e._webAudio?(t._node=void 0===r.ctx.createGain?r.ctx.createGainNode():r.ctx.createGain(),t._node.gain.setValueAtTime(n,r.ctx.currentTime),t._node.paused=!0,t._node.connect(r.masterGain)):r.noAudio||(t._node=r._obtainHtml5Audio(),t._errorFn=t._errorListener.bind(t),t._node.addEventListener("error",t._errorFn,!1),t._loadFn=t._loadListener.bind(t),t._node.addEventListener(r._canPlayEvent,t._loadFn,!1),t._endFn=t._endListener.bind(t),t._node.addEventListener("ended",t._endFn,!1),t._node.src=e._src,t._node.preload=!0===e._preload?"auto":e._preload,t._node.volume=n*r.volume(),t._node.load()),t},reset:function(){var t=this,e=t._parent;return t._muted=e._muted,t._loop=e._loop,t._volume=e._volume,t._rate=e._rate,t._seek=0,t._rateSeek=0,t._paused=!0,t._ended=!0,t._sprite="__default",t._id=++r._counter,t},_errorListener:function(){var t=this;t._parent._emit("loaderror",t._id,t._node.error?t._node.error.code:0),t._node.removeEventListener("error",t._errorFn,!1)},_loadListener:function(){var t=this,e=t._parent;e._duration=Math.ceil(10*t._node.duration)/10,0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue()),t._node.removeEventListener(r._canPlayEvent,t._loadFn,!1)},_endListener:function(){var t=this,e=t._parent;e._duration===1/0&&(e._duration=Math.ceil(10*t._node.duration)/10,e._sprite.__default[1]===1/0&&(e._sprite.__default[1]=1e3*e._duration),e._ended(t)),t._node.removeEventListener("ended",t._endFn,!1)}};var u={},l=function(t){var e=t._src;if(u[e])return t._duration=u[e].duration,void h(t);if(/^data:[^;]+;base64,/.test(e)){for(var n=atob(e.split(",")[1]),i=new Uint8Array(n.length),o=0;o<n.length;++o)i[o]=n.charCodeAt(o);d(i.buffer,t)}else{var r=new XMLHttpRequest;r.open(t._xhr.method,e,!0),r.withCredentials=t._xhr.withCredentials,r.responseType="arraybuffer",t._xhr.headers&&Object.keys(t._xhr.headers).forEach((function(e){r.setRequestHeader(e,t._xhr.headers[e])})),r.onload=function(){var e=(r.status+"")[0];"0"===e||"2"===e||"3"===e?d(r.response,t):t._emit("loaderror",null,"Failed loading audio file with status: "+r.status+".")},r.onerror=function(){t._webAudio&&(t._html5=!0,t._webAudio=!1,t._sounds=[],delete u[e],t.load())},c(r)}},c=function(t){try{t.send()}catch(e){t.onerror()}},d=function(t,e){var n=function(){e._emit("loaderror",null,"Decoding audio data failed.")},i=function(t){t&&e._sounds.length>0?(u[e._src]=t,h(e,t)):n()};"undefined"!=typeof Promise&&1===r.ctx.decodeAudioData.length?r.ctx.decodeAudioData(t).then(i).catch(n):r.ctx.decodeAudioData(t,i,n)},h=function(t,e){e&&!t._duration&&(t._duration=e.duration),0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue())},p=function(){if(r.usingWebAudio){try{"undefined"!=typeof AudioContext?r.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?r.ctx=new webkitAudioContext:r.usingWebAudio=!1}catch(t){r.usingWebAudio=!1}r.ctx||(r.usingWebAudio=!1);var t=/iP(hone|od|ad)/.test(r._navigator&&r._navigator.platform),e=r._navigator&&r._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),n=e?parseInt(e[1],10):null;if(t&&n&&n<9){var i=/safari/.test(r._navigator&&r._navigator.userAgent.toLowerCase());r._navigator&&!i&&(r.usingWebAudio=!1)}r.usingWebAudio&&(r.masterGain=void 0===r.ctx.createGain?r.ctx.createGainNode():r.ctx.createGain(),r.masterGain.gain.setValueAtTime(r._muted?0:r._volume,r.ctx.currentTime),r.masterGain.connect(r.ctx.destination)),r._setup()}};void 0===(i=function(){return{Howler:r,Howl:s}}.apply(e,[]))||(t.exports=i),e.Howler=r,e.Howl=s,void 0!==n.g?(n.g.HowlerGlobal=o,n.g.Howler=r,n.g.Howl=s,n.g.Sound=a):"undefined"!=typeof window&&(window.HowlerGlobal=o,window.Howler=r,window.Howl=s,window.Sound=a)}(),function(){"use strict";var t;HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){var e=this;if(!e.ctx||!e.ctx.listener)return e;for(var n=e._howls.length-1;n>=0;n--)e._howls[n].stereo(t);return e},HowlerGlobal.prototype.pos=function(t,e,n){var i=this;return i.ctx&&i.ctx.listener?(e="number"!=typeof e?i._pos[1]:e,n="number"!=typeof n?i._pos[2]:n,"number"!=typeof t?i._pos:(i._pos=[t,e,n],void 0!==i.ctx.listener.positionX?(i.ctx.listener.positionX.setTargetAtTime(i._pos[0],Howler.ctx.currentTime,.1),i.ctx.listener.positionY.setTargetAtTime(i._pos[1],Howler.ctx.currentTime,.1),i.ctx.listener.positionZ.setTargetAtTime(i._pos[2],Howler.ctx.currentTime,.1)):i.ctx.listener.setPosition(i._pos[0],i._pos[1],i._pos[2]),i)):i},HowlerGlobal.prototype.orientation=function(t,e,n,i,o,r){var s=this;if(!s.ctx||!s.ctx.listener)return s;var a=s._orientation;return e="number"!=typeof e?a[1]:e,n="number"!=typeof n?a[2]:n,i="number"!=typeof i?a[3]:i,o="number"!=typeof o?a[4]:o,r="number"!=typeof r?a[5]:r,"number"!=typeof t?a:(s._orientation=[t,e,n,i,o,r],void 0!==s.ctx.listener.forwardX?(s.ctx.listener.forwardX.setTargetAtTime(t,Howler.ctx.currentTime,.1),s.ctx.listener.forwardY.setTargetAtTime(e,Howler.ctx.currentTime,.1),s.ctx.listener.forwardZ.setTargetAtTime(n,Howler.ctx.currentTime,.1),s.ctx.listener.upX.setTargetAtTime(i,Howler.ctx.currentTime,.1),s.ctx.listener.upY.setTargetAtTime(o,Howler.ctx.currentTime,.1),s.ctx.listener.upZ.setTargetAtTime(r,Howler.ctx.currentTime,.1)):s.ctx.listener.setOrientation(t,e,n,i,o,r),s)},Howl.prototype.init=(t=Howl.prototype.init,function(e){var n=this;return n._orientation=e.orientation||[1,0,0],n._stereo=e.stereo||null,n._pos=e.pos||null,n._pannerAttr={coneInnerAngle:void 0!==e.coneInnerAngle?e.coneInnerAngle:360,coneOuterAngle:void 0!==e.coneOuterAngle?e.coneOuterAngle:360,coneOuterGain:void 0!==e.coneOuterGain?e.coneOuterGain:0,distanceModel:void 0!==e.distanceModel?e.distanceModel:"inverse",maxDistance:void 0!==e.maxDistance?e.maxDistance:1e4,panningModel:void 0!==e.panningModel?e.panningModel:"HRTF",refDistance:void 0!==e.refDistance?e.refDistance:1,rolloffFactor:void 0!==e.rolloffFactor?e.rolloffFactor:1},n._onstereo=e.onstereo?[{fn:e.onstereo}]:[],n._onpos=e.onpos?[{fn:e.onpos}]:[],n._onorientation=e.onorientation?[{fn:e.onorientation}]:[],t.call(this,e)}),Howl.prototype.stereo=function(t,n){var i=this;if(!i._webAudio)return i;if("loaded"!==i._state)return i._queue.push({event:"stereo",action:function(){i.stereo(t,n)}}),i;var o=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===n){if("number"!=typeof t)return i._stereo;i._stereo=t,i._pos=[t,0,0]}for(var r=i._getSoundIds(n),s=0;s<r.length;s++){var a=i._soundById(r[s]);if(a){if("number"!=typeof t)return a._stereo;a._stereo=t,a._pos=[t,0,0],a._node&&(a._pannerAttr.panningModel="equalpower",a._panner&&a._panner.pan||e(a,o),"spatial"===o?void 0!==a._panner.positionX?(a._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),a._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),a._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):a._panner.setPosition(t,0,0):a._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),i._emit("stereo",a._id)}}return i},Howl.prototype.pos=function(t,n,i,o){var r=this;if(!r._webAudio)return r;if("loaded"!==r._state)return r._queue.push({event:"pos",action:function(){r.pos(t,n,i,o)}}),r;if(n="number"!=typeof n?0:n,i="number"!=typeof i?-.5:i,void 0===o){if("number"!=typeof t)return r._pos;r._pos=[t,n,i]}for(var s=r._getSoundIds(o),a=0;a<s.length;a++){var u=r._soundById(s[a]);if(u){if("number"!=typeof t)return u._pos;u._pos=[t,n,i],u._node&&(u._panner&&!u._panner.pan||e(u,"spatial"),void 0!==u._panner.positionX?(u._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),u._panner.positionY.setValueAtTime(n,Howler.ctx.currentTime),u._panner.positionZ.setValueAtTime(i,Howler.ctx.currentTime)):u._panner.setPosition(t,n,i)),r._emit("pos",u._id)}}return r},Howl.prototype.orientation=function(t,n,i,o){var r=this;if(!r._webAudio)return r;if("loaded"!==r._state)return r._queue.push({event:"orientation",action:function(){r.orientation(t,n,i,o)}}),r;if(n="number"!=typeof n?r._orientation[1]:n,i="number"!=typeof i?r._orientation[2]:i,void 0===o){if("number"!=typeof t)return r._orientation;r._orientation=[t,n,i]}for(var s=r._getSoundIds(o),a=0;a<s.length;a++){var u=r._soundById(s[a]);if(u){if("number"!=typeof t)return u._orientation;u._orientation=[t,n,i],u._node&&(u._panner||(u._pos||(u._pos=r._pos||[0,0,-.5]),e(u,"spatial")),void 0!==u._panner.orientationX?(u._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),u._panner.orientationY.setValueAtTime(n,Howler.ctx.currentTime),u._panner.orientationZ.setValueAtTime(i,Howler.ctx.currentTime)):u._panner.setOrientation(t,n,i)),r._emit("orientation",u._id)}}return r},Howl.prototype.pannerAttr=function(){var t,n,i,o=this,r=arguments;if(!o._webAudio)return o;if(0===r.length)return o._pannerAttr;if(1===r.length){if("object"!=typeof r[0])return(i=o._soundById(parseInt(r[0],10)))?i._pannerAttr:o._pannerAttr;t=r[0],void 0===n&&(t.pannerAttr||(t.pannerAttr={coneInnerAngle:t.coneInnerAngle,coneOuterAngle:t.coneOuterAngle,coneOuterGain:t.coneOuterGain,distanceModel:t.distanceModel,maxDistance:t.maxDistance,refDistance:t.refDistance,rolloffFactor:t.rolloffFactor,panningModel:t.panningModel}),o._pannerAttr={coneInnerAngle:void 0!==t.pannerAttr.coneInnerAngle?t.pannerAttr.coneInnerAngle:o._coneInnerAngle,coneOuterAngle:void 0!==t.pannerAttr.coneOuterAngle?t.pannerAttr.coneOuterAngle:o._coneOuterAngle,coneOuterGain:void 0!==t.pannerAttr.coneOuterGain?t.pannerAttr.coneOuterGain:o._coneOuterGain,distanceModel:void 0!==t.pannerAttr.distanceModel?t.pannerAttr.distanceModel:o._distanceModel,maxDistance:void 0!==t.pannerAttr.maxDistance?t.pannerAttr.maxDistance:o._maxDistance,refDistance:void 0!==t.pannerAttr.refDistance?t.pannerAttr.refDistance:o._refDistance,rolloffFactor:void 0!==t.pannerAttr.rolloffFactor?t.pannerAttr.rolloffFactor:o._rolloffFactor,panningModel:void 0!==t.pannerAttr.panningModel?t.pannerAttr.panningModel:o._panningModel})}else 2===r.length&&(t=r[0],n=parseInt(r[1],10));for(var s=o._getSoundIds(n),a=0;a<s.length;a++)if(i=o._soundById(s[a])){var u=i._pannerAttr;u={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:u.coneInnerAngle,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:u.coneOuterAngle,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:u.coneOuterGain,distanceModel:void 0!==t.distanceModel?t.distanceModel:u.distanceModel,maxDistance:void 0!==t.maxDistance?t.maxDistance:u.maxDistance,refDistance:void 0!==t.refDistance?t.refDistance:u.refDistance,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:u.rolloffFactor,panningModel:void 0!==t.panningModel?t.panningModel:u.panningModel};var l=i._panner;l?(l.coneInnerAngle=u.coneInnerAngle,l.coneOuterAngle=u.coneOuterAngle,l.coneOuterGain=u.coneOuterGain,l.distanceModel=u.distanceModel,l.maxDistance=u.maxDistance,l.refDistance=u.refDistance,l.rolloffFactor=u.rolloffFactor,l.panningModel=u.panningModel):(i._pos||(i._pos=o._pos||[0,0,-.5]),e(i,"spatial"))}return o},Sound.prototype.init=function(t){return function(){var e=this,n=e._parent;e._orientation=n._orientation,e._stereo=n._stereo,e._pos=n._pos,e._pannerAttr=n._pannerAttr,t.call(this),e._stereo?n.stereo(e._stereo):e._pos&&n.pos(e._pos[0],e._pos[1],e._pos[2],e._id)}}(Sound.prototype.init),Sound.prototype.reset=function(t){return function(){var e=this,n=e._parent;return e._orientation=n._orientation,e._stereo=n._stereo,e._pos=n._pos,e._pannerAttr=n._pannerAttr,e._stereo?n.stereo(e._stereo):e._pos?n.pos(e._pos[0],e._pos[1],e._pos[2],e._id):e._panner&&(e._panner.disconnect(0),e._panner=void 0,n._refreshBuffer(e)),t.call(this)}}(Sound.prototype.reset);var e=function(t,e){"spatial"===(e=e||"spatial")?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.panningModel=t._pannerAttr.panningModel,void 0!==t._panner.positionX?(t._panner.positionX.setValueAtTime(t._pos[0],Howler.ctx.currentTime),t._panner.positionY.setValueAtTime(t._pos[1],Howler.ctx.currentTime),t._panner.positionZ.setValueAtTime(t._pos[2],Howler.ctx.currentTime)):t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),void 0!==t._panner.orientationX?(t._panner.orientationX.setValueAtTime(t._orientation[0],Howler.ctx.currentTime),t._panner.orientationY.setValueAtTime(t._orientation[1],Howler.ctx.currentTime),t._panner.orientationZ.setValueAtTime(t._orientation[2],Howler.ctx.currentTime)):t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.setValueAtTime(t._stereo,Howler.ctx.currentTime)),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id,!0)}}()},125:function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.SmallAlien=e.BigAlien=e.Alien=void 0;var r=n(981),s=n(882),a=n(574),u=n(208),l=n(464),c=600*r.default.objectScale,d=800*r.default.objectScale,h=225*r.default.objectScale,p=250*r.default.objectScale,f=function(t){function e(e){var n=t.call(this,0,0)||this;return n.moveTimer=0,n.moveTime=1,n.bulletTimer=0,n.bulletTime=.7,n.velocity.y=0,n.origin.y=(0,s.random)(100,r.default.height-100),n.origin.y%2==0?(n.origin.x=40,n.velocity.x=e):(n.origin.x=r.default.width-40,n.velocity.x=-e),n.points=[{x:.5,y:-2},{x:1,y:-1},{x:2.5,y:0},{x:1,y:1},{x:-1,y:1},{x:-2.5,y:0},{x:-1,y:-1},{x:-.5,y:-2}],n}return o(e,t),e.prototype.update=function(t){this.move(t),this.origin.x>=r.default.width-5||this.origin.x<=5?this.trigger("expired"):(this.moveTimer+=t,this.moveTimer>=1&&0!==this.velocity.y&&(this.velocity.y=0,this.moveTimer=0),this.moveTimer>=this.moveTime&&((0,s.random)(1,20)%2==0&&(this.velocity.y=this.origin.x%2==0?this.velocity.x:-this.velocity.x),this.moveTimer=0),this.bulletTimer+=t,this.bulletTimer>=this.bulletTime&&(this.fire(),this.bulletTimer=0))},e.prototype.render=function(){this.draw()},e.prototype.draw=function(){t.prototype.draw.call(this),r.default.draw.vectorShape([this.points[1],this.points[6]],this.origin.x,this.origin.y),r.default.draw.vectorShape([this.points[2],this.points[5]],this.origin.x,this.origin.y)},e}(a.Object2D);e.Alien=f;var _=function(t){function e(){var e=t.call(this,h)||this;return e.score=200,e.scale(7),e}return o(e,t),e.prototype.fire=function(){var t=l.Vector.fromAngle((0,s.random)(1,360),c),e=new u.Bullet(this.origin,t);this.trigger("fire",e)},e.prototype.destroy=function(){this.trigger("expired")},e}(f);e.BigAlien=_;var y=function(t){function e(e){var n=t.call(this,p)||this;return n.ship=e,n.bulletTime=1,n.score=1e3,n.scale(4),n}return o(e,t),e.prototype.fire=function(){var t;if(this.ship){var e=l.Vector.fromXY(this.ship.origin,this.origin,d);t=new u.Bullet(this.origin,e,2)}else e=l.Vector.fromAngle((0,s.random)(1,360),d),t=new u.Bullet(this.origin,e,2);this.trigger("fire",t)},e.prototype.destroy=function(){this.ship=null,this.trigger("expired")},e}(f);e.SmallAlien=y},139:function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.AttractMode=void 0;var r=n(54),s=n(242),a=n(233),u=n(22),l=n(646),c=n(578),d=n(777),h=function(t){function e(e,n){var i=t.call(this)||this;return i.demoTimer=0,i.index=0,i.modes=[new a.HighScoreMode(n),new u.DemoMode(e||new r.World(l.Highscores.top.score))],i.currentMode=i.modes[0],c.Sound.stop(),c.Sound.off(),i}return o(e,t),e.prototype.update=function(t){this.currentMode.update(t),d.Key.isAnyPressed()?this.trigger("done"):this.updateAttractTimer(t)},e.prototype.render=function(t){this.currentMode.render(t)},e.prototype.updateAttractTimer=function(t){this.demoTimer+=t,this.demoTimer>=15&&(this.demoTimer=0,this.index=1-this.index,this.currentMode=this.modes[this.index])},e}(s.EventSource);e.AttractMode=h},208:function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Bullet=void 0;var r=n(981),s=function(t){function e(e,n,i){void 0===i&&(i=1.25);var o=t.call(this,e.x,e.y)||this;return o.life=i,o.frame=0,o.velocity=n,o}return o(e,t),e.prototype.render=function(){this.draw()},e.prototype.update=function(t){this.frame++,this.move(t),this.life-=t,this.life<=0&&this.destroy()},e.prototype.draw=function(){var t=this.frame<=1?8*r.default.objectScale:4*r.default.objectScale;r.default.draw.rect(this.origin.x-2,this.origin.y-2,t,t,"rgba(255,0,255,.5)"),r.default.draw.rect(this.origin.x-1,this.origin.y-1,t,t,"rgba(0,255,255,.5)"),r.default.draw.rect(this.origin.x,this.origin.y,t,t)},e.prototype.destroy=function(){this.trigger("expired")},Object.defineProperty(e.prototype,"vertices",{get:function(){return[this.origin]},enumerable:!1,configurable:!0}),e}(n(574).Object2D);e.Bullet=s},32:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Collisions=void 0;var i=n(981),o=n(143),r=n(488),s=function(){function t(){this.tree=new o.Quadtree({x:0,y:0,width:i.default.width,height:i.default.height},1)}return t.prototype.bulletCheck=function(t,e,n,i){var o=this;if(t&&t.length&&e&&e.length){var s=[],a=[];this.tree.clear(),e.forEach((function(t){o.tree.insert(t)}));for(var u=function(e){var o=t[e];s.length=0,s.push.apply(s,l.tree.retrieve(o)),s.forEach((function(s){if(s.collided(o))n(o,s);else if(i&&i(o,o,s),e<t.length-1){var u=t[e+1],l=[s.x,s.y,s.x+s.width,s.y+s.height];a.length=0,(0,r.lineclip)([[o.origin.x,o.origin.y],[u.origin.x,u.origin.y]],l,a),a.length&&(i&&i(o,u,s),n(o,s))}}))},l=this,c=0;c<t.length;c++)u(c)}},t.prototype.check=function(t,e,n,i,o){var r=this;if(t&&t.length&&e&&e.length){var s=[];this.tree.clear(),e.forEach((function(t){r.tree.insert(t)})),t.forEach((function(t){s.length=0,s.push.apply(s,r.tree.retrieve(t)),s.forEach((function(e){e.collided(t)?n?r.pointsInPolygon(t,e||r.pointsInPolygon(e,t))&&i(t,e):i(t,e):o&&o(t,e)}))}))}},t.prototype.pointsInPolygon=function(t,e){for(var n=t.vertices.length>e.vertices.length?t.vertices:e.vertices,i=t.vertices.length<=e.vertices.length?t.vertices:e.vertices,o=0,r=i.length;o<r;o++)if(this.pointInPoly(n,i[o]))return!0;return!1},t.prototype.pointInPoly=function(t,e){var n,i=t.length-1,o=i-1,r=t.map((function(t){return t.x})),s=t.map((function(t){return t.y})),a=e.x,u=e.y,l=0;for(n=0;n<i;n++)(s[n]<u&&s[o]>=u||s[o]<u&&s[n]>=u)&&(r[n]<=a||r[o]<=a)&&(l^=r[n]+(u-s[n])/(s[o]-s[n])*(r[o]-r[n])<a),o=n;return l},t}();e.Collisions=s},22:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DemoMode=void 0;var i=n(981),o=n(32),r=function(){function t(t){this.world=t,this.showPushStart=!0,this.pushStartTimer=0,this.init()}return t.prototype.init=function(){this.world.started||this.world.startLevel()},t.prototype.update=function(t){this.checkCollisions(),this.world.updateAlienTimer(t),this.world.rocks.length||this.world.scenery.length||this.world.alien||this.world.startLevel(),this.updatePushStartTimer(t),this.world.update(t)},t.prototype.updatePushStartTimer=function(t){this.pushStartTimer+=t,this.pushStartTimer>=.4&&(this.pushStartTimer=0,this.showPushStart=!this.showPushStart)},t.prototype.checkCollisions=function(){var t=this,e=this.world,n=e.alien,i=e.rocks,r=e.alienBullets;if(n||r.length){var s=new o.Collisions;s.check([n],i,!1,(function(e,n){t.world.shake(),t.world.alienDestroyed(),t.world.rockDestroyed(n)})),s.check(r,i,!1,(function(e,n){t.world.shake(),t.world.rockDestroyed(n)}))}},t.prototype.render=function(t){this.drawBackground(),this.drawPushStart(),this.world.render(t)},t.prototype.drawBackground=function(){i.default.draw.background(),i.default.draw.scorePlayer1(this.world.score),i.default.draw.oneCoinOnePlay(),i.default.draw.highscore(this.world.highscore),i.default.draw.copyright()},t.prototype.drawPushStart=function(){this.showPushStart&&i.default.draw.pushStart()},t}();e.DemoMode=r},565:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Draw=e.white=e.cyan=e.magenta=void 0;var i=n(981),o=n(841),r=n(882),s=n(238),a="rgba(255,255,255,.8)",u="rgba(255,255,255,.8)";function l(t){return void 0===t&&(t=1),"rgba(255,0,255, ".concat(t,")")}function c(t){return void 0===t&&(t=1),"rgba(0,255,255, ".concat(t,")")}e.magenta=l,e.cyan=c,e.white=function(t){return void 0===t&&(t=1),"rgba(255,255,255, ".concat(t,")")};var d=l(.5),h=c(.5),p=function(){function t(t){this.ctx=t}return t.prototype.line=function(t,e,n,i,o,r){void 0===o&&(o=a),void 0===r&&(r=2);var s=this.ctx;s.beginPath(),s.lineWidth=r,s.moveTo(t,e),s.strokeStyle=o,s.lineTo(n,i),s.stroke(),s.closePath()},t.prototype.vectorline=function(t,e,n,i,o,r){void 0===o&&(o=a),void 0===r&&(r=2);var u=this.ctx,l=u.strokeStyle;s.default.burn&&(this.line(t-2,e,n-2,i,d),this.line(t-1,e-2,n-1,i-1,h)),this.line(t,e,n,i,o),u.strokeStyle=l},t.prototype.shape=function(t,e,n,i,o){void 0===i&&(i=a),void 0===o&&(o=!0);var r=t.length-1;this.ctx.save();for(var s=0;s<r;s++)this.line(e+t[s].x,n+t[s].y,e+t[s+1].x,n+t[s+1].y,i);o&&this.line(e+t[r].x,n+t[r].y,e+t[0].x,n+t[0].y,i),this.ctx.restore()},t.prototype.vectorShape=function(t,e,n,i,o){void 0===i&&(i=a),void 0===o&&(o=!0);var r=t.length-1;this.ctx.save();for(var s=0;s<r;s++)this.vectorline(e+t[s].x,n+t[s].y,e+t[s+1].x,n+t[s+1].y,i);o&&this.vectorline(e+t[r].x,n+t[r].y,e+t[0].x,n+t[0].y,i),this.ctx.restore()},t.prototype.rect=function(t,e,n,i,o){void 0===o&&(o=a);var r=this.ctx;r.beginPath(),r.fillStyle=o,r.fillRect(t,e,n,i),r.stroke(),r.closePath()},t.prototype.point=function(t,e){void 0===e&&(e=a),this.rect(t.x,t.y,i.default.pointSize,i.default.pointSize,e)},t.prototype.background=function(t){void 0===t&&(t="#000000");var e=this.ctx;e.fillStyle=t,e.fillRect(0,0,i.default.width,i.default.height)},t.prototype.scanlines=function(){if(s.default.burn)for(var t=this.ctx,e=(0,r.random)(2,5),n=0;n<i.default.height-e;n+=e)t.beginPath(),t.lineWidth=1,t.moveTo(0,n),t.strokeStyle="#001111",t.lineTo(i.default.width,n),t.stroke(),t.moveTo(0,n+1),t.strokeStyle="rgba(255,0,255,.5)",t.lineTo(i.default.width,n+1),t.stroke(),t.moveTo(0,n+2),t.strokeStyle="rgba(0,255,255,.3)",t.lineTo(i.default.width,n+2),t.stroke(),t.closePath()},t.prototype.bounds=function(t,e){void 0===e&&(e=a);var n=this.ctx;t&&(n.save(),n.beginPath(),n.strokeStyle=e,n.lineWidth=2,n.moveTo(t.x,t.y),n.lineTo(t.x+t.width,t.y),n.lineTo(t.x+t.width,t.y+t.height),n.lineTo(t.x,t.y+t.height),n.lineTo(t.x,t.y),n.stroke(),n.closePath(),n.restore())},t.prototype.text=function(t,e,n,i,o){void 0===o&&(o=u);var r=this.ctx;r.save(),r.font="".concat(i,"pt hyperspace"),r.textBaseline="middle",r.lineWidth=1,s.default.burn&&(r.strokeStyle=d,r.strokeText(t,e-2,n-2),r.strokeStyle=h,r.strokeText(t,e-1,n-1)),r.strokeStyle=o,r.strokeText(t,e,n),r.restore()},t.prototype.text2=function(t,e,n){var i=this.ctx;i.save(),i.font="".concat(e,"pt hyperspace"),i.textBaseline="middle",i.lineWidth=1;var o=n(i.measureText(t).width);s.default.burn&&(i.strokeStyle=l(.5),i.strokeText(t,o.x-2,o.y-2),i.strokeStyle=c(.5),i.strokeText(t,o.x-1,o.y-1)),i.strokeStyle=u,i.strokeText(t,o.x,o.y),i.restore()},t.prototype.text3=function(t,e,n){var i=this.ctx;i.save(),i.font="".concat(e,"pt hyperspace"),i.textBaseline="middle";var o=n(i.measureText(t).width);s.default.burn&&(i.fillStyle=l(.5),i.fillText(t,o.x-2,o.y-2),i.fillStyle=c(.5),i.fillText(t,o.x-1,o.y-1)),i.fillStyle=u,i.fillText(t,o.x,o.y),i.restore()},t.prototype.scorePlayer1=function(t){for(var e=t.toString();e.length<2;)e="0"+e;this.text(e,100,20,i.default.font.medium)},t.prototype.highscore=function(t){for(var e=t.toString();e.length<2;)e="0"+e;this.text2(e,i.default.font.small,(function(t){return{x:i.default.width2-t/2,y:20}}))},t.prototype.oneCoinOnePlay=function(){this.text2("1  coin  1  play",i.default.font.medium,(function(t){return{x:i.default.width2-t/2,y:i.default.height/8*7}}))},t.prototype.pushStart=function(){i.default.draw.text3("push start",i.default.font.xlarge,(function(t){return{x:i.default.width2-t/2,y:i.default.height/8}}))},t.prototype.player1=function(){i.default.draw.text3("player 1",i.default.font.xlarge,(function(t){return{x:i.default.width2-t/2,y:i.default.height/4.5}}))},t.prototype.gameOver=function(){i.default.draw.text3("game over",i.default.font.xlarge,(function(t){return{x:i.default.width2-t/2,y:i.default.height/4.5}}))},t.prototype.copyright=function(){this.text2(String.fromCharCode(169)+" 1979 atari inc",i.default.font.small,(function(t){return{x:i.default.width2-t/2,y:i.default.height-i.default.font.small}}))},t.prototype.drawExtraLives=function(t){t=Math.min(t,10);for(var e=new o.Ship(0,0),n=2.3*(e.x+e.width),r=20+i.default.font.medium+10,s=0;s<t;s++)e.origin.x=80+s*n,e.origin.y=r,e.render()},t.prototype.circle=function(t,e,n,i){void 0===i&&(i=a);var o=this.ctx;o.setLineDash([2,(0,r.random)(5,10)]),s.default.burn&&(o.beginPath(),o.arc(t-2,e-2,n,0,2*Math.PI,!1),o.strokeStyle=l(.2),o.stroke(),o.closePath(),o.beginPath(),o.arc(t-1,e-1,n,0,2*Math.PI,!1),o.strokeStyle=c(.2),o.stroke(),o.closePath()),o.beginPath(),o.arc(t,e,n,0,2*Math.PI,!1),o.strokeStyle=i,o.stroke(),o.closePath(),o.setLineDash([])},t}();e.Draw=p},242:function(t,e){"use strict";var n=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var i,o=0,r=e.length;o<r;o++)!i&&o in e||(i||(i=Array.prototype.slice.call(e,0,o)),i[o]=e[o]);return t.concat(i||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.EventSource=void 0;var i=function(){function t(){this.handlers={}}return t.prototype.on=function(t,e){this.handlers[t]||(this.handlers[t]=[]),this.handlers[t].push(e)},t.prototype.off=function(t,e){this.handlers[t]=this.handlers[t].filter((function(t){return t!==e}))},t.prototype.trigger=function(t){for(var e=this,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];var r=this.handlers[t]||[];r.forEach((function(t){return t.apply(void 0,n([e],i,!1))}))},t}();e.EventSource=i},972:function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Explosion=void 0;var r=n(242),s=n(981),a=n(464),u=n(882),l=300*s.default.objectScale,c=function(t){function e(e,n,i){void 0===i&&(i=100);var o=t.call(this)||this;o.x=e,o.y=n,o.size=i,o.life=1,o.points=[];for(var r=0;r<15;r++){var s=a.Vector.fromAngle((0,u.random)(1,360),Math.random()*l);o.points.push({x:e,y:n,vx:s.x,vy:s.y,alpha:Math.random()})}return o}return o(e,t),e.prototype.update=function(t){this.points.forEach((function(e){e.x+=e.vx*t,e.y+=e.vy*t,e.alpha-=.002})),this.life-=t,this.life<=.1&&this.trigger("expired")},e.prototype.render=function(t){this.points.forEach((function(t){(0,u.random)(1,10)%2==0&&s.default.draw.rect(t.x,t.y,2,2,"rgba(255,255,255,".concat(t.alpha,")"))}))},e}(r.EventSource);e.Explosion=c},568:function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Flash=void 0;var r=n(981),s=function(t){function e(e){var n=t.call(this)||this;return n.frames=e,n}return o(e,t),e.prototype.render=function(){this.draw()},e.prototype.update=function(t){this.frames--,this.frames<=0&&this.trigger("expired")},e.prototype.draw=function(){r.default.draw.background("#ffffff"),r.default.draw.scanlines()},e}(n(242).EventSource);e.Flash=s},39:function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.GameMode=void 0;var r=n(578),s=n(242),a=n(32),u=n(981),l=n(958),c=n(238),d=function(t){function e(e){var n=t.call(this)||this;return n.world=e,n.bounds=[],n.lines=[],n}return o(e,t),e.prototype.init=function(){r.Sound.on(),this.world.addShip(u.default.width2,u.default.height2),this.world.startLevel(),this.thumper=new l.Thumper},e.prototype.update=function(t){this.world.levelTimer+=t,this.thumper&&this.world.ship&&this.thumper.update(t),this.world.gameOver&&(this.world.gameOverTimer+=t,this.world.gameOverTimer>=5&&this.trigger("done",this.world)),this.world.started?(this.checkCollisions(t),this.world.updateAlienTimer(t),this.world.gameOver||(this.world.shouldTryToPlaceShip()&&this.world.tryPlaceShip(t),this.world.shouldCheckForNextLevel()&&(this.world.startLevel(),this.thumper.reset())),this.world.lives||(this.world.gameOver=!0),this.world.update(t)):this.world.levelTimer>=2&&(this.init(),this.world.started=!0)},e.prototype.render=function(t){c.default.paused||(this.renderStatic(),this.world.render(t))},e.prototype.renderStatic=function(){u.default.draw.background(),u.default.draw.copyright(),u.default.draw.scorePlayer1(this.world.score),u.default.draw.highscore(this.world.highscore),u.default.draw.drawExtraLives(this.world.lives),this.world.ship&&(u.default.draw.vectorline(40,80,140,80,"rgba(255,255,255,.4)"),u.default.draw.vectorline(40,80,40+100*this.world.ship.shield,80,"rgba(255,255,255,.6)")),this.world.started||u.default.draw.player1(),this.world.gameOver&&u.default.draw.gameOver(),c.default.debug&&this.renderDebug(),c.default.god&&u.default.draw.text2("god",u.default.font.small,(function(t){return{x:u.default.width-t-10,y:u.default.height-80}}))},e.prototype.renderDebug=function(){if(u.default.draw.text2("debug mode",u.default.font.small,(function(t){return{x:u.default.width-t-10,y:u.default.height-40}})),this.bounds&&this.bounds.forEach((function(t){u.default.draw.bounds(t,"#fc058d")})),this.lines.forEach((function(t){u.default.draw.vectorline(t[0].origin.x,t[0].origin.y,t[1].origin.x,t[1].origin.y,"#fd1f00")})),!this.world.ship&&this.world.lives){var t=u.default.shipRect;u.default.draw.bounds(t,"#00ff00")}this.world.ship&&(u.default.draw.text(this.world.ship.angle.toString(),this.world.ship.origin.x+20,this.world.ship.origin.y+20,10),u.default.draw.text(this.world.ship.velocity.x.toString(),this.world.ship.origin.x+20,this.world.ship.origin.y+40,10),u.default.draw.text(this.world.ship.velocity.y.toString(),this.world.ship.origin.x+20,this.world.ship.origin.y+60,10));var e=new Date(null);e.setSeconds(this.world.levelTimer),u.default.draw.text2(e.toISOString().substr(11,8),u.default.font.small,(function(t){return{x:10,y:u.default.height-40}}))},e.prototype.checkCollisions=function(t){var e=this,n=this.world,i=n.ship,o=n.rocks,r=n.shipBullets,s=n.alien,u=n.alienBullets,l=n.shockwaves,d=n.powerup;if(this.world.shouldCheckCollisions()){this.bounds.length=0,this.lines.length=0;var h=new a.Collisions;h.bulletCheck(r,o,(function(t,n){e.world.shake(),e.world.addScore(n),e.world.rockDestroyed(n),t.destroy()}),(function(t,n,i){c.default.debug&&(e.bounds.push(i),e.lines.push([t,n]))})),h.bulletCheck(r,[s],(function(t,n){e.world.shake(),e.world.addScore(n),e.world.alienDestroyed(),t.destroy()}),(function(t,n,i){c.default.debug&&(e.bounds.push(i),e.lines.push([t,n]))}));var p=[];l.filter((function(t){return t.rocks.length})).forEach((function(t){return p.push.apply(p,t.rocks)}));var f=this.world.rocks.filter((function(t){return p.indexOf(t)<0}));h.check(p,f,!1,(function(t,n){e.world.addScore(t),e.world.addScore(n),e.world.rockDestroyed(t),e.world.rockDestroyed(n)})),h.check([i],[d],!0,(function(t,n){e.world.addPowerup(),n.destroy()}),(function(t,n){c.default.debug&&e.bounds.push(n)})),c.default.god||(h.check([i],o,!0,(function(t,n){e.world.shake(),e.world.addScore(n),e.world.rockDestroyed(n),t.shield-=.25,t.shield<=0&&e.world.shipDestroyed()}),(function(t,n){c.default.debug&&e.bounds.push(n)})),h.check([i],[s],!0,(function(t,n){e.world.shake(),e.world.addScore(n),e.world.alienDestroyed(),t.shield-=.5,t.shield<=0&&e.world.shipDestroyed()}),(function(t,n){c.default.debug&&e.bounds.push(n)})),h.check(u,[i],!0,(function(t,n){e.world.shake(),n.shield-=1,n.shield<=0&&e.world.shipDestroyed(),t.destroy()}),(function(t,n){c.default.debug&&e.bounds.push(n)}))),h.check([s],o,!1,(function(t,n){e.world.shake(),e.world.alienDestroyed(),e.world.rockDestroyed(n)}),(function(t,n){c.default.debug&&e.bounds.push(n)})),h.check(u,o,!1,(function(t,n){e.world.shake(),e.world.rockDestroyed(n)}),(function(t,n){c.default.debug&&e.bounds.push(n)}))}},e}(s.EventSource);e.GameMode=d},238:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=new function(){this.debug=!1,this.paused=!1,this.god=!1,this.burn=!0}},233:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HighScoreMode=void 0;var i=n(981),o=n(646),r=function(){function t(t){this.score=t,this.blink=0,this.showPushStart=!0,this.highscore=o.Highscores.top.score}return t.prototype.update=function(t){this.blink+=t,this.blink>=.4&&(this.blink=0,this.showPushStart=!this.showPushStart)},t.prototype.render=function(t){this.drawBackground(),this.drawPushStart(),this.drawHighScores()},t.prototype.drawBackground=function(){i.default.draw.background(),i.default.draw.scorePlayer1(this.score),i.default.draw.oneCoinOnePlay(),i.default.draw.highscore(this.highscore),i.default.draw.copyright()},t.prototype.drawHighScores=function(){var t=i.default.width/2,e=Math.ceil(i.default.height/4.5)+(i.default.font.xlarge+i.default.font.small),n=i.default.font.medium+i.default.font.small;i.default.draw.text2("high scores",i.default.font.large,(function(e){return{x:t-e/2,y:i.default.height/4.5}}));for(var r=function(r){var a=e+r*n,u="".concat(s.pad(r+1," ",2),".").concat(s.pad(o.Highscores.scores[r].score," ",6)," ").concat(o.Highscores.scores[r].initials);i.default.draw.text2(u,i.default.font.large,(function(e){return{x:t-e/2,y:a}}))},s=this,a=0;a<o.Highscores.scores.length;a++)r(a)},t.prototype.drawPushStart=function(){this.showPushStart&&i.default.draw.pushStart()},t.prototype.pad=function(t,e,n){for(t=t.toString();t.length<n;)t=e+t;return t},t}();e.HighScoreMode=r},646:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Highscores=void 0;var n=[{score:20140,initials:"J H"},{score:20050,initials:"P A"},{score:19930,initials:"  M"},{score:19870,initials:"G I"},{score:19840,initials:"A L"},{score:19790,initials:"M T"},{score:19700,initials:"E O"},{score:19660,initials:"S N"},{score:190,initials:"   "},{score:70,initials:"   "}],i="jph_asteroids_hs",o=new(function(){function t(){this.scores=[];var t=window.localStorage.getItem(i);this.scores=t?JSON.parse(t)||[]:n}return Object.defineProperty(t.prototype,"top",{get:function(){return this.scores[0]},enumerable:!1,configurable:!0}),t.prototype.qualifies=function(t){return!!o.scores.filter((function(e){return e.score<t})).length},t.prototype.save=function(t,e){this.qualifies(t)&&(this.scores.push({score:t,initials:e}),this.scores=this.scores.sort((function(t,e){return t.score>e.score?-1:1})).slice(0,10),window.localStorage.setItem(i,JSON.stringify(this.scores)))},t}());e.Highscores=o},320:function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.InitialsMode=void 0;var r=n(981),s=n(578),a=n(777),u=n(646),l=n(242),c="_abcdefghijklmnopqrstuvwxyz",d=function(t){function e(e){var n=t.call(this)||this;return n.index=1,n.score=e,n.init(),n}return o(e,t),e.prototype.init=function(){this.position=0,this.index=1,this.initials=["a","_","_"],s.Sound.stop(),s.Sound.off()},e.prototype.update=function(t){a.Key.wasRotateLeft()&&(this.index--,this.index<0&&(this.index=c.length-1),this.initials[this.position]=c[this.index]),a.Key.wasRotateRight()&&(this.index++,this.index>c.length-1&&(this.index=0),this.initials[this.position]=c[this.index]),a.Key.wasHyperspace()&&(this.position++,this.position>=3&&(u.Highscores.save(this.score,this.initials.join("").replace("_"," ")),this.init(),this.trigger("done")),this.index=1,this.initials[this.position]=c[this.index])},e.prototype.render=function(t){var e=r.default.height/4.5,n=function(t){return r.default.draw.text(t,50,e+=r.default.font.large+5,r.default.font.large)};r.default.draw.background(),r.default.draw.highscore(u.Highscores.top.score),r.default.draw.scorePlayer1(this.score),r.default.draw.copyright(),n("your score is one of the ten best"),n("please enter your initials"),n("push rotate to select letter"),n("push hyperspace when letter is correct"),r.default.draw.text3(this.initials.join(""),r.default.font.xlarge,(function(t){return{x:r.default.width2-t/2,y:r.default.height/2+r.default.font.xlarge}}))},e}(l.EventSource);e.InitialsMode=d},777:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Key=e._Key=e.Keys=void 0;var i=n(840);e.Keys={HYPERSPACE:32,ROTATE_LEFT:37,ROTATE_LEFT_A:65,ROTATE_RIGHT:39,ROTATE_RIGHT_D:68,THRUST:38,THRUST_W:87,FIRE:17,DEBUG:90,PAUSE:80,GOD:71,MONITOR_BURN:66};var o=function(){function t(){var t=this;this.keys={},this.prev={},this.touched=!1,this.rotateLeft=function(n){t.keys[e.Keys.ROTATE_LEFT]=n,t.keys[e.Keys.ROTATE_LEFT_A]=n},this.rotateRight=function(n){t.keys[e.Keys.ROTATE_RIGHT]=n,t.keys[e.Keys.ROTATE_RIGHT_D]=n},this.thrust=function(n){t.keys[e.Keys.THRUST]=n},this.fire=function(n){t.keys[e.Keys.FIRE]=n},this.hyperspace=function(n){t.keys[e.Keys.HYPERSPACE]=n},window.onkeydown=function(e){console.log(e.keyCode),t.keys[e.keyCode]=!0},window.onkeyup=function(e){t.keys[e.keyCode]=!1};var n=document.getElementById("game");this.mc=new i.Manager(n);var o=new i.Pan,r=new i.Tap,s=new i.Pinch({enable:!0});this.mc.add(o),this.mc.add(r,{interval:50}),this.mc.add(s),this.mc.on("panup",(function(e){t.thrust(!0)})),this.mc.on("panleft",(function(e){t.rotateLeft(!0)})),this.mc.on("panright",(function(e){t.rotateRight(!0)})),this.mc.on("panend",(function(e){t.thrust(!1),t.rotateLeft(!1),t.rotateRight(!1)})),this.mc.on("tap",(function(e){t.fire(!0),t.touched=!0})),this.mc.on("pinchout",(function(e){t.hyperspace(!0)})),this.mc.on("pinchend",(function(e){t.hyperspace(!1)}))}return t.prototype.update=function(){var t=this;Object.keys(this.keys).forEach((function(e){t.prev[e]=t.keys[e]})),this.touched&&this.fire(!1),this.touched=!this.touched},t.prototype.isPressed=function(t){return!1===this.prev[t]&&!0===this.keys[t]},t.prototype.wasPressed=function(t){return this.prev[t]&&!this.keys[t]},t.prototype.isDown=function(t){return this.keys[t]},t.prototype.isAnyPressed=function(){return!!Object.values(this.keys).filter((function(t){return t})).length},t.prototype.isRotateLeft=function(){return this.keys[e.Keys.ROTATE_LEFT]||this.keys[e.Keys.ROTATE_LEFT_A]},t.prototype.isRotateRight=function(){return this.keys[e.Keys.ROTATE_RIGHT]||this.keys[e.Keys.ROTATE_RIGHT_D]},t.prototype.isThrust=function(){return this.keys[e.Keys.THRUST]||this.keys[e.Keys.THRUST_W]},t.prototype.isFire=function(){return this.keys[e.Keys.FIRE]},t.prototype.isHyperspace=function(){return this.keys[e.Keys.HYPERSPACE]},t.prototype.wasRotateLeft=function(){return this.isPressed(e.Keys.ROTATE_LEFT)||this.isPressed(e.Keys.ROTATE_LEFT_A)},t.prototype.wasRotateRight=function(){return this.isPressed(e.Keys.ROTATE_RIGHT)||this.isPressed(e.Keys.ROTATE_RIGHT_D)},t.prototype.wasHyperspace=function(){return this.isPressed(e.Keys.HYPERSPACE)},t}();e._Key=o,e.Key=new o},488:(t,e)=>{"use strict";function n(t,e,n,i){return 8&n?[t[0]+(e[0]-t[0])*(i[3]-t[1])/(e[1]-t[1]),i[3]]:4&n?[t[0]+(e[0]-t[0])*(i[1]-t[1])/(e[1]-t[1]),i[1]]:2&n?[i[2],t[1]+(e[1]-t[1])*(i[2]-t[0])/(e[0]-t[0])]:1&n?[i[0],t[1]+(e[1]-t[1])*(i[0]-t[0])/(e[0]-t[0])]:null}function i(t,e){var n=0;return t[0]<e[0]?n|=1:t[0]>e[2]&&(n|=2),t[1]<e[1]?n|=4:t[1]>e[3]&&(n|=8),n}Object.defineProperty(e,"__esModule",{value:!0}),e.polygonclip=e.lineclip=void 0,e.lineclip=function(t,e,o){var r,s,a,u,l,c=t.length,d=i(t[0],e),h=[];for(o||(o=[]),r=1;r<c;r++){for(s=t[r-1],u=l=i(a=t[r],e);;){if(!(d|u)){h.push(s),u!==l?(h.push(a),r<c-1&&(o.push(h),h=[])):r===c-1&&h.push(a);break}if(d&u)break;d?d=i(s=n(s,a,d,e),e):u=i(a=n(s,a,u,e),e)}d=l}return h.length&&o.push(h),o},e.polygonclip=function(t,e){var o,r,s,a,u,l,c;for(r=1;r<=8;r*=2){for(o=[],a=!(i(s=t[t.length-1],e)&r),u=0;u<t.length;u++)(c=!(i(l=t[u],e)&r))!==a&&o.push(n(s,l,r,e)),c&&o.push(l),s=l,a=c;if(!(t=o).length)break}return o}},761:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.loop=void 0;var n,i=function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()},o=0,r=i(),s=1/60;e.loop=function(t){!function(t){var e=function(){for(n=i(),o+=Math.min(1,(n-r)/1e3);o>s;)t.update(s),o-=s;t.render(o),r=n,requestAnimationFrame(e)};e()}(t)}},93:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SIN=e.COS=e.RAD=void 0;var n={};e.RAD=n;var i={};e.COS=i;var o={};e.SIN=o;for(var r=Math.PI/180,s=0;s<=360;s++)n[s]=s*r,i[s]=Math.cos(n[s]),o[s]=Math.sin(n[s]),n[-s]=-s*r,i[-s]=Math.cos(n[-s]),o[-s]=Math.sin(n[-s])},574:function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Object2D=void 0;var r=n(981),s=n(242),a=n(93),u=n(464),l=function(t){function e(e,n){var i=t.call(this)||this;return i.angle=360,i.velocity=new u.Vector(0,0),i._xmin=0,i._xmax=0,i._ymin=0,i._ymax=0,i._width=0,i._height=0,i._score=0,i.origin=new u.Vector(e,n),i}return o(e,t),Object.defineProperty(e.prototype,"score",{get:function(){return this._score},set:function(t){this._score=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"points",{get:function(){return this._points},set:function(t){t.forEach((function(t){t.x*=r.default.objectScale,t.y*=r.default.objectScale})),this._points=t,this.calcBounds()},enumerable:!1,configurable:!0}),e.prototype.calcBounds=function(){var t=this;this._points.forEach((function(e){e.x<t._xmin&&(t._xmin=e.x),e.x>t._xmax&&(t._xmax=e.x),e.y<t._ymin&&(t._ymin=e.y),e.y>t._ymax&&(t._ymax=e.y)})),this._width=this._xmax-this._xmin,this._height=this._ymax-this._ymin},e.prototype.rotate=function(t){this.angle+=t,this.angle<1&&(this.angle+=360),this.angle>360&&(this.angle-=360);var e=a.COS[t],n=a.SIN[t];this.points.forEach((function(t){var i=e*t.x-n*t.y,o=n*t.x+e*t.y;t.x=i,t.y=o})),this.calcBounds()},e.prototype.move=function(t){t=t||1,this.origin.x+=this.velocity.x*t,this.origin.y+=this.velocity.y*t,this.origin.x>r.default.width&&(this.origin.x-=r.default.width),this.origin.x<0&&(this.origin.x+=r.default.width),this.origin.y>r.default.height&&(this.origin.y-=r.default.height),this.origin.y<0&&(this.origin.y+=r.default.height)},e.prototype.scale=function(t){this.points.forEach((function(e){e.x*=t,e.y*=t})),this.calcBounds()},e.prototype.draw=function(t,e){void 0===t&&(t=!0),void 0===e&&(e="rgba(255,255,255,.8)"),r.default.draw.vectorShape(this.points,this.origin.x,this.origin.y,e,t)},Object.defineProperty(e.prototype,"x",{get:function(){return this.origin.x+this._xmin},set:function(t){this.origin.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.origin.y+this._ymin},set:function(t){this.origin.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"vertices",{get:function(){var t=this;return this.points.map((function(e){return{x:t.origin.x+e.x,y:t.origin.y+e.y}}))},enumerable:!1,configurable:!0}),e.prototype.collided=function(t){return!!(t&&this.x<t.x+t.width&&this.x+this.width>t.x&&this.y<t.y+t.height&&this.height+this.y>t.y)},e.prototype.destroy=function(){for(var t in this.handlers)this.handlers[t]=null;this.handlers={}},e}(s.EventSource);e.Object2D=l},143:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Quadtree=void 0;var n=function(){function t(t,e,n,i){void 0===e&&(e=10),void 0===n&&(n=4),void 0===i&&(i=0),this.bounds=t,this.maxObjects=e,this.maxLevels=n,this.level=i,this.objects=[],this.nodes=[],this.width2=this.bounds.width/2,this.height2=this.bounds.height/2,this.xmid=this.bounds.x+this.width2,this.ymid=this.bounds.y+this.height2}return t.prototype.insert=function(t){var e=this;if(t){var n,i=0;if(this.nodes.length&&(n=this.getIndex(t)).length)n.forEach((function(n){e.nodes[n].insert(t)}));else if(this.objects.push(t),this.objects.length>this.maxObjects&&this.level<this.maxLevels){this.nodes.length||this.split();for(var o=function(){if((n=r.getIndex(r.objects[i])).length){var t=r.objects.splice(i,1)[0];n.forEach((function(n){e.nodes[n].insert(t)}))}else i+=1},r=this;i<this.objects.length;)o()}}},t.prototype.retrieve=function(t){var e=this;if(!t)return[];var n=this.getIndex(t),i=this.objects;if(this.nodes.length)if(n.length)n.forEach((function(n){i=i.concat(e.nodes[n].retrieve(t))}));else for(var o=0;o<this.nodes.length;o++)i=i.concat(this.nodes[o].retrieve(t));return i.filter((function(t,e,n){return n.indexOf(t)===e}))},t.prototype.clear=function(){this.objects=[];for(var t=0;t<this.nodes.length;t++)this.nodes[t]&&this.nodes[t].clear();this.nodes=[]},t.prototype.getIndex=function(t){if(!t)return[];var e=[],n=this.xmid,i=this.ymid,o=t.y<=i,r=t.y>i;if(t.x<=n)if(o){e.push(1);var s=!1;t.x+t.width>n&&(e.push(0),s=!0),t.y+t.height>i&&(e.push(2),s&&e.push(3))}else r&&(e.push(2),t.x+t.width>n&&e.push(3));else t.x>n&&(o?(e.push(0),t.y+t.height>i&&e.push(3)):e.push(3));return e},t.prototype.split=function(){var e=this,n=Math.round(this.width2),i=Math.round(this.height2),o=Math.round(this.bounds.x),r=Math.round(this.bounds.y),s=function(o,r){return new t({x:o,y:r,width:n,height:i},e.maxObjects,e.maxLevels,e.level+1)};this.nodes=[s(o+n,r),s(o,r),s(o,r+i),s(o+n,r+i)]},t}();e.Quadtree=n},403:function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Rock=e.RockSize=void 0;var r,s=n(981),a=n(574),u=n(464),l=n(882),c=n(578);!function(t){t[t.Small=5]="Small",t[t.Medium=10]="Medium",t[t.Large=20]="Large"}(r=e.RockSize||(e.RockSize={}));var d=function(t){function e(e,n,i,o,r){void 0===r&&(r=1);var a=t.call(this,e,n)||this;a.rotTimer=0,a.rock1=[[.5,-2],[2,-1],[2,-.7],[1.2,0],[2,1],[1,2],[.5,1.5],[-1,2],[-2,.7],[-2,-1],[-.5,-1],[-1,-2]],a.rock2=[[0,-1.5],[1,-2],[2,-1],[1,-.5],[2,.5],[1,2],[-.5,1.5],[-1,2],[-2,1],[-1.5,0],[-2,-1],[-1,-2]],a.rock3=[[0,-1],[1,-2],[2,-1],[1.5,0],[2,1],[1,2],[-1,2],[-2,1],[-2,-1],[-1,-2]],a.rocks=[a.rock1,a.rock2,a.rock3];var u=r*s.default.objectScale;a.velocity.x=i.x*u,a.velocity.y=i.y*u;var c=(0,l.random)(0,2),d=a.rocks[c];return a.points=d.map((function(t){return{x:t[0]*o,y:t[1]*o}})),a.size=o,a.rotate((0,l.random)(1,90)),a.rot=(0,l.random)(.01,1)%2==0?1:-1,a.timeToRot=(0,l.random)(1,5),a}return o(e,t),e.prototype.update=function(t){this.rotTimer+=1,this.move(t),this.rotTimer===this.timeToRot&&(this.rotate(this.rot),this.rotTimer=0)},e.prototype.render=function(){this.draw()},Object.defineProperty(e.prototype,"direction",{get:function(){var t=Math.atan2(this.velocity.y,this.velocity.x)*(180/Math.PI);return t=t>0?t:360+t,Math.floor(t)},enumerable:!1,configurable:!0}),e.prototype.split=function(){var t;switch(this.size){case r.Large:t=c.largeExplosion;break;case r.Medium:t=c.mediumExplosion;break;case r.Small:t=c.smallExplosion}var n=(0,l.randomFloat)(.7,1);if(t.rate(n),t.play(),this.size>r.Small){var i=(0,l.random)(this.direction,this.direction+80),o=(0,l.random)(this.direction-80,this.direction);i<0&&(i+=360),i>360&&(i-=360),o<0&&(o+=360),o>360&&(o-=360);var s=this.size===r.Large?r.Medium:r.Small,a=u.Vector.fromAngle(i),d=u.Vector.fromAngle(o),h=s===r.Medium?(0,l.random)(150,250):(0,l.random)(250,350),p=s===r.Medium?(0,l.random)(150,250):(0,l.random)(250,350);return[new e(this.origin.x,this.origin.y,a,s,h),new e(this.origin.x,this.origin.y,d,s,p)]}return[]},Object.defineProperty(e.prototype,"score",{get:function(){return this.size===r.Large?20:this.size===r.Medium?50:100},enumerable:!1,configurable:!0}),e}(a.Object2D);e.Rock=d},817:function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.ScoreMarker=void 0;var r=n(981),s=n(565),a=function(t){function e(e,n){var i=t.call(this,e.origin.x,e.origin.y)||this;return i.text=n,i.life=1,i.velocity=e.velocity,i}return o(e,t),e.prototype.render=function(){this.draw()},e.prototype.update=function(t){this.move(t),this.life-=t,this.life<=0&&this.destroy()},e.prototype.draw=function(){r.default.draw.text(this.text,this.origin.x,this.origin.y,50*this.life,(0,s.white)(this.life))},e.prototype.destroy=function(){this.life=0,this.trigger("expired")},e}(n(574).Object2D);e.ScoreMarker=a},981:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Screen=void 0;var i=n(565),o=function(){function t(){var t=this;this.x=0,this.y=0,this.canvas=document.getElementById("canvas"),this.ctx=this.canvas.getContext("2d"),this.draw=new i.Draw(this.ctx),this.init(),window.addEventListener("resize",(function(){t.init()}))}return t.prototype.init=function(){this.canvas.width=document.body.clientWidth,this.canvas.height=document.body.clientHeight,this.width=this.canvas.width,this.height=this.canvas.height,this.width2=this.width/2,this.height2=this.height/2,this.width>=1280?(this._fontXL=60,this._fontL=30,this._fontM=24,this._fontS=12,this._objectScale=1):this.width>=800?(this._fontXL=48,this._fontL=24,this._fontM=18,this._fontS=10,this._objectScale=.75):(this._fontXL=36,this._fontL=12,this._fontM=10,this._fontS=6,this._objectScale=.5),this._pointSize=4*this._objectScale;var t=120*this._objectScale;this._shipRect={x:this.width2-t,y:this.height2-t,width:2*t,height:2*t}},Object.defineProperty(t.prototype,"font",{get:function(){var t=this;return{get xlarge(){return t._fontXL},get large(){return t._fontL},get medium(){return t._fontM},get small(){return t._fontS}}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"objectScale",{get:function(){return this._objectScale},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pointSize",{get:function(){return this._pointSize},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shipRect",{get:function(){return this._shipRect},enumerable:!1,configurable:!0}),t.prototype.preShake=function(){this.ctx.save();var t=10*Math.random(),e=10*Math.random();this.ctx.translate(t,e)},t.prototype.postShake=function(){this.ctx.restore()},t}();e.Screen=o,e.default=new o},841:function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var i,o=0,r=e.length;o<r;o++)!i&&o in e||(i||(i=Array.prototype.slice.call(e,0,o)),i[o]=e[o]);return t.concat(i||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.Ship=void 0;var s=n(981),a=n(777),u=n(574),l=n(464),c=n(208),d=n(578),h=n(882),p=1e3*s.default.objectScale,f=1100*s.default.objectScale,_=150*s.default.objectScale,y=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.points=[{x:5,y:8},{x:0,y:20},{x:-5,y:8}],i}return o(e,t),e.prototype.update=function(){},e.prototype.render=function(){this.draw(!1)},e}(u.Object2D),v=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.moving=!1,i.rotating=!1,i.bulletCount=0,i.bulletTimer=0,i.shield=1,i.trails=[],i.flame=new y(e,n),i.points=[{x:0,y:-15},{x:10,y:10},{x:5,y:5},{x:-5,y:5},{x:-10,y:10}],i.angle=270,i}return o(e,t),e.prototype.render=function(){this.draw(),this.moving&&(0,h.random)(1,10)%2==0&&this.flame.draw(!1),this.trails.length&&this.trails.forEach((function(t){t.alpha>0&&(s.default.draw.shape(t.points,t.x,t.y,"rgba(255,0,255,".concat(t.alpha,")"),!0),s.default.draw.shape(t.points,t.x-1,t.y-1,"rgba(0,255,255,".concat(t.alpha,")"),!0),t.alpha-=.1)}))},e.prototype.update=function(t){this.move(t),this.flame.move(t),a.Key.isThrust()?(this.moving=!0,this.thrust()):this.moving=!1,a.Key.wasRotateLeft&&this.rotate(-1),a.Key.isRotateLeft()&&this.rotate(-5),a.Key.wasRotateRight&&this.rotate(1),a.Key.isRotateRight()&&this.rotate(5),this.rotating=a.Key.isRotateLeft()||a.Key.isRotateRight(),a.Key.isFire()&&this.fire(),a.Key.wasHyperspace()&&this.hyperspace(),this.bulletTimer>=0&&(this.bulletTimer-=t),this.moving&&(Math.abs(this.velocity.x)>200||Math.abs(this.velocity.y)>200)?this.trails.push({points:r([],this.points,!0),x:this.origin.x,y:this.origin.y,alpha:.5}):this.trails.length=0,this.moving||(this.velocity.friction(.005),this.flame.velocity=this.velocity)},e.prototype.rotate=function(e){t.prototype.rotate.call(this,e),this.flame.rotate(e)},e.prototype.thrust=function(){var t=l.Vector.fromAngle(this.angle,.1*_);this.velocity.magnitude<f&&(this.velocity.add(t),this.flame.velocity=this.velocity),d.thrust.play()},e.prototype.fire=function(){var t=this;if(this.bulletTimer<=0&&this.bulletCount<10){d.fire.play(),this.bulletTimer=.1,this.bulletCount++;var e=l.Vector.fromAngle(this.angle),n=new c.Bullet(this.origin,e,1);n.on("expired",(function(){t.bulletCount--}));var i=n.velocity.copy();i.scale(20,20),n.origin.add(i);var o=0;this.velocity.dot(n.velocity)>0&&(o=this.velocity.magnitude),o=Math.max(p,o+p),n.velocity.scale(o,o);var r=(this.angle+180)%360,s=l.Vector.fromAngle(r,5);this.origin.add(s),this.flame.origin.add(s),this.trigger("fire",n)}},e.prototype.hyperspace=function(){var t=(0,h.random)(40,s.default.width-40),e=(0,h.random)(40,s.default.height-40);this.velocity=new l.Vector(0,0),this.flame.velocity=this.velocity,this.x=this.flame.x=t,this.y=this.flame.y=e},e.prototype.destroy=function(){this.trigger("expired")},e}(u.Object2D);e.Ship=v},301:function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Shockwave=void 0;var r=n(981),s=n(574),a=n(882),u=function(t){function e(e,n,i,o,r){void 0===r&&(r=1);var s=t.call(this,e,n)||this;return s.velocity=i,s.size=o,s.multiplier=r,s.life=1,s.frame=0,s.radius=1,s.rocks=[],s}return o(e,t),e.prototype.update=function(t){this.frame++,this.radius=this.size*(this.frame/10),this.life-=t,this.origin.x+=this.velocity.x*t,this.origin.y+=this.velocity.y*t,this.life<=.1&&(this.rocks.length=0,this.trigger("expired"))},e.prototype.render=function(t){if(1===this.frame){var e=this.size*(0,a.random)(25,55)/10,n=r.default.ctx;n.beginPath(),n.arc(this.origin.x,this.origin.y,e,0,2*Math.PI,!1),n.fillStyle="rgba(255, 255, 255, ".concat((0,a.random)(.2,.5),")"),n.fill(),n.stroke(),n.closePath(),r.default.draw.scanlines()}r.default.draw.circle(this.origin.x,this.origin.y,this.radius,"rgba(128,128,128,".concat(.3-this.frame/100,")"))},Object.defineProperty(e.prototype,"x",{get:function(){return this.origin.x-this.radius},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.origin.y-this.radius},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return 2*this.radius},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return 2*this.radius},enumerable:!1,configurable:!0}),e}(s.Object2D);e.Shockwave=u},578:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Sound=e.getPowerup=e.powerup=e.extraLife=e.thumpHi=e.thumpLo=e.smallAlien=e.largeAlien=e.smallExplosion=e.mediumExplosion=e.largeExplosion=e.alienFire=e.thrust=e.fire=e.all=void 0;var i=n(766),o=.5,r=!0;function s(t){var n=0,o=new i.Howl(t);o.on("end",(function(){t.max&&n--}));var s=o.play.bind(o);return t.max&&t.max,o.play=function(){r&&(t.max?n<t.max&&(s(),n++):s())},o._origVolume=t.volume,e.all.push(o),o}e.all=[],e.fire=s({src:["./assets/fire.wav"],volume:.2}),e.thrust=s({src:["./assets/thrust.wav"],volume:.3}),e.alienFire=s({src:["./assets/sfire.wav"],volume:o}),e.largeExplosion=s({src:["./assets/explode1.wav"],volume:o,max:2}),e.mediumExplosion=s({src:["./assets/explode2.wav"],volume:o,max:2}),e.smallExplosion=s({src:["./assets/explode3.wav"],volume:o,max:2}),e.largeAlien=s({src:["./assets/lsaucer.wav"],volume:o,loop:!0}),e.smallAlien=s({src:["./assets/ssaucer.wav"],volume:o,loop:!0}),e.thumpLo=s({src:["./assets/thumplo.wav"],volume:.3}),e.thumpHi=s({src:["./assets/thumphi.wav"],volume:.3}),e.extraLife=s({src:["./assets/life.wav"],volume:.5}),e.powerup=s({src:["./assets/powerup.wav"],volume:.5}),e.getPowerup=s({src:["./assets/getpowerup.wav"],volume:.5}),e.Sound={on:function(){r=!0,e.all.forEach((function(t){return t.volume(t._origVolume)}))},off:function(){r=!1,e.all.forEach((function(t){return t.volume(0)}))},stop:function(){e.all.forEach((function(t){return t.stop()}))}}},958:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Thumper=void 0;var i=n(578),o=function(){function t(){this.lo=!0,this.reset()}return t.prototype.reset=function(){this.thumpBeatTimer=0,this.thumpBeat=1,this.thumpTimer=0,this.thumpTime=10,this.max=!1},t.prototype.update=function(t){this.thumpTimer+=t,this.thumpBeatTimer+=t,this.thumpBeat-=2e-4,this.thumpBeat<=.15&&(this.thumpBeat=.15),this.thumpBeatTimer>=this.thumpBeat&&(this.lo?i.thumpLo.play():i.thumpHi.play(),this.lo=!this.lo,this.thumpBeatTimer=0)},t}();e.Thumper=o},882:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.randomFloat=e.random=void 0,e.random=function(t,e){return Math.floor(Math.random()*(e-t+1))+t},e.randomFloat=function(t,e){return Math.random()*(e-t)+t}},464:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Vector=void 0;for(var n={},i=2*Math.PI,o=0;o<=360;o++){var r=i*(o/360);n[o]={x:Math.cos(r),y:Math.sin(r)}}var s=function(){function t(t,e){this.x=t,this.y=e}return t.fromAngle=function(e,i){return void 0===i&&(i=1),new t(n[e].x*i,n[e].y*i)},t.fromXY=function(e,n,i){void 0===i&&(i=1);var o=e.x-n.x,r=e.y-n.y,s=Math.sqrt(o*o+r*r);return new t((o/=s)*i,(r/=s)*i)},t.prototype.add=function(t){this.x+=t.x,this.y+=t.y},t.prototype.copy=function(){return new t(this.x,this.y)},t.prototype.dot=function(t){return this.x*t.x+this.y*t.y},t.prototype.friction=function(t){this.x-=this.x*t,this.y-=this.y*t},t.prototype.scale=function(t,e){this.x*=t,this.y*=e},Object.defineProperty(t.prototype,"magnitude",{get:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},enumerable:!1,configurable:!0}),t}();e.Vector=s},54:function(t,e,n){"use strict";var i=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var i,o=0,r=e.length;o<r;o++)!i&&o in e||(i||(i=Array.prototype.slice.call(e,0,o)),i[o]=e[o]);return t.concat(i||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.World=void 0;var o=n(841),r=n(125),s=n(972),a=n(301),u=n(568),l=n(403),c=n(817),d=n(464),h=n(882),p=n(981),f=n(578),_=function(){function t(t){this.level=7,this.extraLifeScore=0,this.score=0,this.lives=3,this.shipBullets=[],this.alienBullets=[],this.shockwaves=[],this.rocks=[],this.scenery=[],this.shipTimer=0,this.alienTimer=0,this.levelTimer=0,this.gameOverTimer=0,this.shakeTimer=0,this.powerupTimer=0,this.dramticPauseTimer=0,this.gameOver=!1,this.started=!1,this.highscore=t}return Object.defineProperty(t.prototype,"objects",{get:function(){return i(i(i(i(i([this.ship,this.alien,this.powerup],this.shipBullets,!0),this.alienBullets,!0),this.rocks,!0),this.shockwaves,!0),this.scenery,!0)},enumerable:!1,configurable:!0}),t.prototype.update=function(t){this.dramticPauseTimer>0?this.dramticPauseTimer--:(this.shakeTimer>0&&(this.shakeTimer-=t),this.powerup||(this.powerupTimer+=t),this.objects.forEach((function(e){e&&e.update(t)})))},t.prototype.render=function(t){this.shakeTimer>0&&p.default.preShake(),this.objects.forEach((function(e){e&&e.render(t)})),this.shakeTimer>0&&p.default.postShake()},t.prototype.startLevel=function(){this.level++,this.levelTimer=0,this.powerupTimer=0,this.alienTimer||(this.alienTimer=(0,h.random)(10,15)),this.scenery.length=0,this.shipBullets.forEach((function(t){return t.destroy()})),this.addRocks()},t.prototype.addRocks=function(){for(var t=Math.min(this.level+3,10),e=20,n=0;n<t;n++){var i=(0,h.random)(1,4),o=d.Vector.fromAngle((0,h.random)(1,360)),r=void 0,s=void 0;switch(i){case 1:r=(0,h.random)(e,p.default.width-e),s=(0,h.random)(e,40);break;case 2:r=(0,h.random)(p.default.width-40,p.default.width-e),s=(0,h.random)(p.default.height-e,p.default.height-e);break;case 3:r=(0,h.random)(e,p.default.width-e),s=(0,h.random)(p.default.height-e,p.default.height-e);break;default:r=(0,h.random)(e,40),s=(0,h.random)(p.default.height-e,p.default.height-e)}var a=new l.Rock(r,s,o,l.RockSize.Large,150);this.rocks.push(a)}},t.prototype.addShip=function(t,e){var n=this;this.ship=new o.Ship(t,e),this.ship.on("fire",(function(t,e){e.on("expired",(function(){n.shipBullets=n.shipBullets.filter((function(t){return t!==e}))})),n.shipBullets.push(e)})),this.ship.on("expired",(function(){n.lives--,n.ship=null,n.shipBullets.length=0}))},t.prototype.createExplosion=function(t,e,n){var i=this;if(void 0===e&&(e=100),void 0===n&&(n=1),t){var o=new s.Explosion(t.origin.x,t.origin.y,e);this.addScenery(o);var r=new a.Shockwave(t.origin.x,t.origin.y,t.velocity,e,n);return r.on("expired",(function(){i.shockwaves=i.shockwaves.filter((function(t){return t!==r}))})),this.shockwaves.push(r),{explosion:o,shockwave:r}}},t.prototype.shipDestroyed=function(){this.ship&&(f.largeExplosion.play(),this.createExplosion(this.ship),this.addFlash(5),this.ship.destroy())},t.prototype.alienDestroyed=function(){this.alien&&(this.addFlash(5),this.createExplosion(this.alien),this.alien.destroy())},t.prototype.addFlash=function(t){var e=new u.Flash(t);this.addScenery(e)},t.prototype.addScenery=function(t){var e=this;t.on("expired",(function(){e.scenery=e.scenery.filter((function(e){return e!==t}))})),this.scenery.push(t)},t.prototype.rockDestroyed=function(t,e){var n;void 0===e&&(e=1);var i=this.createExplosion(t,5*t.size,e),o=t.split();this.rocks=this.rocks.filter((function(e){return e!==t})),(n=this.rocks).push.apply(n,o),this.shockwaves.forEach((function(e){e.rocks=e.rocks.filter((function(e){return e!==t}))})),i.shockwave.rocks=o,t=null},t.prototype.addAlien=function(){var t=this,e=Math.min(this.level,14),n=!1,i=f.largeAlien;if(this.score>=4e4)n=!0;else switch(e){case 7:n=this.levelTimer>60&&2===(0,h.random)(1,3);break;case 8:n=this.levelTimer>30&&(0,h.random)(1,10)%2==0;break;default:n=(0,h.random)(1,10)<=e+2}n?(i=f.smallAlien,this.alien=new r.SmallAlien(this.ship)):this.alien=new r.BigAlien,i.play(),this.alien.on("expired",(function(){f.alienFire.stop(),i.stop(),f.largeExplosion.play(),t.alien=null,t.alienBullets.forEach((function(t){return t.destroy()})),t.alienBullets.length=0})),this.alien.on("fire",(function(e,n){f.alienFire.play(),n.on("expired",(function(){t.alienBullets=t.alienBullets.filter((function(t){return t!==n}))})),t.alienBullets.push(n)}))},t.prototype.addScore=function(t){this.score+=t.score,this.extraLifeScore+=t.score,this.score>this.highscore&&(this.highscore=this.score),this.extraLifeScore>=1e4&&(this.lives++,this.extraLifeScore-=1e4,f.extraLife.play());var e=new c.ScoreMarker(t,"+".concat(t.score));this.addScenery(e)},t.prototype.addPowerup=function(){f.getPowerup.play()},t.prototype.shake=function(){this.shakeTimer<=0&&(this.shakeTimer=.5)},t.prototype.tryPlaceShip=function(t){if(this.shipTimer+=t,!(this.shipTimer<=2)){var e=p.default.shipRect,n=!1;this.rocks.forEach((function(t){n=n||t.collided(e)})),this.alien&&(n=n||this.alien.collided(e)),n||(this.shipTimer=0,this.addShip(p.default.width2,p.default.height2))}},t.prototype.updateAlienTimer=function(t){Math.min(this.level,7),this.alien||(this.alienTimer-=t,this.alienTimer<=0&&(this.addAlien(),this.alienTimer=(0,h.random)(10,15)))},t.prototype.shouldTryToPlaceShip=function(){return!!this.shipTimer||!this.ship&&!!this.lives},t.prototype.shouldCheckForNextLevel=function(){return!this.rocks.length&&!!this.lives},t.prototype.shouldCheckCollisions=function(){return!!this.ship||!!this.shipBullets.length},t}();e.World=_}},e={};function n(i){var o=e[i];if(void 0!==o)return o.exports;var r=e[i]={exports:{}};return t[i].call(r.exports,r,r.exports,n),r.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{"use strict";var t=n(761),e=n(777),i=n(54),o=n(578),r=n(646),s=n(139),a=n(320),u=n(39),l=n(238),c=new(function(){function t(){this.lastScore=0,this.init()}return t.prototype.init=function(){var t=this;this.attractMode=new s.AttractMode(new i.World(r.Highscores.top.score),this.lastScore),this.currentMode=this.attractMode,this.attractMode.on("done",(function(){t.gameMode=new u.GameMode(new i.World(r.Highscores.top.score)),t.currentMode=t.gameMode,t.gameMode.on("done",(function(e,n){t.lastScore=n.score,r.Highscores.qualifies(n.score)?(t.initialsMode=new a.InitialsMode(n.score),t.currentMode=t.initialsMode,t.initialsMode.on("done",(function(){t.init()}))):t.init()}))}))},t.prototype.update=function(t){e.Key.isPressed(e.Keys.GOD)&&(l.default.god=!l.default.god),e.Key.isPressed(e.Keys.DEBUG)&&(l.default.debug=!l.default.debug),e.Key.isPressed(e.Keys.MONITOR_BURN)&&(l.default.burn=!l.default.burn),e.Key.isPressed(e.Keys.PAUSE)&&(l.default.paused=!l.default.paused,l.default.paused?o.Sound.off():o.Sound.on()),l.default.paused||this.currentMode.update(t)},t.prototype.render=function(t){this.currentMode.render(t),e.Key.update()},t}());setTimeout((function(){(0,t.loop)(c)}),1e3)})()})();