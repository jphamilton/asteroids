!function(t){function e(r){if(i[r])return i[r].exports;var n=i[r]={exports:{},id:r,loaded:!1};return t[r].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){"use strict";var r=i(1),n=i(2),o=i(12),s=i(14),h="start",a=new n.StartState,u=new o.GameState,c=function(){function t(){}return t.prototype.update=function(t){switch(h){case"start":a.update(t),s.Key.isDown(s.Key.ONE)&&(h="game");break;case"game":u.update(t)}},t.prototype.render=function(t){switch(h){case"start":a.render(t);break;case"game":u.render(t)}},t}();e.Asteroids=c;var l=new c;setTimeout(function(){r.loop(l)},1e3)},function(t,e){"use strict";var i,r=function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()},n=0,o=r(),s=1/60,h=function(t){var e=function(){for(i=r(),n+=Math.min(1,(i-o)/1e3);n>s;)n-=s,t.update(s);t.render(n),o=i,requestAnimationFrame(e)};e()};e.loop=function(t){h(t)}},function(t,e,i){"use strict";var r=i(3),n=i(5),o=i(6),s=i(9),h=function(){function t(){this.blink=0,this.showPushStart=!0,this.modeTimer=0,this.alienTimer=0,this.demo=!1,this.demoStarted=!1,this.alienBullets=[],this.highscore=n.highscores.length?n.highscores[0].score:0;var t=o.RockFactory.create(20,r.default.height-40,o.RockSize.Large);t.vx=2,t.vy=-2;var e=o.RockFactory.create(r.default.width-40,40,o.RockSize.Large);e.vx=-2,e.vy=1;var i=o.RockFactory.create(r.default.width-80,r.default.height-80,o.RockSize.Large);i.vx=1,i.vy=-1.5;var s=o.RockFactory.create(r.default.width-80,r.default.height-120,o.RockSize.Large);s.vx=-1,s.vy=1.5,this.rocks=[t,e,i,s]}return t.prototype.update=function(t){var e=this;this.modeTimer+=t,this.modeTimer>=15&&(this.modeTimer=0,this.demo=!this.demo,this.demo&&!this.demoStarted&&(this.demoStarted=!0)),this.demoStarted&&!this.alien&&(this.alienTimer+=t),this.alienTimer>=7&&(this.alien=new s.BigAlien(0,0),this.alien.onDone=function(){e.alien=null,e.alienBullets=[]},this.alien.onFire=function(t){t.onDone=function(){e.alienBullets=e.alienBullets.filter(function(e){return e!==t})},e.alienBullets.push(t)},this.alienTimer=0),this.blink+=t,this.blink>=.4&&(this.blink=0,this.showPushStart=!this.showPushStart),this.updateDemo(t)},t.prototype.render=function(t){this.demo?this.renderDemo():this.renderStart()},t.prototype.renderStart=function(){this.drawBackground(),this.drawPushStart(),this.drawHighScores()},t.prototype.updateDemo=function(t){this.rocks.forEach(function(e){e.update(t)}),this.alien&&this.alien.update(t),this.alienBullets.forEach(function(e){e.update(t)})},t.prototype.renderDemo=function(){this.drawBackground(),this.drawPushStart(),this.rocks.forEach(function(t){t.render()}),this.alien&&this.alien.render(),this.alienBullets.forEach(function(t){t.render()})},t.prototype.drawBackground=function(){r.default.draw.background(),r.default.draw.scorePlayer1(0),r.default.draw.highscore(this.highscore),r.default.draw.copyright()},t.prototype.drawHighScores=function(){var t=r.default.width/2;r.default.draw.text2("high scores","30pt",function(e){return{x:t-e/2,y:200}});for(var e=function(e){var o=280+40*e,s=i.pad(e+1," ",3)+". "+i.pad(n.highscores[e].score," ",6)+" "+n.highscores[e].initials;r.default.draw.text2(s,"30pt",function(e){return{x:t-e/2,y:o}})},i=this,o=0;o<n.highscores.length;o++)e(o)},t.prototype.drawPushStart=function(){var t=r.default.width/2;this.showPushStart&&r.default.draw.text2("push start","30pt",function(e){return{x:t-e/2,y:120}})},t.prototype.pad=function(t,e,i){for(t=t.toString();t.length<i;)t=e+t;return t},t}();e.StartState=h},function(t,e,i){"use strict";var r=i(4),n=function(){function t(){var t=this;this.canvas=document.getElementById("canvas"),this.ctx=this.canvas.getContext("2d"),this.draw=new r.Draw(this.ctx),this.init(),window.addEventListener("resize",function(){t.init()})}return t.prototype.init=function(){this.canvas.width=document.body.clientWidth,this.canvas.height=document.body.clientHeight,this.width=this.canvas.width,this.height=this.canvas.height},t}();e.Screen=n,Object.defineProperty(e,"__esModule",{value:!0}),e.default=new n},function(t,e,i){"use strict";var r=i(3),n="rgba(255,255,255,.8)",o=function(){function t(t){this.ctx=t}return t.prototype.line=function(t,e,i,r){void 0===i&&(i=n),void 0===r&&(r=2);var o=this.ctx;o.beginPath(),o.strokeStyle=i,o.lineWidth=r,o.moveTo(t.x,t.y),o.lineTo(e.x,e.y),o.stroke(),o.closePath()},t.prototype.shape=function(t,e,i,r){void 0===r&&(r=n);for(var o,s,h=0;h<t.length-1;h++)o={x:e+t[h].x,y:i+t[h].y},s={x:e+t[h+1].x,y:i+t[h+1].y},this.line(o,s,r,2)},t.prototype.rect=function(t,e,i){var r=this.ctx;r.beginPath(),r.fillStyle=i,r.fillRect(t.x,t.y,e.x,e.y),r.stroke(),r.closePath()},t.prototype.point=function(t,e){void 0===e&&(e=n),this.rect(t,{x:4,y:4},e)},t.prototype.background=function(){this.rect({x:0,y:0},{x:r.default.width,y:r.default.height},"#000000")},t.prototype.text=function(t,e,i,r){var o=this.ctx;o.save(),o.font=r+" hyperspace",o.textBaseline="middle",o.lineWidth=1,o.strokeStyle=n,o.strokeText(t,e,i),o.restore()},t.prototype.text2=function(t,e,i){var r=this.ctx;r.save(),r.font=e+" hyperspace",r.textBaseline="middle",r.lineWidth=1,r.strokeStyle=n;var o=r.measureText(t).width,s=i(o);r.strokeText(t,s.x,s.y),r.restore()},t.prototype.scorePlayer1=function(t){for(var e=t.toString();e.length<2;)e="0"+e;this.text(e,100,20,"24pt")},t.prototype.highscore=function(t){for(var e=t.toString();e.length<2;)e="0"+e;this.text2(e,"12pt",function(t){return{x:r.default.width/2-t/2,y:20}})},t.prototype.copyright=function(){this.text2(String.fromCharCode(169)+" 1979 Atari INC","12pt",function(t){return{x:r.default.width/2-t/2,y:r.default.height-20}})},t}();e.Draw=o},function(t,e){"use strict";e.highscores=[{score:20140,initials:"J H"},{score:20050,initials:"O A"},{score:19930,initials:"N M"},{score:19870,initials:"  I"},{score:19840,initials:"P L"},{score:19790,initials:"A T"},{score:19700,initials:"U O"},{score:19660,initials:"L N"},{score:190,initials:"GAM"},{score:70,initials:"ES "}]},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},n=i(7),o=i(11),s=[[.5,-2],[2,-1],[2,-.7],[1.2,0],[2,1],[1,2],[.5,1.5],[-1,2],[-2,.7],[-2,-1],[-.5,-1],[-1,-2],[.5,-2]],h=[[0,-1.5],[1,-2],[2,-1],[1,-.5],[2,.5],[1,2],[-.5,1.5],[-1,2],[-2,1],[-1.5,0],[-2,-1],[-1,-2],[0,-1.5]],a=[[0,-1],[1,-2],[2,-1],[1.5,0],[2,1],[1,2],[-1,2],[-2,1],[-2,-1],[-1,-2],[0,-1]],u=[s,h,a];!function(t){t[t.Small=5]="Small",t[t.Medium=10]="Medium",t[t.Large=20]="Large"}(e.RockSize||(e.RockSize={}));var c=(e.RockSize,function(){function t(){}return t.prototype.create=function(t,e,i){var r=o.random(0,2),n=u[r],s=n.map(function(t){return{x:t[0],y:t[1]}}),h=new l(s,t,e,i);return h},t}());e._RockFactory=c,e.RockFactory=new c;var l=function(t){function e(e,i,r,n){void 0===n&&(n=1);var s=t.call(this,i,r)||this;return s.rotTimer=0,s.rot=Math.floor(2*Math.random())+1,s.rotate(o.random(1,90)),s.rot=o.random(1,10)%2===0?1:-1,s.points=e,s.scale(n),s}return r(e,t),e.prototype.init=function(){return this.points},e.prototype.update=function(t){this.rotTimer+=1,this.move(),5===this.rotTimer&&(this.rotate(this.rot),this.rotTimer=0)},e.prototype.render=function(){this.draw()},e}(n.Object2D);e.Rock=l},function(t,e,i){"use strict";var r=i(8),n=i(3),o=function(){function t(t,e){this.color="rgba(255,255,255,.8)",this.angle=360,this.vx=0,this.vy=0,this.x=t,this.y=e,this.points=this.init()}return t.prototype.rotate=function(t){this.angle+=t,this.angle<1&&(this.angle+=360),this.angle>360&&(this.angle-=360);var e=r.COS[t],i=r.SIN[t];this.points.forEach(function(t){var r=e*t.x-i*t.y,n=i*t.x+e*t.y;t.x=r,t.y=n})},t.prototype.move=function(){this.x+=this.vx,this.y+=this.vy,this.x>n.default.width&&(this.x-=n.default.width),this.x<0&&(this.x+=n.default.width),this.y>n.default.height&&(this.y-=n.default.height),this.y<0&&(this.y+=n.default.height)},t.prototype.scale=function(t){this.points.forEach(function(e){e.x*=t,e.y*=t}),this.init()},t.prototype.draw=function(){n.default.draw.shape(this.points,this.x,this.y,this.color)},Object.defineProperty(t.prototype,"speed",{get:function(){return Math.sqrt(Math.pow(this.vx,2)+Math.pow(this.vy,2))},enumerable:!0,configurable:!0}),t}();e.Object2D=o},function(t,e){"use strict";var i={};e.RAD=i;var r={};e.COS=r;var n={};e.SIN=n;for(var o=Math.PI/180,s=1;s<=360;s++)i[s]=s*o,r[s]=Math.cos(i[s]),n[s]=Math.sin(i[s]),i[-s]=-s*o,r[-s]=Math.cos(i[-s]),n[-s]=Math.sin(i[-s])},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},n=i(3),o=i(7),s=i(10),h=i(11),a=3,u=function(t){function e(e,i){var r=t.call(this,e,i)||this;return r.moveTimer=0,r.bulletTimer=1,r.bulletCount=0,r.moveTime=2,r.vy=0,r.y=h.random(100,n.default.height-100),r.y%2===0?(r.x=40,r.vx=3):(r.x=n.default.width-40,r.vx=-3),r.scale(7),r}return r(e,t),e.prototype.init=function(){return[{x:.5,y:-2},{x:1,y:-1},{x:2.5,y:0},{x:1,y:1},{x:-1,y:1},{x:-2.5,y:0},{x:-1,y:-1},{x:-.5,y:-2},{x:.5,y:-2}]},e.prototype.update=function(t){if(this.move(),this.x>=n.default.width||this.x<=0)return void this.onDone();if(this.moveTimer+=t,this.moveTimer>=1&&0!==this.vy&&(this.vy=0,this.moveTimer=0),this.moveTimer>=this.moveTime){var e=h.random(1,20)%2===0;e&&(this.vy=this.x%2===0?this.vx:-this.vx),this.moveTimer=0,this.moveTime++}if(this.bulletTimer+=t,this.bulletTimer>=1&&this.bulletCount<=a){var i=new s.Bullet(this.x,this.y,h.random(1,360));i.vx*=10,i.vy*=10,this.onFire(i),this.bulletTimer=0}},e.prototype.render=function(){this.draw()},e.prototype.draw=function(){t.prototype.draw.call(this),n.default.draw.shape([this.points[1],this.points[6]],this.x,this.y),n.default.draw.shape([this.points[2],this.points[5]],this.x,this.y)},e}(o.Object2D);e.BigAlien=u},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},n=i(3),o=i(8),s=i(7),h=function(t){function e(e,i,r){var n=t.call(this,e,i)||this;return n.life=1.25,n.vx=o.SIN[r],n.vy=-o.COS[r],n}return r(e,t),e.prototype.init=function(){return[{x:this.x,y:this.y}]},e.prototype.render=function(){this.draw()},e.prototype.update=function(t){this.move(),this.life-=t,this.life<=0&&this.onDone()},e.prototype.draw=function(){n.default.draw.point({x:this.x,y:this.y})},e}(s.Object2D);e.Bullet=h},function(t,e){"use strict";function i(t,e){return Math.floor(Math.random()*e)+t}e.random=i},function(t,e,i){"use strict";var r=i(13),n=i(3),o=i(5),s=function(){function t(){var t=this;this.level=1,this.score=0,this.lives=3,this.shipBullets=[],this.extraLives=[],this.ship=new r.Ship(n.default.width/2,n.default.height/2),this.ship.onFire=function(e){e.onDone=function(){t.shipBullets=t.shipBullets.filter(function(t){return t!==e})},t.shipBullets.push(e)};for(var e=0;e<this.lives;e++){var i=new r.Ship(80+20*e,55);this.extraLives.push(i)}this.highscore=o.highscores.length?o.highscores[0].score:0}return t.prototype.update=function(t){this.ship.update(t);for(var e=0;e<this.shipBullets.length;e++)this.shipBullets[e].update(t)},t.prototype.render=function(t){n.default.draw.background(),n.default.draw.copyright(),n.default.draw.scorePlayer1(this.score),n.default.draw.highscore(this.highscore),this.drawExtraLives(),this.ship.render();for(var e=0;e<this.shipBullets.length;e++)this.shipBullets[e].render()},t.prototype.drawExtraLives=function(){for(var t=Math.min(this.lives,10),e=0;e<t;e++){var i=this.extraLives[e];i.render(0)}},t}();e.GameState=s},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},n=i(14),o=i(3),s=i(7),h=i(10),a=.2,u=.007,c=5,l=15,d=4,f=function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e.prototype.init=function(){return[{x:5,y:8},{x:0,y:20},{x:-5,y:8}]},e.prototype.update=function(){},e.prototype.render=function(){this.draw()},e}(s.Object2D),p=function(t){function e(e,i){var r=t.call(this,e,i)||this;return r.moving=!1,r.bulletTimer=0,r.bulletCount=0,r.angle=360,r.flame=new f(e,i),r}return r(e,t),e.prototype.init=function(){return[{x:0,y:-15},{x:10,y:10},{x:5,y:5},{x:-5,y:5},{x:-10,y:10},{x:0,y:-15}]},e.prototype.render=function(){o.default.draw.shape(this.points,this.x,this.y,this.color),this.moving&&(Math.floor(10*Math.random())+1)%2===0&&this.flame.draw()},e.prototype.update=function(t){this.move(),this.flame.move(),n.Key.isDown(n.Key.UP)?(this.moving=!0,this.thrust()):this.moving=!1,n.Key.isDown(n.Key.LEFT)&&(this.rotate(-c),this.flame.rotate(-c)),n.Key.isDown(n.Key.RIGHT)&&(this.rotate(c),this.flame.rotate(c)),this.bulletTimer>0&&(this.bulletTimer-=t),n.Key.isDown(n.Key.CTRL)&&this.bulletTimer<=0&&(this.bulletTimer=.3,this.fire()),this.vx-=this.vx*u,this.vy-=this.vy*u,this.flame.vx=this.vx,this.flame.vy=this.vy},e.prototype.thrust=function(){var t=2*Math.PI*(this.angle/360),e=Math.sin(t),i=Math.cos(t);this.vx>=-l&&this.vx<=l&&(this.vx+=e*a,this.flame.vx=this.vx),this.vy>=-l&&this.vy<=l&&(this.vy-=i*a,this.flame.vy=this.vy)},e.prototype.fire=function(){if(this.bulletCount<=d){var t=new h.Bullet(this.x,this.y,this.angle);t.x+=20*t.vx,t.y+=20*t.vy;var e=0,i=this.vx*t.vx+this.vy*t.vy;i>0&&(e=this.speed),t.vx*=10+e,t.vy*=10+e,this.onFire(t)}},e}(s.Object2D);e.Ship=p},function(t,e){"use strict";e.Key={_pressed:{},LEFT:37,UP:38,RIGHT:39,SHIFT:16,CTRL:17,ONE:49,isDown:function(t){return this._pressed[t]},onKeydown:function(t){this._pressed[t.keyCode]=!0},onKeyup:function(t){delete this._pressed[t.keyCode]}},window.addEventListener("keyup",function(t){e.Key.onKeyup(t)},!1),window.addEventListener("keydown",function(t){e.Key.onKeydown(t)},!1)}]);