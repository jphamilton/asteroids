!function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},i.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/build/",i(i.s=32)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(11),o=function(){function t(){var t=this;this.x=0,this.y=0,this.canvas=document.getElementById("canvas"),this.ctx=this.canvas.getContext("2d"),this.draw=new n.Draw(this.ctx),this.init(),window.addEventListener("resize",function(){t.init()})}return t.prototype.init=function(){this.canvas.width=document.body.clientWidth,this.canvas.height=document.body.clientHeight,this.width=this.canvas.width,this.height=this.canvas.height,this.width2=this.width/2,this.height2=this.height/2,this.width>=1280?(this._fontXL=60,this._fontL=30,this._fontM=24,this._fontS=12,this._objectScale=1):this.width>=800?(this._fontXL=48,this._fontL=24,this._fontM=18,this._fontS=10,this._objectScale=.75):(this._fontXL=36,this._fontL=12,this._fontM=10,this._fontS=6,this._objectScale=.5),this._pointSize=4*this._objectScale;var t=120*this._objectScale;this._shipRect={x:this.width2-t,y:this.height2-t,width:2*t,height:2*t}},Object.defineProperty(t.prototype,"font",{get:function(){var t=this;return{get xlarge(){return t._fontXL},get large(){return t._fontL},get medium(){return t._fontM},get small(){return t._fontS}}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"objectScale",{get:function(){return this._objectScale},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pointSize",{get:function(){return this._pointSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shipRect",{get:function(){return this._shipRect},enumerable:!0,configurable:!0}),t.prototype.preShake=function(){this.ctx.save();var t=10*Math.random(),e=10*Math.random();this.ctx.translate(t,e)},t.prototype.postShake=function(){this.ctx.restore()},t}();e.Screen=o,e.default=new o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.random=function(t,e){return Math.floor(Math.random()*(e-t+1))+t},e.randomFloat=function(t,e){return Math.random()*(e-t)+t}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});for(var n={},o=2*Math.PI,r=0;r<=360;r++){var s=o*(r/360);n[r]={x:Math.cos(s),y:Math.sin(s)}}var a=function(){function t(t,e){this.x=t,this.y=e}return t.fromAngle=function(e,i){return void 0===i&&(i=1),new t(n[e].x*i,n[e].y*i)},t.fromXY=function(e,i,n){void 0===n&&(n=1);var o=e.x-i.x,r=e.y-i.y,s=Math.sqrt(o*o+r*r);return new t((o/=s)*n,(r/=s)*n)},t.prototype.add=function(t){this.x+=t.x,this.y+=t.y},t.prototype.copy=function(){return new t(this.x,this.y)},t.prototype.dot=function(t){return this.x*t.x+this.y*t.y},t.prototype.friction=function(t){this.x-=this.x*t,this.y-=this.y*t},t.prototype.scale=function(t,e){this.x*=t,this.y*=e},Object.defineProperty(t.prototype,"magnitude",{get:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},enumerable:!0,configurable:!0}),t}();e.Vector=a},function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),s=i(5),a=i(28),u=i(2),h=function(t){function e(e,i){var n=t.call(this)||this;return n.angle=360,n.velocity=new u.Vector(0,0),n._xmin=0,n._xmax=0,n._ymin=0,n._ymax=0,n._width=0,n._height=0,n._score=0,n.origin=new u.Vector(e,i),n}return o(e,t),Object.defineProperty(e.prototype,"score",{get:function(){return this._score},set:function(t){this._score=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"points",{get:function(){return this._points},set:function(t){t.forEach(function(t){t.x*=r.default.objectScale,t.y*=r.default.objectScale}),this._points=t,this.calcBounds()},enumerable:!0,configurable:!0}),e.prototype.calcBounds=function(){var t=this;this._points.forEach(function(e){e.x<t._xmin&&(t._xmin=e.x),e.x>t._xmax&&(t._xmax=e.x),e.y<t._ymin&&(t._ymin=e.y),e.y>t._ymax&&(t._ymax=e.y)}),this._width=this._xmax-this._xmin,this._height=this._ymax-this._ymin},e.prototype.rotate=function(t){this.angle+=t,this.angle<1&&(this.angle+=360),this.angle>360&&(this.angle-=360);var e=a.COS[t],i=a.SIN[t];this.points.forEach(function(t){var n=e*t.x-i*t.y,o=i*t.x+e*t.y;t.x=n,t.y=o}),this.calcBounds()},e.prototype.move=function(t){t=t||1,this.origin.x+=this.velocity.x*t,this.origin.y+=this.velocity.y*t,this.origin.x>r.default.width&&(this.origin.x-=r.default.width),this.origin.x<0&&(this.origin.x+=r.default.width),this.origin.y>r.default.height&&(this.origin.y-=r.default.height),this.origin.y<0&&(this.origin.y+=r.default.height)},e.prototype.scale=function(t){this.points.forEach(function(e){e.x*=t,e.y*=t}),this.calcBounds()},e.prototype.draw=function(t,e){void 0===t&&(t=!0),void 0===e&&(e="rgba(255,255,255,.8)"),r.default.draw.vectorShape(this.points,this.origin.x,this.origin.y,e,t)},Object.defineProperty(e.prototype,"x",{get:function(){return this.origin.x+this._xmin},set:function(t){this.origin.x=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.origin.y+this._ymin},set:function(t){this.origin.y=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"vertices",{get:function(){var t=this;return this.points.map(function(e){return{x:t.origin.x+e.x,y:t.origin.y+e.y}})},enumerable:!0,configurable:!0}),e.prototype.collided=function(t){return!!(t&&this.x<t.x+t.width&&this.x+this.width>t.x&&this.y<t.y+t.height&&this.height+this.y>t.y)},e.prototype.destroy=function(){for(var t in this.handlers)this.handlers[t]=null;this.handlers={}},e}(s.EventSource);e.Object2D=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(27),o=!0;function r(t){var i=0,r=new n.Howl(t);r.on("end",function(){t.max&&i--});var s=r.play.bind(r);t.max&&t.max;return r.play=function(){o&&(t.max?i<t.max&&(s(),i++):s())},r._origVolume=t.volume,e.all.push(r),r}e.all=[],e.fire=r({src:["./assets/fire.wav"],volume:.2}),e.thrust=r({src:["./assets/thrust.wav"],volume:.3}),e.alienFire=r({src:["./assets/sfire.wav"],volume:.5}),e.largeExplosion=r({src:["./assets/explode1.wav"],volume:.5,max:2}),e.mediumExplosion=r({src:["./assets/explode2.wav"],volume:.5,max:2}),e.smallExplosion=r({src:["./assets/explode3.wav"],volume:.5,max:2}),e.largeAlien=r({src:["./assets/lsaucer.wav"],volume:.5,loop:!0}),e.smallAlien=r({src:["./assets/ssaucer.wav"],volume:.5,loop:!0}),e.thumpLo=r({src:["./assets/thumplo.wav"],volume:.3}),e.thumpHi=r({src:["./assets/thumphi.wav"],volume:.3}),e.extraLife=r({src:["./assets/life.wav"],volume:.5}),e.powerup=r({src:["./assets/powerup.wav"],volume:.5}),e.getPowerup=r({src:["./assets/getpowerup.wav"],volume:.5}),e.Sound={on:function(){o=!0,e.all.forEach(function(t){return t.volume(t._origVolume)})},off:function(){o=!1,e.all.forEach(function(t){return t.volume(0)})},stop:function(){e.all.forEach(function(t){return t.stop()})}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){this.handlers={}}return t.prototype.on=function(t,e){this.handlers[t]||(this.handlers[t]=[]),this.handlers[t].push(e)},t.prototype.off=function(t,e){this.handlers[t]=this.handlers[t].filter(function(t){return t!==e})},t.prototype.trigger=function(t){for(var e=this,i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];(this.handlers[t]||[]).forEach(function(t){return t.apply(void 0,[e].concat(i))})},t}();e.EventSource=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=[{score:20140,initials:"J H"},{score:20050,initials:"P A"},{score:19930,initials:"  M"},{score:19870,initials:"G I"},{score:19840,initials:"A L"},{score:19790,initials:"M T"},{score:19700,initials:"E O"},{score:19660,initials:"S N"},{score:190,initials:"   "},{score:70,initials:"   "}],o="jph_asteroids_hs",r=function(){function t(){this.scores=[];var t=window.localStorage.getItem(o);this.scores=t?JSON.parse(t)||[]:n}return Object.defineProperty(t.prototype,"top",{get:function(){return this.scores[0]},enumerable:!0,configurable:!0}),t.prototype.qualifies=function(t){return!!e.highscores.scores.filter(function(e){return e.score<t}).length},t.prototype.save=function(t,e){this.qualifies(t)&&(this.scores.push({score:t,initials:e}),this.scores=this.scores.sort(function(t,e){return t.score>e.score?-1:1}).slice(0,10),window.localStorage.setItem(o,JSON.stringify(this.scores)))},t}();e.highscores=new r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){return function(){this.debug=!1,this.paused=!1,this.god=!1,this.burn=!0}}();e.default=new n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(30),o=222,r=function(){function t(){var t=this;this.touched=!1,this.HYPERSPACE=32,this.ROTATE_LEFT=37,this.ROTATE_RIGHT=39,this.THRUST=38,this.FIRE=17,this.PLAYER_ONE_START=49,this.DEBUG=68,this.PAUSE=80,this.GOD=71,this.MONITOR_BURN=66,this.keys=new Array(o),this.prev=new Array(o);for(var e=0;e<o;e++)this.keys[e]=this.prev[e]=!1;window.onkeydown=function(e){t.keys[e.keyCode]=!0},window.onkeyup=function(e){t.keys[e.keyCode]=!1};var i=document.getElementById("game");this.mc=new n.Manager(i);var r=new n.Pan,s=new n.Tap,a=new n.Pinch({enable:!0});this.mc.add(r),this.mc.add(s,{interval:50}),this.mc.add(a),this.mc.on("panup",function(e){t.keys[t.THRUST]=!0}),this.mc.on("panleft",function(e){t.keys[t.ROTATE_LEFT]=!0}),this.mc.on("panright",function(e){t.keys[t.ROTATE_RIGHT]=!0}),this.mc.on("panend",function(e){t.keys[t.THRUST]=!1,t.keys[t.ROTATE_LEFT]=!1,t.keys[t.ROTATE_RIGHT]=!1}),this.mc.on("tap",function(e){t.keys[t.FIRE]=!0,t.keys[t.PLAYER_ONE_START]=!0,t.touched=!0}),this.mc.on("pinchout",function(e){t.keys[t.HYPERSPACE]=!0}),this.mc.on("pinchend",function(e){t.keys[t.HYPERSPACE]=!1})}return t.prototype.update=function(){for(var t=0;t<o;t++)this.prev[t]=this.keys[t];this.touched&&(this.keys[this.FIRE]=!1,this.keys[this.PLAYER_ONE_START]=!1),this.touched=!this.touched},t.prototype.isPressed=function(t){return!1===this.prev[t]&&!0===this.keys[t]},t.prototype.wasPressed=function(t){return this.prev[t]&&!this.keys[t]},t.prototype.isDown=function(t){return this.keys[t]},t}();e._Key=r,e.Key=new r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),o=i(16),r=i(15),s=function(){function t(){this.tree=new o.Quadtree({x:0,y:0,width:n.default.width,height:n.default.height},1)}return t.prototype.bulletCheck=function(t,e,i,n){var o=this;if(t&&t.length&&e&&e.length){var s=[],a=[];this.tree.clear(),e.forEach(function(t){o.tree.insert(t)});for(var u=function(e){var o=t[e];s.length=0,s.push.apply(s,h.tree.retrieve(o)),s.forEach(function(s){if(s.collided(o))i(o,s);else if(n&&n(o,o,s),e<t.length-1){var u=t[e+1],h=[s.x,s.y,s.x+s.width,s.y+s.height];a.length=0,r.lineclip([[o.origin.x,o.origin.y],[u.origin.x,u.origin.y]],h,a),a.length&&(n&&n(o,u,s),i(o,s))}})},h=this,l=0;l<t.length;l++)u(l)}},t.prototype.check=function(t,e,i,n,o){var r=this;if(t&&t.length&&e&&e.length){var s=[];this.tree.clear(),e.forEach(function(t){r.tree.insert(t)}),t.forEach(function(t){s.length=0,s.push.apply(s,r.tree.retrieve(t)),s.forEach(function(e){e.collided(t)?i?r.pointsInPolygon(t,e||r.pointsInPolygon(e,t))&&n(t,e):n(t,e):o&&o(t,e)})})}},t.prototype.pointsInPolygon=function(t,e){for(var i=t.vertices.length>e.vertices.length?t.vertices:e.vertices,n=t.vertices.length<=e.vertices.length?t.vertices:e.vertices,o=0,r=n.length;o<r;o++)if(this.pointInPoly(i,n[o]))return!0;return!1},t.prototype.pointInPoly=function(t,e){var i,n=t.length-1,o=n-1,r=t.map(function(t){return t.x}),s=t.map(function(t){return t.y}),a=e.x,u=e.y,h=0;for(i=0;i<n;i++)(s[i]<u&&s[o]>=u||s[o]<u&&s[i]>=u)&&(r[i]<=a||r[o]<=a)&&(h^=r[i]+(u-s[i])/(s[o]-s[i])*(r[o]-r[i])<a),o=i;return h},t}();e.Collisions=s},function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),s=function(t){function e(e,i,n){void 0===n&&(n=1.25);var o=t.call(this,e.x,e.y)||this;return o.life=n,o.frame=0,o.velocity=i,o}return o(e,t),e.prototype.render=function(){this.draw()},e.prototype.update=function(t){this.frame++,this.move(t),this.life-=t,this.life<=0&&this.destroy()},e.prototype.draw=function(){var t=this.frame<=1?8*r.default.objectScale:4*r.default.objectScale;r.default.draw.rect(this.origin.x-2,this.origin.y-2,t,t,"rgba(255,0,255,.5)"),r.default.draw.rect(this.origin.x-1,this.origin.y-1,t,t,"rgba(0,255,255,.5)"),r.default.draw.rect(this.origin.x,this.origin.y,t,t)},e.prototype.destroy=function(){this.trigger("expired")},Object.defineProperty(e.prototype,"vertices",{get:function(){return[this.origin]},enumerable:!0,configurable:!0}),e}(i(3).Object2D);e.Bullet=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),o=i(12),r=i(1),s=i(7),a="rgba(255,255,255,.8)",u="rgba(255,255,255,.8)";function h(t){return void 0===t&&(t=1),"rgba(255,0,255, "+t+")"}function l(t){return void 0===t&&(t=1),"rgba(0,255,255, "+t+")"}e.magenta=h,e.cyan=l,e.white=function(t){return void 0===t&&(t=1),"rgba(255,255,255, "+t+")"};var c=h(.5),d=l(.5),f=function(){function t(t){this.ctx=t}return t.prototype.line=function(t,e,i,n,o,r){void 0===o&&(o=a),void 0===r&&(r=2);var s=this.ctx;s.beginPath(),s.lineWidth=r,s.moveTo(t,e),s.strokeStyle=o,s.lineTo(i,n),s.stroke(),s.closePath()},t.prototype.vectorline=function(t,e,i,n,o,r){void 0===o&&(o=a),void 0===r&&(r=2);var u=this.ctx,h=u.strokeStyle;s.default.burn&&(this.line(t-2,e,i-2,n,c),this.line(t-1,e-2,i-1,n-1,d)),this.line(t,e,i,n,o),u.strokeStyle=h},t.prototype.shape=function(t,e,i,n,o){void 0===n&&(n=a),void 0===o&&(o=!0);var r=t.length-1;this.ctx.save();for(var s=0;s<r;s++)this.line(e+t[s].x,i+t[s].y,e+t[s+1].x,i+t[s+1].y,n);o&&this.line(e+t[r].x,i+t[r].y,e+t[0].x,i+t[0].y,n),this.ctx.restore()},t.prototype.vectorShape=function(t,e,i,n,o){void 0===n&&(n=a),void 0===o&&(o=!0);var r=t.length-1;this.ctx.save();for(var s=0;s<r;s++)this.vectorline(e+t[s].x,i+t[s].y,e+t[s+1].x,i+t[s+1].y,n);o&&this.vectorline(e+t[r].x,i+t[r].y,e+t[0].x,i+t[0].y,n),this.ctx.restore()},t.prototype.rect=function(t,e,i,n,o){void 0===o&&(o=a);var r=this.ctx;r.beginPath(),r.fillStyle=o,r.fillRect(t,e,i,n),r.stroke(),r.closePath()},t.prototype.point=function(t,e){void 0===e&&(e=a),this.rect(t.x,t.y,n.default.pointSize,n.default.pointSize,e)},t.prototype.background=function(t){void 0===t&&(t="#000000");var e=this.ctx;e.fillStyle=t,e.fillRect(0,0,n.default.width,n.default.height)},t.prototype.scanlines=function(){if(s.default.burn)for(var t=this.ctx,e=r.random(2,5),i=0;i<n.default.height-e;i+=e)t.beginPath(),t.lineWidth=1,t.moveTo(0,i),t.strokeStyle="#001111",t.lineTo(n.default.width,i),t.stroke(),t.moveTo(0,i+1),t.strokeStyle="rgba(255,0,255,.5)",t.lineTo(n.default.width,i+1),t.stroke(),t.moveTo(0,i+2),t.strokeStyle="rgba(0,255,255,.3)",t.lineTo(n.default.width,i+2),t.stroke(),t.closePath()},t.prototype.bounds=function(t,e){void 0===e&&(e=a);var i=this.ctx;t&&(i.save(),i.beginPath(),i.strokeStyle=e,i.lineWidth=2,i.moveTo(t.x,t.y),i.lineTo(t.x+t.width,t.y),i.lineTo(t.x+t.width,t.y+t.height),i.lineTo(t.x,t.y+t.height),i.lineTo(t.x,t.y),i.stroke(),i.closePath(),i.restore())},t.prototype.text=function(t,e,i,n,o){void 0===o&&(o=u);var r=this.ctx;r.save(),r.font=n+"pt hyperspace",r.textBaseline="middle",r.lineWidth=1,s.default.burn&&(r.strokeStyle=c,r.strokeText(t,e-2,i-2),r.strokeStyle=d,r.strokeText(t,e-1,i-1)),r.strokeStyle=o,r.strokeText(t,e,i),r.restore()},t.prototype.text2=function(t,e,i){var n=this.ctx;n.save(),n.font=e+"pt hyperspace",n.textBaseline="middle",n.lineWidth=1;var o=i(n.measureText(t).width);s.default.burn&&(n.strokeStyle=h(.5),n.strokeText(t,o.x-2,o.y-2),n.strokeStyle=l(.5),n.strokeText(t,o.x-1,o.y-1)),n.strokeStyle=u,n.strokeText(t,o.x,o.y),n.restore()},t.prototype.text3=function(t,e,i){var n=this.ctx;n.save(),n.font=e+"pt hyperspace",n.textBaseline="middle";var o=i(n.measureText(t).width);s.default.burn&&(n.fillStyle=h(.5),n.fillText(t,o.x-2,o.y-2),n.fillStyle=l(.5),n.fillText(t,o.x-1,o.y-1)),n.fillStyle=u,n.fillText(t,o.x,o.y),n.restore()},t.prototype.scorePlayer1=function(t){for(var e=t.toString();e.length<2;)e="0"+e;this.text(e,100,20,n.default.font.medium)},t.prototype.highscore=function(t){for(var e=t.toString();e.length<2;)e="0"+e;this.text2(e,n.default.font.small,function(t){return{x:n.default.width2-t/2,y:20}})},t.prototype.oneCoinOnePlay=function(){this.text2("1  coin  1  play",n.default.font.medium,function(t){return{x:n.default.width2-t/2,y:n.default.height/8*7}})},t.prototype.pushStart=function(){n.default.draw.text3("push start",n.default.font.xlarge,function(t){return{x:n.default.width2-t/2,y:n.default.height/8}})},t.prototype.player1=function(){n.default.draw.text3("player 1",n.default.font.xlarge,function(t){return{x:n.default.width2-t/2,y:n.default.height/4.5}})},t.prototype.gameOver=function(){n.default.draw.text3("game over",n.default.font.xlarge,function(t){return{x:n.default.width2-t/2,y:n.default.height/4.5}})},t.prototype.copyright=function(){this.text2(String.fromCharCode(169)+" 1979 atari inc",n.default.font.small,function(t){return{x:n.default.width2-t/2,y:n.default.height-n.default.font.small}})},t.prototype.drawExtraLives=function(t){t=Math.min(t,10);for(var e=new o.Ship(0,0),i=2.3*(e.x+e.width),r=20+n.default.font.medium+10,s=0;s<t;s++)e.origin.x=80+s*i,e.origin.y=r,e.render()},t.prototype.circle=function(t,e,i,n){void 0===n&&(n=a);var o=this.ctx;s.default.burn&&(o.beginPath(),o.arc(t-2,e-2,i,0,2*Math.PI,!1),o.strokeStyle=h(.2),o.stroke(),o.closePath(),o.beginPath(),o.arc(t-1,e-1,i,0,2*Math.PI,!1),o.strokeStyle=l(.2),o.stroke(),o.closePath()),o.beginPath(),o.arc(t,e,i,0,2*Math.PI,!1),o.strokeStyle=n,o.stroke(),o.closePath()},t}();e.Draw=f},function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),s=i(8),a=i(3),u=i(2),h=i(10),l=i(4),c=i(1),d=1e3*r.default.objectScale,f=1100*r.default.objectScale,p=150*r.default.objectScale,_=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.points=[{x:5,y:8},{x:0,y:20},{x:-5,y:8}],n}return o(e,t),e.prototype.update=function(){},e.prototype.render=function(){this.draw(!1)},e}(a.Object2D),y=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.moving=!1,n.rotating=!1,n.bulletCount=0,n.bulletTimer=0,n.shield=1,n.trails=[],n.flame=new _(e,i),n.points=[{x:0,y:-15},{x:10,y:10},{x:5,y:5},{x:-5,y:5},{x:-10,y:10}],n.angle=270,n}return o(e,t),e.prototype.render=function(){this.draw(),this.moving&&c.random(1,10)%2==0&&this.flame.draw(!1),this.trails.length&&this.trails.forEach(function(t){t.alpha>0&&(r.default.draw.shape(t.points,t.x,t.y,"rgba(255,0,255,"+t.alpha+")",!0),r.default.draw.shape(t.points,t.x-1,t.y-1,"rgba(0,255,255,"+t.alpha+")",!0),t.alpha-=.1)})},e.prototype.update=function(t){this.move(t),this.flame.move(t),s.Key.isDown(s.Key.THRUST)?(this.moving=!0,this.thrust()):this.moving=!1,s.Key.isPressed(s.Key.ROTATE_LEFT)&&this.rotate(-1),s.Key.isDown(s.Key.ROTATE_LEFT)&&this.rotate(-5),s.Key.isPressed(s.Key.ROTATE_RIGHT)&&this.rotate(1),s.Key.isDown(s.Key.ROTATE_RIGHT)&&this.rotate(5),this.rotating=s.Key.isDown(s.Key.ROTATE_LEFT)||s.Key.isDown(s.Key.ROTATE_RIGHT),s.Key.isDown(s.Key.FIRE)&&this.fire(),s.Key.isPressed(s.Key.HYPERSPACE)&&this.hyperspace(),this.bulletTimer>=0&&(this.bulletTimer-=t),this.moving&&(Math.abs(this.velocity.x)>200||Math.abs(this.velocity.y)>200)?this.trails.push({points:this.points.slice(),x:this.origin.x,y:this.origin.y,alpha:.5}):this.trails.length=0,this.moving||(this.velocity.friction(.005),this.flame.velocity=this.velocity)},e.prototype.rotate=function(e){t.prototype.rotate.call(this,e),this.flame.rotate(e)},e.prototype.thrust=function(){var t=u.Vector.fromAngle(this.angle,.1*p);this.velocity.magnitude<f&&(this.velocity.add(t),this.flame.velocity=this.velocity),l.thrust.play()},e.prototype.fire=function(){var t=this;if(this.bulletTimer<=0&&this.bulletCount<10){l.fire.play(),this.bulletTimer=.1,this.bulletCount++;var e=u.Vector.fromAngle(this.angle),i=new h.Bullet(this.origin,e,1);i.on("expired",function(){t.bulletCount--});var n=i.velocity.copy();n.scale(20,20),i.origin.add(n);var o=0;this.velocity.dot(i.velocity)>0&&(o=this.velocity.magnitude),o=Math.max(d,o+d),i.velocity.scale(o,o);var r=(this.angle+180)%360,s=u.Vector.fromAngle(r,5);this.origin.add(s),this.flame.origin.add(s),this.trigger("fire",i)}},e.prototype.hyperspace=function(){var t=c.random(40,r.default.width-40),e=c.random(40,r.default.height-40);this.velocity=new u.Vector(0,0),this.flame.velocity=this.velocity,this.x=this.flame.x=t,this.y=this.flame.y=e},e.prototype.destroy=function(){this.trigger("expired")},e}(a.Object2D);e.Ship=y},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(4),o=function(){function t(){this.lo=!0,this.reset()}return t.prototype.reset=function(){this.thumpBeatTimer=0,this.thumpBeat=1,this.thumpTimer=0,this.thumpTime=10,this.max=!1},t.prototype.update=function(t){this.thumpTimer+=t,this.thumpBeatTimer+=t,this.thumpBeat-=2e-4,this.thumpBeat<=.15&&(this.thumpBeat=.15),this.thumpBeatTimer>=this.thumpBeat&&(this.lo?n.thumpLo.play():n.thumpHi.play(),this.lo=!this.lo,this.thumpBeatTimer=0)},t}();e.Thumper=o},function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r=i(5),s=i(9),a=i(0),u=i(13),h=i(7),l=function(t){function e(e){var i=t.call(this)||this;return i.world=e,i.bounds=[],i.lines=[],i}return o(e,t),e.prototype.init=function(){this.world.addShip(a.default.width2,a.default.height2),this.world.startLevel(),this.thumper=new u.Thumper},e.prototype.update=function(t){this.world.levelTimer+=t,this.thumper&&this.world.ship&&this.thumper.update(t),this.world.gameOver&&(this.world.gameOverTimer+=t,this.world.gameOverTimer>=5&&this.trigger("done",this.world)),this.world.started?(this.checkCollisions(t),this.world.updateAlienTimer(t),this.world.gameOver||(this.world.shouldTryToPlaceShip()&&this.world.tryPlaceShip(t),this.world.shouldCheckForNextLevel()&&(this.world.startLevel(),this.thumper.reset())),this.world.lives||(this.world.gameOver=!0),this.world.update(t)):this.world.levelTimer>=2&&(this.init(),this.world.started=!0)},e.prototype.render=function(t){h.default.paused||(this.renderStatic(),this.world.render(t))},e.prototype.renderStatic=function(){a.default.draw.background(),a.default.draw.copyright(),a.default.draw.scorePlayer1(this.world.score),a.default.draw.highscore(this.world.highscore),a.default.draw.drawExtraLives(this.world.lives),this.world.ship&&(a.default.draw.vectorline(40,80,140,80,"rgba(255,255,255,.4)"),a.default.draw.vectorline(40,80,40+100*this.world.ship.shield,80,"rgba(255,255,255,.6)")),this.world.started||a.default.draw.player1(),this.world.gameOver&&a.default.draw.gameOver(),h.default.debug&&this.renderDebug(),h.default.god&&a.default.draw.text2("god",a.default.font.small,function(t){return{x:a.default.width-t-10,y:a.default.height-80}})},e.prototype.renderDebug=function(){if(a.default.draw.text2("debug mode",a.default.font.small,function(t){return{x:a.default.width-t-10,y:a.default.height-40}}),this.bounds&&this.bounds.forEach(function(t){a.default.draw.bounds(t,"#fc058d")}),this.lines.forEach(function(t){a.default.draw.vectorline(t[0].origin.x,t[0].origin.y,t[1].origin.x,t[1].origin.y,"#fd1f00")}),!this.world.ship&&this.world.lives){var t=a.default.shipRect;a.default.draw.bounds(t,"#00ff00")}this.world.ship&&(a.default.draw.text(this.world.ship.angle.toString(),this.world.ship.origin.x+20,this.world.ship.origin.y+20,10),a.default.draw.text(this.world.ship.velocity.x.toString(),this.world.ship.origin.x+20,this.world.ship.origin.y+40,10),a.default.draw.text(this.world.ship.velocity.y.toString(),this.world.ship.origin.x+20,this.world.ship.origin.y+60,10));var e=new Date(null);e.setSeconds(this.world.levelTimer),a.default.draw.text2(e.toISOString().substr(11,8),a.default.font.small,function(t){return{x:10,y:a.default.height-40}})},e.prototype.checkCollisions=function(t){var e=this,i=this.world,n=i.ship,o=i.rocks,r=i.shipBullets,a=i.alien,u=i.alienBullets,l=i.shockwaves,c=i.powerup;if(this.world.shouldCheckCollisions()){this.bounds.length=0,this.lines.length=0;var d=new s.Collisions;d.bulletCheck(r,o,function(t,i){e.world.shake(),e.world.addScore(i),e.world.rockDestroyed(i),t.destroy()},function(t,i,n){h.default.debug&&(e.bounds.push(n),e.lines.push([t,i]))}),d.bulletCheck(r,[a],function(t,i){e.world.shake(),e.world.addScore(i),e.world.alienDestroyed(),t.destroy()},function(t,i,n){h.default.debug&&(e.bounds.push(n),e.lines.push([t,i]))});var f=[];l.filter(function(t){return t.rocks.length}).forEach(function(t){return f.push.apply(f,t.rocks)});var p=this.world.rocks.filter(function(t){return f.indexOf(t)<0});d.check(f,p,!1,function(t,i){e.world.addScore(t),e.world.addScore(i),e.world.rockDestroyed(t),e.world.rockDestroyed(i)}),d.check([n],[c],!0,function(t,i){e.world.addPowerup(),i.destroy()},function(t,i){h.default.debug&&e.bounds.push(i)}),h.default.god||(d.check([n],o,!0,function(t,i){e.world.shake(),e.world.addScore(i),e.world.rockDestroyed(i),t.shield-=.25,t.shield<=0&&e.world.shipDestroyed()},function(t,i){h.default.debug&&e.bounds.push(i)}),d.check([n],[a],!0,function(t,i){e.world.shake(),e.world.addScore(i),e.world.alienDestroyed(),t.shield-=.5,t.shield<=0&&e.world.shipDestroyed()},function(t,i){h.default.debug&&e.bounds.push(i)}),d.check(u,[n],!0,function(t,i){e.world.shake(),i.shield-=1,i.shield<=0&&e.world.shipDestroyed(),t.destroy()},function(t,i){h.default.debug&&e.bounds.push(i)})),d.check([a],o,!1,function(t,i){e.world.shake(),e.world.alienDestroyed(),e.world.rockDestroyed(i)},function(t,i){h.default.debug&&e.bounds.push(i)}),d.check(u,o,!1,function(t,i){e.world.shake(),e.world.rockDestroyed(i)},function(t,i){h.default.debug&&e.bounds.push(i)})}},e}(r.EventSource);e.GameMode=l},function(t,e,i){"use strict";function n(t,e,i,n){return 8&i?[t[0]+(e[0]-t[0])*(n[3]-t[1])/(e[1]-t[1]),n[3]]:4&i?[t[0]+(e[0]-t[0])*(n[1]-t[1])/(e[1]-t[1]),n[1]]:2&i?[n[2],t[1]+(e[1]-t[1])*(n[2]-t[0])/(e[0]-t[0])]:1&i?[n[0],t[1]+(e[1]-t[1])*(n[0]-t[0])/(e[0]-t[0])]:null}function o(t,e){var i=0;return t[0]<e[0]?i|=1:t[0]>e[2]&&(i|=2),t[1]<e[1]?i|=4:t[1]>e[3]&&(i|=8),i}Object.defineProperty(e,"__esModule",{value:!0}),e.lineclip=function(t,e,i){var r,s,a,u,h,l=t.length,c=o(t[0],e),d=[];for(i||(i=[]),r=1;r<l;r++){for(s=t[r-1],u=h=o(a=t[r],e);;){if(!(c|u)){d.push(s),u!==h?(d.push(a),r<l-1&&(i.push(d),d=[])):r===l-1&&d.push(a);break}if(c&u)break;c?c=o(s=n(s,a,c,e),e):u=o(a=n(s,a,u,e),e)}c=h}return d.length&&i.push(d),i},e.polygonclip=function(t,e){var i,r,s,a,u,h,l;for(r=1;r<=8;r*=2){for(i=[],a=!(o(s=t[t.length-1],e)&r),u=0;u<t.length;u++)(l=!(o(h=t[u],e)&r))!==a&&i.push(n(s,h,r,e)),l&&i.push(h),s=h,a=l;if(!(t=i).length)break}return i}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e,i,n){void 0===e&&(e=10),void 0===i&&(i=4),void 0===n&&(n=0),this.bounds=t,this.maxObjects=e,this.maxLevels=i,this.level=n,this.objects=[],this.nodes=[],this.width2=this.bounds.width/2,this.height2=this.bounds.height/2,this.xmid=this.bounds.x+this.width2,this.ymid=this.bounds.y+this.height2}return t.prototype.insert=function(t){var e=this;if(t){var i,n=0;if(this.nodes.length&&(i=this.getIndex(t)).length)i.forEach(function(i){e.nodes[i].insert(t)});else if(this.objects.push(t),this.objects.length>this.maxObjects&&this.level<this.maxLevels){this.nodes.length||this.split();for(var o=function(){if((i=r.getIndex(r.objects[n])).length){var t=r.objects.splice(n,1)[0];i.forEach(function(i){e.nodes[i].insert(t)})}else n+=1},r=this;n<this.objects.length;)o()}}},t.prototype.retrieve=function(t){var e=this;if(!t)return[];var i=this.getIndex(t),n=this.objects;if(this.nodes.length)if(i.length)i.forEach(function(i){n=n.concat(e.nodes[i].retrieve(t))});else for(var o=0;o<this.nodes.length;o++)n=n.concat(this.nodes[o].retrieve(t));return n.filter(function(t,e,i){return i.indexOf(t)===e})},t.prototype.clear=function(){this.objects=[];for(var t=0;t<this.nodes.length;t++)this.nodes[t]&&this.nodes[t].clear();this.nodes=[]},t.prototype.getIndex=function(t){if(!t)return[];var e=[],i=this.xmid,n=this.ymid,o=t.y<=n,r=t.y>n;if(t.x<=i)if(o){e.push(1);var s=!1;t.x+t.width>i&&(e.push(0),s=!0),t.y+t.height>n&&(e.push(2),s&&e.push(3))}else r&&(e.push(2),t.x+t.width>i&&e.push(3));else t.x>i&&(o?(e.push(0),t.y+t.height>n&&e.push(3)):e.push(3));return e},t.prototype.split=function(){var e=this,i=Math.round(this.width2),n=Math.round(this.height2),o=Math.round(this.bounds.x),r=Math.round(this.bounds.y),s=function(o,r){return new t({x:o,y:r,width:i,height:n},e.maxObjects,e.maxLevels,e.level+1)};this.nodes=[s(o+i,r),s(o,r),s(o,r+n),s(o+i,r+n)]},t}();e.Quadtree=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),o=i(9),r=function(){function t(t){this.world=t,this.showPushStart=!0,this.pushStartTimer=0,this.init()}return t.prototype.init=function(){this.world.started||this.world.startLevel()},t.prototype.update=function(t){this.checkCollisions(),this.world.updateAlienTimer(t),this.world.rocks.length||this.world.scenery.length||this.world.alien||this.world.startLevel(),this.updatePushStartTimer(t),this.world.update(t)},t.prototype.updatePushStartTimer=function(t){this.pushStartTimer+=t,this.pushStartTimer>=.4&&(this.pushStartTimer=0,this.showPushStart=!this.showPushStart)},t.prototype.checkCollisions=function(){var t=this,e=this.world,i=e.alien,n=e.rocks,r=e.alienBullets;if(!!i||!!r.length){var s=new o.Collisions;s.check([i],n,!1,function(e,i){t.world.shake(),t.world.alienDestroyed(),t.world.rockDestroyed(i)}),s.check(r,n,!1,function(e,i){t.world.shake(),t.world.rockDestroyed(i)})}},t.prototype.render=function(t){this.drawBackground(),this.drawPushStart(),this.world.render(t)},t.prototype.drawBackground=function(){n.default.draw.background(),n.default.draw.scorePlayer1(this.world.score),n.default.draw.oneCoinOnePlay(),n.default.draw.highscore(this.world.highscore),n.default.draw.copyright()},t.prototype.drawPushStart=function(){this.showPushStart&&n.default.draw.pushStart()},t}();e.AttractMode=r},function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),s=i(8),a=i(6),u="_abcdefghijklmnopqrstuvwxyz",h=function(t){function e(e){var i=t.call(this)||this;return i.index=1,i.score=e,i.init(),i}return o(e,t),e.prototype.init=function(){this.position=0,this.index=1,this.initials=["a","_","_"]},e.prototype.update=function(t){s.Key.isPressed(s.Key.ROTATE_LEFT)&&(this.index--,this.index<0&&(this.index=u.length-1),this.initials[this.position]=u[this.index]),s.Key.isPressed(s.Key.ROTATE_RIGHT)&&(this.index++,this.index>u.length-1&&(this.index=0),this.initials[this.position]=u[this.index]),s.Key.isPressed(s.Key.HYPERSPACE)&&(this.position++,this.position>=3&&(a.highscores.save(this.score,this.initials.join("").replace("_"," ")),this.init(),this.trigger("done")),this.index=1,this.initials[this.position]=u[this.index])},e.prototype.render=function(){var t=r.default.height/4.5,e=function(e){return r.default.draw.text(e,50,t+=r.default.font.large+5,r.default.font.large)};r.default.draw.background(),r.default.draw.highscore(a.highscores.top.score),r.default.draw.scorePlayer1(this.score),r.default.draw.copyright(),e("your score is one of the ten best"),e("please enter your initials"),e("push rotate to select letter"),e("push hyperspace when letter is correct"),r.default.draw.text3(this.initials.join(""),r.default.font.xlarge,function(t){return{x:r.default.width2-t/2,y:r.default.height/2+r.default.font.xlarge}})},e}(i(5).EventSource);e.InitialsMode=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),o=i(6),r=function(){function t(t){this.score=t,this.blink=0,this.showPushStart=!0,this.highscore=o.highscores.top.score}return t.prototype.update=function(t){this.blink+=t,this.blink>=.4&&(this.blink=0,this.showPushStart=!this.showPushStart)},t.prototype.render=function(){this.drawBackground(),this.drawPushStart(),this.drawHighScores()},t.prototype.drawBackground=function(){n.default.draw.background(),n.default.draw.scorePlayer1(this.score),n.default.draw.oneCoinOnePlay(),n.default.draw.highscore(this.highscore),n.default.draw.copyright()},t.prototype.drawHighScores=function(){var t=n.default.width/2,e=Math.ceil(n.default.height/4.5)+(n.default.font.xlarge+n.default.font.small),i=n.default.font.medium+n.default.font.small;n.default.draw.text2("high scores",n.default.font.large,function(e){return{x:t-e/2,y:n.default.height/4.5}});for(var r=function(r){var a=e+r*i,u=s.pad(r+1," ",2)+"."+s.pad(o.highscores.scores[r].score," ",6)+" "+o.highscores.scores[r].initials;n.default.draw.text2(u,n.default.font.large,function(e){return{x:t-e/2,y:a}})},s=this,a=0;a<o.highscores.scores.length;a++)r(a)},t.prototype.drawPushStart=function(){this.showPushStart&&n.default.draw.pushStart()},t.prototype.pad=function(t,e,i){for(t=t.toString();t.length<i;)t=e+t;return t},t}();e.HighScoreMode=r},function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),s=i(11),a=function(t){function e(e,i){var n=t.call(this,e.origin.x,e.origin.y)||this;return n.text=i,n.life=1,n.velocity=e.velocity,n}return o(e,t),e.prototype.render=function(){this.draw()},e.prototype.update=function(t){this.move(t),this.life-=t,this.life<=0&&this.destroy()},e.prototype.draw=function(){r.default.draw.text(this.text,this.origin.x,this.origin.y,50*this.life,s.white(this.life))},e.prototype.destroy=function(){this.life=0,this.trigger("expired")},e}(i(3).Object2D);e.ScoreMarker=a},function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,s=i(0),a=i(3),u=i(2),h=i(1),l=i(4);!function(t){t[t.Small=5]="Small",t[t.Medium=10]="Medium",t[t.Large=20]="Large"}(r=e.RockSize||(e.RockSize={}));var c=function(t){function e(e,i,n,o,r){void 0===r&&(r=1);var a=t.call(this,e,i)||this;a.rotTimer=0,a.rock1=[[.5,-2],[2,-1],[2,-.7],[1.2,0],[2,1],[1,2],[.5,1.5],[-1,2],[-2,.7],[-2,-1],[-.5,-1],[-1,-2]],a.rock2=[[0,-1.5],[1,-2],[2,-1],[1,-.5],[2,.5],[1,2],[-.5,1.5],[-1,2],[-2,1],[-1.5,0],[-2,-1],[-1,-2]],a.rock3=[[0,-1],[1,-2],[2,-1],[1.5,0],[2,1],[1,2],[-1,2],[-2,1],[-2,-1],[-1,-2]],a.rocks=[a.rock1,a.rock2,a.rock3];var u=r*s.default.objectScale;a.velocity.x=n.x*u,a.velocity.y=n.y*u;var l=h.random(0,2),c=a.rocks[l];return a.points=c.map(function(t){return{x:t[0]*o,y:t[1]*o}}),a.size=o,a.rotate(h.random(1,90)),a.rot=h.random(.01,1)%2==0?1:-1,a.timeToRot=h.random(1,5),a}return o(e,t),e.prototype.update=function(t){this.rotTimer+=1,this.move(t),this.rotTimer===this.timeToRot&&(this.rotate(this.rot),this.rotTimer=0)},e.prototype.render=function(){this.draw()},Object.defineProperty(e.prototype,"direction",{get:function(){var t=Math.atan2(this.velocity.y,this.velocity.x)*(180/Math.PI);return t=t>0?t:360+t,Math.floor(t)},enumerable:!0,configurable:!0}),e.prototype.split=function(){var t;switch(this.size){case r.Large:t=l.largeExplosion;break;case r.Medium:t=l.mediumExplosion;break;case r.Small:t=l.smallExplosion}var i=h.randomFloat(.7,1);if(t.rate(i),t.play(),this.size>r.Small){var n=h.random(this.direction,this.direction+80),o=h.random(this.direction-80,this.direction);n<0&&(n+=360),n>360&&(n-=360),o<0&&(o+=360),o>360&&(o-=360);var s=this.size===r.Large?r.Medium:r.Small,a=u.Vector.fromAngle(n),c=u.Vector.fromAngle(o),d=s===r.Medium?h.random(150,250):h.random(250,350),f=s===r.Medium?h.random(150,250):h.random(250,350);return[new e(this.origin.x,this.origin.y,a,s,d),new e(this.origin.x,this.origin.y,c,s,f)]}return[]},Object.defineProperty(e.prototype,"score",{get:function(){return this.size===r.Large?20:this.size===r.Medium?50:100},enumerable:!0,configurable:!0}),e}(a.Object2D);e.Rock=c},function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),s=function(t){function e(e){var i=t.call(this)||this;return i.frames=e,i}return o(e,t),e.prototype.render=function(){this.draw()},e.prototype.update=function(t){this.frames--,this.frames<=0&&this.trigger("expired")},e.prototype.draw=function(){r.default.draw.background("#ffffff"),r.default.draw.scanlines()},e}(i(5).EventSource);e.Flash=s},function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),s=i(3),a=i(1),u=function(t){function e(e,i,n,o,r){void 0===r&&(r=1);var s=t.call(this,e,i)||this;return s.velocity=n,s.size=o,s.multiplier=r,s.life=1,s.frame=0,s.radius=1,s.rocks=[],s}return o(e,t),e.prototype.update=function(t){this.frame++,this.radius=this.size*(this.frame/10),this.life-=t,this.origin.x+=this.velocity.x*t,this.origin.y+=this.velocity.y*t,this.life<=.1&&(this.rocks.length=0,this.trigger("expired"))},e.prototype.render=function(t){if(1===this.frame){var e=this.size*a.random(25,55)/10,i=r.default.ctx;i.beginPath(),i.arc(this.origin.x,this.origin.y,e,0,2*Math.PI,!1),i.fillStyle="rgba(255, 255, 255, "+a.random(.2,.5)+")",i.fill(),i.stroke(),i.closePath(),r.default.draw.scanlines()}r.default.draw.circle(this.origin.x,this.origin.y,this.radius,"rgba(128,128,128,"+(.5-this.frame/100)+")")},Object.defineProperty(e.prototype,"x",{get:function(){return this.origin.x-this.radius},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.origin.y-this.radius},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return 2*this.radius},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return 2*this.radius},enumerable:!0,configurable:!0}),e}(s.Object2D);e.Shockwave=u},function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r=i(5),s=i(0),a=i(2),u=i(1),h=300*s.default.objectScale,l=function(t){function e(e,i,n){void 0===n&&(n=100);var o=t.call(this)||this;o.x=e,o.y=i,o.size=n,o.life=1,o.points=[];for(var r=0;r<15;r++){var s=a.Vector.fromAngle(u.random(1,360),Math.random()*h);o.points.push({x:e,y:i,vx:s.x,vy:s.y,alpha:Math.random()})}return o}return o(e,t),e.prototype.update=function(t){this.points.forEach(function(e){e.x+=e.vx*t,e.y+=e.vy*t,e.alpha-=.002}),this.life-=t,this.life<=.1&&this.trigger("expired")},e.prototype.render=function(t){this.points.forEach(function(t){u.random(1,10)%2==0&&s.default.draw.rect(t.x,t.y,2,2,"rgba(255,255,255,"+t.alpha+")")})},e}(r.EventSource);e.Explosion=l},function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),s=i(1),a=i(3),u=i(10),h=i(2),l=600*r.default.objectScale,c=800*r.default.objectScale,d=225*r.default.objectScale,f=250*r.default.objectScale,p=function(t){function e(e){var i=t.call(this,0,0)||this;return i.moveTimer=0,i.moveTime=1,i.bulletTimer=0,i.bulletTime=.7,i.velocity.y=0,i.origin.y=s.random(100,r.default.height-100),i.origin.y%2==0?(i.origin.x=40,i.velocity.x=e):(i.origin.x=r.default.width-40,i.velocity.x=-e),i.points=[{x:.5,y:-2},{x:1,y:-1},{x:2.5,y:0},{x:1,y:1},{x:-1,y:1},{x:-2.5,y:0},{x:-1,y:-1},{x:-.5,y:-2}],i}return o(e,t),e.prototype.update=function(t){if(this.move(t),this.origin.x>=r.default.width-5||this.origin.x<=5)this.trigger("expired");else{if(this.moveTimer+=t,this.moveTimer>=1&&0!==this.velocity.y&&(this.velocity.y=0,this.moveTimer=0),this.moveTimer>=this.moveTime)s.random(1,20)%2==0&&(this.velocity.y=this.origin.x%2==0?this.velocity.x:-this.velocity.x),this.moveTimer=0;this.bulletTimer+=t,this.bulletTimer>=this.bulletTime&&(this.fire(),this.bulletTimer=0)}},e.prototype.render=function(){this.draw()},e.prototype.draw=function(){t.prototype.draw.call(this),r.default.draw.vectorShape([this.points[1],this.points[6]],this.origin.x,this.origin.y),r.default.draw.vectorShape([this.points[2],this.points[5]],this.origin.x,this.origin.y)},e}(a.Object2D);e.Alien=p;var _=function(t){function e(){var e=t.call(this,d)||this;return e.score=200,e.scale(7),e}return o(e,t),e.prototype.fire=function(){var t=h.Vector.fromAngle(s.random(1,360),l),e=new u.Bullet(this.origin,t);this.trigger("fire",e)},e.prototype.destroy=function(){this.trigger("expired")},e}(p);e.BigAlien=_;var y=function(t){function e(e){var i=t.call(this,f)||this;return i.ship=e,i.score=1e3,i.bulletTime=1,i.scale(4),i}return o(e,t),e.prototype.fire=function(){var t;if(this.ship){var e=h.Vector.fromXY(this.ship.origin,this.origin,c);t=new u.Bullet(this.origin,e,2)}else{e=h.Vector.fromAngle(s.random(1,360),c);t=new u.Bullet(this.origin,e,2)}this.trigger("fire",t)},e.prototype.destroy=function(){this.ship=null,this.trigger("expired")},e}(p);e.SmallAlien=y},function(t,e){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){(function(i){var n;
/*!
 *  howler.js v2.0.9
 *  howlerjs.com
 *
 *  (c) 2013-2018, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */
/*!
 *  howler.js v2.0.9
 *  howlerjs.com
 *
 *  (c) 2013-2018, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */
!function(){"use strict";var o=function(){this.init()};o.prototype={init:function(){var t=this||r;return t._counter=1e3,t._codecs={},t._howls=[],t._muted=!1,t._volume=1,t._canPlayEvent="canplaythrough",t._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,t.masterGain=null,t.noAudio=!1,t.usingWebAudio=!0,t.autoSuspend=!0,t.ctx=null,t.mobileAutoEnable=!0,t._setup(),t},volume:function(t){var e=this||r;if(t=parseFloat(t),e.ctx||f(),void 0!==t&&t>=0&&t<=1){if(e._volume=t,e._muted)return e;e.usingWebAudio&&e.masterGain.gain.setValueAtTime(t,r.ctx.currentTime);for(var i=0;i<e._howls.length;i++)if(!e._howls[i]._webAudio)for(var n=e._howls[i]._getSoundIds(),o=0;o<n.length;o++){var s=e._howls[i]._soundById(n[o]);s&&s._node&&(s._node.volume=s._volume*t)}return e}return e._volume},mute:function(t){var e=this||r;e.ctx||f(),e._muted=t,e.usingWebAudio&&e.masterGain.gain.setValueAtTime(t?0:e._volume,r.ctx.currentTime);for(var i=0;i<e._howls.length;i++)if(!e._howls[i]._webAudio)for(var n=e._howls[i]._getSoundIds(),o=0;o<n.length;o++){var s=e._howls[i]._soundById(n[o]);s&&s._node&&(s._node.muted=!!t||s._muted)}return e},unload:function(){for(var t=this||r,e=t._howls.length-1;e>=0;e--)t._howls[e].unload();return t.usingWebAudio&&t.ctx&&void 0!==t.ctx.close&&(t.ctx.close(),t.ctx=null,f()),t},codecs:function(t){return(this||r)._codecs[t.replace(/^x-/,"")]},_setup:function(){var t=this||r;if(t.state=t.ctx&&t.ctx.state||"running",t._autoSuspend(),!t.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===(new Audio).oncanplaythrough&&(t._canPlayEvent="canplay")}catch(e){t.noAudio=!0}else t.noAudio=!0;try{(new Audio).muted&&(t.noAudio=!0)}catch(t){}return t.noAudio||t._setupCodecs(),t},_setupCodecs:function(){var t=this||r,e=null;try{e="undefined"!=typeof Audio?new Audio:null}catch(e){return t}if(!e||"function"!=typeof e.canPlayType)return t;var i=e.canPlayType("audio/mpeg;").replace(/^no$/,""),n=t._navigator&&t._navigator.userAgent.match(/OPR\/([0-6].)/g),o=n&&parseInt(n[0].split("/")[1],10)<33;return t._codecs={mp3:!(o||!i&&!e.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!i,opus:!!e.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!e.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!e.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(e.canPlayType("audio/x-mp4;")||e.canPlayType("audio/mp4;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!e.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(e.canPlayType("audio/x-flac;")||e.canPlayType("audio/flac;")).replace(/^no$/,"")},t},_enableMobileAudio:function(){var t=this||r,e=/iPhone|iPad|iPod|Android|BlackBerry|BB10|Silk|Mobi/i.test(t._navigator&&t._navigator.userAgent),i=!!("ontouchend"in window||t._navigator&&t._navigator.maxTouchPoints>0||t._navigator&&t._navigator.msMaxTouchPoints>0);if(!t._mobileEnabled&&t.ctx&&(e||i)){t._mobileEnabled=!1,t._mobileUnloaded||44100===t.ctx.sampleRate||(t._mobileUnloaded=!0,t.unload()),t._scratchBuffer=t.ctx.createBuffer(1,1,22050);var n=function(){r._autoResume();var e=t.ctx.createBufferSource();e.buffer=t._scratchBuffer,e.connect(t.ctx.destination),void 0===e.start?e.noteOn(0):e.start(0),"function"==typeof t.ctx.resume&&t.ctx.resume(),e.onended=function(){e.disconnect(0),t._mobileEnabled=!0,t.mobileAutoEnable=!1,document.removeEventListener("touchstart",n,!0),document.removeEventListener("touchend",n,!0)}};return document.addEventListener("touchstart",n,!0),document.addEventListener("touchend",n,!0),t}},_autoSuspend:function(){var t=this;if(t.autoSuspend&&t.ctx&&void 0!==t.ctx.suspend&&r.usingWebAudio){for(var e=0;e<t._howls.length;e++)if(t._howls[e]._webAudio)for(var i=0;i<t._howls[e]._sounds.length;i++)if(!t._howls[e]._sounds[i]._paused)return t;return t._suspendTimer&&clearTimeout(t._suspendTimer),t._suspendTimer=setTimeout(function(){t.autoSuspend&&(t._suspendTimer=null,t.state="suspending",t.ctx.suspend().then(function(){t.state="suspended",t._resumeAfterSuspend&&(delete t._resumeAfterSuspend,t._autoResume())}))},3e4),t}},_autoResume:function(){var t=this;if(t.ctx&&void 0!==t.ctx.resume&&r.usingWebAudio)return"running"===t.state&&t._suspendTimer?(clearTimeout(t._suspendTimer),t._suspendTimer=null):"suspended"===t.state?(t.ctx.resume().then(function(){t.state="running";for(var e=0;e<t._howls.length;e++)t._howls[e]._emit("resume")}),t._suspendTimer&&(clearTimeout(t._suspendTimer),t._suspendTimer=null)):"suspending"===t.state&&(t._resumeAfterSuspend=!0),t}};var r=new o,s=function(t){t.src&&0!==t.src.length?this.init(t):console.error("An array of source files must be passed with any new Howl.")};s.prototype={init:function(t){var e=this;return r.ctx||f(),e._autoplay=t.autoplay||!1,e._format="string"!=typeof t.format?t.format:[t.format],e._html5=t.html5||!1,e._muted=t.mute||!1,e._loop=t.loop||!1,e._pool=t.pool||5,e._preload="boolean"!=typeof t.preload||t.preload,e._rate=t.rate||1,e._sprite=t.sprite||{},e._src="string"!=typeof t.src?t.src:[t.src],e._volume=void 0!==t.volume?t.volume:1,e._xhrWithCredentials=t.xhrWithCredentials||!1,e._duration=0,e._state="unloaded",e._sounds=[],e._endTimers={},e._queue=[],e._playLock=!1,e._onend=t.onend?[{fn:t.onend}]:[],e._onfade=t.onfade?[{fn:t.onfade}]:[],e._onload=t.onload?[{fn:t.onload}]:[],e._onloaderror=t.onloaderror?[{fn:t.onloaderror}]:[],e._onplayerror=t.onplayerror?[{fn:t.onplayerror}]:[],e._onpause=t.onpause?[{fn:t.onpause}]:[],e._onplay=t.onplay?[{fn:t.onplay}]:[],e._onstop=t.onstop?[{fn:t.onstop}]:[],e._onmute=t.onmute?[{fn:t.onmute}]:[],e._onvolume=t.onvolume?[{fn:t.onvolume}]:[],e._onrate=t.onrate?[{fn:t.onrate}]:[],e._onseek=t.onseek?[{fn:t.onseek}]:[],e._onresume=[],e._webAudio=r.usingWebAudio&&!e._html5,void 0!==r.ctx&&r.ctx&&r.mobileAutoEnable&&r._enableMobileAudio(),r._howls.push(e),e._autoplay&&e._queue.push({event:"play",action:function(){e.play()}}),e._preload&&e.load(),e},load:function(){var t=null;if(r.noAudio)this._emit("loaderror",null,"No audio support.");else{"string"==typeof this._src&&(this._src=[this._src]);for(var e=0;e<this._src.length;e++){var i,n;if(this._format&&this._format[e])i=this._format[e];else{if("string"!=typeof(n=this._src[e])){this._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(i=/^data:audio\/([^;,]+);/i.exec(n))||(i=/\.([^.]+)$/.exec(n.split("?",1)[0])),i&&(i=i[1].toLowerCase())}if(i||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),i&&r.codecs(i)){t=this._src[e];break}}if(t)return this._src=t,this._state="loading","https:"===window.location.protocol&&"http:"===t.slice(0,5)&&(this._html5=!0,this._webAudio=!1),new a(this),this._webAudio&&h(this),this;this._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(t,e){var i=this,n=null;if("number"==typeof t)n=t,t=null;else{if("string"==typeof t&&"loaded"===i._state&&!i._sprite[t])return null;if(void 0===t){t="__default";for(var o=0,s=0;s<i._sounds.length;s++)i._sounds[s]._paused&&!i._sounds[s]._ended&&(o++,n=i._sounds[s]._id);1===o?t=null:n=null}}var a=n?i._soundById(n):i._inactiveSound();if(!a)return null;if(n&&!t&&(t=a._sprite||"__default"),"loaded"!==i._state){a._sprite=t,a._ended=!1;var u=a._id;return i._queue.push({event:"play",action:function(){i.play(u)}}),u}if(n&&!a._paused)return e||i._loadQueue("play"),a._id;i._webAudio&&r._autoResume();var h=Math.max(0,a._seek>0?a._seek:i._sprite[t][0]/1e3),l=Math.max(0,(i._sprite[t][0]+i._sprite[t][1])/1e3-h),c=1e3*l/Math.abs(a._rate);a._paused=!1,a._ended=!1,a._sprite=t,a._seek=h,a._start=i._sprite[t][0]/1e3,a._stop=(i._sprite[t][0]+i._sprite[t][1])/1e3,a._loop=!(!a._loop&&!i._sprite[t][2]);var d=a._node;if(i._webAudio){var f=function(){i._refreshBuffer(a);var t=a._muted||i._muted?0:a._volume;d.gain.setValueAtTime(t,r.ctx.currentTime),a._playStart=r.ctx.currentTime,void 0===d.bufferSource.start?a._loop?d.bufferSource.noteGrainOn(0,h,86400):d.bufferSource.noteGrainOn(0,h,l):a._loop?d.bufferSource.start(0,h,86400):d.bufferSource.start(0,h,l),c!==1/0&&(i._endTimers[a._id]=setTimeout(i._ended.bind(i,a),c)),e||setTimeout(function(){i._emit("play",a._id)},0)};"running"===r.state?f():(i.once("resume",f),i._clearTimer(a._id))}else{var p=function(){d.currentTime=h,d.muted=a._muted||i._muted||r._muted||d.muted,d.volume=a._volume*r.volume(),d.playbackRate=a._rate;try{var n=d.play();if("undefined"!=typeof Promise&&n instanceof Promise){i._playLock=!0;var o=function(){i._playLock=!1,e||i._emit("play",a._id)};n.then(o,o)}else e||i._emit("play",a._id);if(d.paused)return void i._emit("playerror",a._id,"Playback was unable to start. This is most commonly an issue on mobile devices where playback was not within a user interaction.");"__default"!==t?i._endTimers[a._id]=setTimeout(i._ended.bind(i,a),c):(i._endTimers[a._id]=function(){i._ended(a),d.removeEventListener("ended",i._endTimers[a._id],!1)},d.addEventListener("ended",i._endTimers[a._id],!1))}catch(t){i._emit("playerror",a._id,t)}},_=window&&window.ejecta||!d.readyState&&r._navigator.isCocoonJS;if(d.readyState>=3||_)p();else{var y=function(){p(),d.removeEventListener(r._canPlayEvent,y,!1)};d.addEventListener(r._canPlayEvent,y,!1),i._clearTimer(a._id)}}return a._id},pause:function(t){var e=this;if("loaded"!==e._state||e._playLock)return e._queue.push({event:"pause",action:function(){e.pause(t)}}),e;for(var i=e._getSoundIds(t),n=0;n<i.length;n++){e._clearTimer(i[n]);var o=e._soundById(i[n]);if(o&&!o._paused&&(o._seek=e.seek(i[n]),o._rateSeek=0,o._paused=!0,e._stopFade(i[n]),o._node))if(e._webAudio){if(!o._node.bufferSource)continue;void 0===o._node.bufferSource.stop?o._node.bufferSource.noteOff(0):o._node.bufferSource.stop(0),e._cleanBuffer(o._node)}else isNaN(o._node.duration)&&o._node.duration!==1/0||o._node.pause();arguments[1]||e._emit("pause",o?o._id:null)}return e},stop:function(t,e){var i=this;if("loaded"!==i._state)return i._queue.push({event:"stop",action:function(){i.stop(t)}}),i;for(var n=i._getSoundIds(t),o=0;o<n.length;o++){i._clearTimer(n[o]);var r=i._soundById(n[o]);r&&(r._seek=r._start||0,r._rateSeek=0,r._paused=!0,r._ended=!0,i._stopFade(n[o]),r._node&&(i._webAudio?r._node.bufferSource&&(void 0===r._node.bufferSource.stop?r._node.bufferSource.noteOff(0):r._node.bufferSource.stop(0),i._cleanBuffer(r._node)):isNaN(r._node.duration)&&r._node.duration!==1/0||(r._node.currentTime=r._start||0,r._node.pause())),e||i._emit("stop",r._id))}return i},mute:function(t,e){var i=this;if("loaded"!==i._state)return i._queue.push({event:"mute",action:function(){i.mute(t,e)}}),i;if(void 0===e){if("boolean"!=typeof t)return i._muted;i._muted=t}for(var n=i._getSoundIds(e),o=0;o<n.length;o++){var s=i._soundById(n[o]);s&&(s._muted=t,s._interval&&i._stopFade(s._id),i._webAudio&&s._node?s._node.gain.setValueAtTime(t?0:s._volume,r.ctx.currentTime):s._node&&(s._node.muted=!!r._muted||t),i._emit("mute",s._id))}return i},volume:function(){var t,e,i,n=this,o=arguments;if(0===o.length)return n._volume;if(1===o.length||2===o.length&&void 0===o[1]?n._getSoundIds().indexOf(o[0])>=0?e=parseInt(o[0],10):t=parseFloat(o[0]):o.length>=2&&(t=parseFloat(o[0]),e=parseInt(o[1],10)),!(void 0!==t&&t>=0&&t<=1))return(i=e?n._soundById(e):n._sounds[0])?i._volume:0;if("loaded"!==n._state)return n._queue.push({event:"volume",action:function(){n.volume.apply(n,o)}}),n;void 0===e&&(n._volume=t),e=n._getSoundIds(e);for(var s=0;s<e.length;s++)(i=n._soundById(e[s]))&&(i._volume=t,o[2]||n._stopFade(e[s]),n._webAudio&&i._node&&!i._muted?i._node.gain.setValueAtTime(t,r.ctx.currentTime):i._node&&!i._muted&&(i._node.volume=t*r.volume()),n._emit("volume",i._id));return n},fade:function(t,e,i,n){var o=this;if("loaded"!==o._state)return o._queue.push({event:"fade",action:function(){o.fade(t,e,i,n)}}),o;o.volume(t,n);for(var s=o._getSoundIds(n),a=0;a<s.length;a++){var u=o._soundById(s[a]);if(u){if(n||o._stopFade(s[a]),o._webAudio&&!u._muted){var h=r.ctx.currentTime,l=h+i/1e3;u._volume=t,u._node.gain.setValueAtTime(t,h),u._node.gain.linearRampToValueAtTime(e,l)}o._startFadeInterval(u,t,e,i,s[a],void 0===n)}}return o},_startFadeInterval:function(t,e,i,n,o,r){var s=this,a=e,u=i-e,h=Math.abs(u/.01),l=Math.max(4,h>0?n/h:n),c=Date.now();t._fadeTo=i,t._interval=setInterval(function(){var o=(Date.now()-c)/n;c=Date.now(),a+=u*o,a=Math.max(0,a),a=Math.min(1,a),a=Math.round(100*a)/100,s._webAudio?t._volume=a:s.volume(a,t._id,!0),r&&(s._volume=a),(i<e&&a<=i||i>e&&a>=i)&&(clearInterval(t._interval),t._interval=null,t._fadeTo=null,s.volume(i,t._id),s._emit("fade",t._id))},l)},_stopFade:function(t){var e=this._soundById(t);return e&&e._interval&&(this._webAudio&&e._node.gain.cancelScheduledValues(r.ctx.currentTime),clearInterval(e._interval),e._interval=null,this.volume(e._fadeTo,t),e._fadeTo=null,this._emit("fade",t)),this},loop:function(){var t,e,i,n=arguments;if(0===n.length)return this._loop;if(1===n.length){if("boolean"!=typeof n[0])return!!(i=this._soundById(parseInt(n[0],10)))&&i._loop;t=n[0],this._loop=t}else 2===n.length&&(t=n[0],e=parseInt(n[1],10));for(var o=this._getSoundIds(e),r=0;r<o.length;r++)(i=this._soundById(o[r]))&&(i._loop=t,this._webAudio&&i._node&&i._node.bufferSource&&(i._node.bufferSource.loop=t,t&&(i._node.bufferSource.loopStart=i._start||0,i._node.bufferSource.loopEnd=i._stop)));return this},rate:function(){var t,e,i,n=this,o=arguments;if(0===o.length)e=n._sounds[0]._id;else if(1===o.length){n._getSoundIds().indexOf(o[0])>=0?e=parseInt(o[0],10):t=parseFloat(o[0])}else 2===o.length&&(t=parseFloat(o[0]),e=parseInt(o[1],10));if("number"!=typeof t)return(i=n._soundById(e))?i._rate:n._rate;if("loaded"!==n._state)return n._queue.push({event:"rate",action:function(){n.rate.apply(n,o)}}),n;void 0===e&&(n._rate=t),e=n._getSoundIds(e);for(var s=0;s<e.length;s++)if(i=n._soundById(e[s])){i._rateSeek=n.seek(e[s]),i._playStart=n._webAudio?r.ctx.currentTime:i._playStart,i._rate=t,n._webAudio&&i._node&&i._node.bufferSource?i._node.bufferSource.playbackRate.setValueAtTime(t,r.ctx.currentTime):i._node&&(i._node.playbackRate=t);var a=n.seek(e[s]),u=1e3*((n._sprite[i._sprite][0]+n._sprite[i._sprite][1])/1e3-a)/Math.abs(i._rate);!n._endTimers[e[s]]&&i._paused||(n._clearTimer(e[s]),n._endTimers[e[s]]=setTimeout(n._ended.bind(n,i),u)),n._emit("rate",i._id)}return n},seek:function(){var t,e,i=this,n=arguments;if(0===n.length)e=i._sounds[0]._id;else if(1===n.length){i._getSoundIds().indexOf(n[0])>=0?e=parseInt(n[0],10):i._sounds.length&&(e=i._sounds[0]._id,t=parseFloat(n[0]))}else 2===n.length&&(t=parseFloat(n[0]),e=parseInt(n[1],10));if(void 0===e)return i;if("loaded"!==i._state)return i._queue.push({event:"seek",action:function(){i.seek.apply(i,n)}}),i;var o=i._soundById(e);if(o){if(!("number"==typeof t&&t>=0)){if(i._webAudio){var s=i.playing(e)?r.ctx.currentTime-o._playStart:0,a=o._rateSeek?o._rateSeek-o._seek:0;return o._seek+(a+s*Math.abs(o._rate))}return o._node.currentTime}var u=i.playing(e);if(u&&i.pause(e,!0),o._seek=t,o._ended=!1,i._clearTimer(e),u&&i.play(e,!0),!i._webAudio&&o._node&&(o._node.currentTime=t),u&&!i._webAudio){var h=function(){i._playLock?setTimeout(h,0):i._emit("seek",e)};setTimeout(h,0)}else i._emit("seek",e)}return i},playing:function(t){if("number"==typeof t){var e=this._soundById(t);return!!e&&!e._paused}for(var i=0;i<this._sounds.length;i++)if(!this._sounds[i]._paused)return!0;return!1},duration:function(t){var e=this._duration,i=this._soundById(t);return i&&(e=this._sprite[i._sprite][1]/1e3),e},state:function(){return this._state},unload:function(){for(var t=this,e=t._sounds,i=0;i<e.length;i++){if(e[i]._paused||t.stop(e[i]._id),!t._webAudio)/MSIE |Trident\//.test(r._navigator&&r._navigator.userAgent)||(e[i]._node.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"),e[i]._node.removeEventListener("error",e[i]._errorFn,!1),e[i]._node.removeEventListener(r._canPlayEvent,e[i]._loadFn,!1);delete e[i]._node,t._clearTimer(e[i]._id);var n=r._howls.indexOf(t);n>=0&&r._howls.splice(n,1)}var o=!0;for(i=0;i<r._howls.length;i++)if(r._howls[i]._src===t._src){o=!1;break}return u&&o&&delete u[t._src],r.noAudio=!1,t._state="unloaded",t._sounds=[],t=null,null},on:function(t,e,i,n){var o=this["_on"+t];return"function"==typeof e&&o.push(n?{id:i,fn:e,once:n}:{id:i,fn:e}),this},off:function(t,e,i){var n=this["_on"+t],o=0;if("number"==typeof e&&(i=e,e=null),e||i)for(o=0;o<n.length;o++){var r=i===n[o].id;if(e===n[o].fn&&r||!e&&r){n.splice(o,1);break}}else if(t)this["_on"+t]=[];else{var s=Object.keys(this);for(o=0;o<s.length;o++)0===s[o].indexOf("_on")&&Array.isArray(this[s[o]])&&(this[s[o]]=[])}return this},once:function(t,e,i){return this.on(t,e,i,1),this},_emit:function(t,e,i){for(var n=this["_on"+t],o=n.length-1;o>=0;o--)n[o].id&&n[o].id!==e&&"load"!==t||(setTimeout(function(t){t.call(this,e,i)}.bind(this,n[o].fn),0),n[o].once&&this.off(t,n[o].fn,n[o].id));return this._loadQueue(t),this},_loadQueue:function(t){if(this._queue.length>0){var e=this._queue[0];e.event===t&&(this._queue.shift(),this._loadQueue()),t||e.action()}return this},_ended:function(t){var e=t._sprite;if(!this._webAudio&&t._node&&!t._node.paused&&!t._node.ended&&t._node.currentTime<t._stop)return setTimeout(this._ended.bind(this,t),100),this;var i=!(!t._loop&&!this._sprite[e][2]);if(this._emit("end",t._id),!this._webAudio&&i&&this.stop(t._id,!0).play(t._id),this._webAudio&&i){this._emit("play",t._id),t._seek=t._start||0,t._rateSeek=0,t._playStart=r.ctx.currentTime;var n=1e3*(t._stop-t._start)/Math.abs(t._rate);this._endTimers[t._id]=setTimeout(this._ended.bind(this,t),n)}return this._webAudio&&!i&&(t._paused=!0,t._ended=!0,t._seek=t._start||0,t._rateSeek=0,this._clearTimer(t._id),this._cleanBuffer(t._node),r._autoSuspend()),this._webAudio||i||this.stop(t._id),this},_clearTimer:function(t){if(this._endTimers[t]){if("function"!=typeof this._endTimers[t])clearTimeout(this._endTimers[t]);else{var e=this._soundById(t);e&&e._node&&e._node.removeEventListener("ended",this._endTimers[t],!1)}delete this._endTimers[t]}return this},_soundById:function(t){for(var e=0;e<this._sounds.length;e++)if(t===this._sounds[e]._id)return this._sounds[e];return null},_inactiveSound:function(){this._drain();for(var t=0;t<this._sounds.length;t++)if(this._sounds[t]._ended)return this._sounds[t].reset();return new a(this)},_drain:function(){var t=this._pool,e=0,i=0;if(!(this._sounds.length<t)){for(i=0;i<this._sounds.length;i++)this._sounds[i]._ended&&e++;for(i=this._sounds.length-1;i>=0;i--){if(e<=t)return;this._sounds[i]._ended&&(this._webAudio&&this._sounds[i]._node&&this._sounds[i]._node.disconnect(0),this._sounds.splice(i,1),e--)}}},_getSoundIds:function(t){if(void 0===t){for(var e=[],i=0;i<this._sounds.length;i++)e.push(this._sounds[i]._id);return e}return[t]},_refreshBuffer:function(t){return t._node.bufferSource=r.ctx.createBufferSource(),t._node.bufferSource.buffer=u[this._src],t._panner?t._node.bufferSource.connect(t._panner):t._node.bufferSource.connect(t._node),t._node.bufferSource.loop=t._loop,t._loop&&(t._node.bufferSource.loopStart=t._start||0,t._node.bufferSource.loopEnd=t._stop),t._node.bufferSource.playbackRate.setValueAtTime(t._rate,r.ctx.currentTime),this},_cleanBuffer:function(t){if(r._scratchBuffer){t.bufferSource.onended=null,t.bufferSource.disconnect(0);try{t.bufferSource.buffer=r._scratchBuffer}catch(t){}}return t.bufferSource=null,this}};var a=function(t){this._parent=t,this.init()};a.prototype={init:function(){var t=this._parent;return this._muted=t._muted,this._loop=t._loop,this._volume=t._volume,this._rate=t._rate,this._seek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._id=++r._counter,t._sounds.push(this),this.create(),this},create:function(){var t=this._parent,e=r._muted||this._muted||this._parent._muted?0:this._volume;return t._webAudio?(this._node=void 0===r.ctx.createGain?r.ctx.createGainNode():r.ctx.createGain(),this._node.gain.setValueAtTime(e,r.ctx.currentTime),this._node.paused=!0,this._node.connect(r.masterGain)):(this._node=new Audio,this._errorFn=this._errorListener.bind(this),this._node.addEventListener("error",this._errorFn,!1),this._loadFn=this._loadListener.bind(this),this._node.addEventListener(r._canPlayEvent,this._loadFn,!1),this._node.src=t._src,this._node.preload="auto",this._node.volume=e*r.volume(),this._node.load()),this},reset:function(){var t=this._parent;return this._muted=t._muted,this._loop=t._loop,this._volume=t._volume,this._rate=t._rate,this._seek=0,this._rateSeek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._id=++r._counter,this},_errorListener:function(){this._parent._emit("loaderror",this._id,this._node.error?this._node.error.code:0),this._node.removeEventListener("error",this._errorFn,!1)},_loadListener:function(){var t=this._parent;t._duration=Math.ceil(10*this._node.duration)/10,0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue()),this._node.removeEventListener(r._canPlayEvent,this._loadFn,!1)}};var u={},h=function(t){var e=t._src;if(u[e])return t._duration=u[e].duration,void d(t);if(/^data:[^;]+;base64,/.test(e)){for(var i=atob(e.split(",")[1]),n=new Uint8Array(i.length),o=0;o<i.length;++o)n[o]=i.charCodeAt(o);c(n.buffer,t)}else{var r=new XMLHttpRequest;r.open("GET",e,!0),r.withCredentials=t._xhrWithCredentials,r.responseType="arraybuffer",r.onload=function(){var e=(r.status+"")[0];"0"===e||"2"===e||"3"===e?c(r.response,t):t._emit("loaderror",null,"Failed loading audio file with status: "+r.status+".")},r.onerror=function(){t._webAudio&&(t._html5=!0,t._webAudio=!1,t._sounds=[],delete u[e],t.load())},l(r)}},l=function(t){try{t.send()}catch(e){t.onerror()}},c=function(t,e){r.ctx.decodeAudioData(t,function(t){t&&e._sounds.length>0&&(u[e._src]=t,d(e,t))},function(){e._emit("loaderror",null,"Decoding audio data failed.")})},d=function(t,e){e&&!t._duration&&(t._duration=e.duration),0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue())},f=function(){try{"undefined"!=typeof AudioContext?r.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?r.ctx=new webkitAudioContext:r.usingWebAudio=!1}catch(t){r.usingWebAudio=!1}var t=/iP(hone|od|ad)/.test(r._navigator&&r._navigator.platform),e=r._navigator&&r._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),i=e?parseInt(e[1],10):null;if(t&&i&&i<9){var n=/safari/.test(r._navigator&&r._navigator.userAgent.toLowerCase());(r._navigator&&r._navigator.standalone&&!n||r._navigator&&!r._navigator.standalone&&!n)&&(r.usingWebAudio=!1)}r.usingWebAudio&&(r.masterGain=void 0===r.ctx.createGain?r.ctx.createGainNode():r.ctx.createGain(),r.masterGain.gain.setValueAtTime(r._muted?0:1,r.ctx.currentTime),r.masterGain.connect(r.ctx.destination)),r._setup()};void 0===(n=function(){return{Howler:r,Howl:s}}.apply(e,[]))||(t.exports=n),e.Howler=r,e.Howl=s,"undefined"!=typeof window?(window.HowlerGlobal=o,window.Howler=r,window.Howl=s,window.Sound=a):void 0!==i&&(i.HowlerGlobal=o,i.Howler=r,i.Howl=s,i.Sound=a)}(),
/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.0.9
 *  howlerjs.com
 *
 *  (c) 2013-2018, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */
function(){"use strict";var t;HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){if(!this.ctx||!this.ctx.listener)return this;for(var e=this._howls.length-1;e>=0;e--)this._howls[e].stereo(t);return this},HowlerGlobal.prototype.pos=function(t,e,i){return this.ctx&&this.ctx.listener?(e="number"!=typeof e?this._pos[1]:e,i="number"!=typeof i?this._pos[2]:i,"number"!=typeof t?this._pos:(this._pos=[t,e,i],this.ctx.listener.setPosition(this._pos[0],this._pos[1],this._pos[2]),this)):this},HowlerGlobal.prototype.orientation=function(t,e,i,n,o,r){if(!this.ctx||!this.ctx.listener)return this;var s=this._orientation;return e="number"!=typeof e?s[1]:e,i="number"!=typeof i?s[2]:i,n="number"!=typeof n?s[3]:n,o="number"!=typeof o?s[4]:o,r="number"!=typeof r?s[5]:r,"number"!=typeof t?s:(this._orientation=[t,e,i,n,o,r],this.ctx.listener.setOrientation(t,e,i,n,o,r),this)},Howl.prototype.init=(t=Howl.prototype.init,function(e){return this._orientation=e.orientation||[1,0,0],this._stereo=e.stereo||null,this._pos=e.pos||null,this._pannerAttr={coneInnerAngle:void 0!==e.coneInnerAngle?e.coneInnerAngle:360,coneOuterAngle:void 0!==e.coneOuterAngle?e.coneOuterAngle:360,coneOuterGain:void 0!==e.coneOuterGain?e.coneOuterGain:0,distanceModel:void 0!==e.distanceModel?e.distanceModel:"inverse",maxDistance:void 0!==e.maxDistance?e.maxDistance:1e4,panningModel:void 0!==e.panningModel?e.panningModel:"HRTF",refDistance:void 0!==e.refDistance?e.refDistance:1,rolloffFactor:void 0!==e.rolloffFactor?e.rolloffFactor:1},this._onstereo=e.onstereo?[{fn:e.onstereo}]:[],this._onpos=e.onpos?[{fn:e.onpos}]:[],this._onorientation=e.onorientation?[{fn:e.onorientation}]:[],t.call(this,e)}),Howl.prototype.stereo=function(t,i){var n=this;if(!n._webAudio)return n;if("loaded"!==n._state)return n._queue.push({event:"stereo",action:function(){n.stereo(t,i)}}),n;var o=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===i){if("number"!=typeof t)return n._stereo;n._stereo=t,n._pos=[t,0,0]}for(var r=n._getSoundIds(i),s=0;s<r.length;s++){var a=n._soundById(r[s]);if(a){if("number"!=typeof t)return a._stereo;a._stereo=t,a._pos=[t,0,0],a._node&&(a._pannerAttr.panningModel="equalpower",a._panner&&a._panner.pan||e(a,o),"spatial"===o?a._panner.setPosition(t,0,0):a._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),n._emit("stereo",a._id)}}return n},Howl.prototype.pos=function(t,i,n,o){var r=this;if(!r._webAudio)return r;if("loaded"!==r._state)return r._queue.push({event:"pos",action:function(){r.pos(t,i,n,o)}}),r;if(i="number"!=typeof i?0:i,n="number"!=typeof n?-.5:n,void 0===o){if("number"!=typeof t)return r._pos;r._pos=[t,i,n]}for(var s=r._getSoundIds(o),a=0;a<s.length;a++){var u=r._soundById(s[a]);if(u){if("number"!=typeof t)return u._pos;u._pos=[t,i,n],u._node&&(u._panner&&!u._panner.pan||e(u,"spatial"),u._panner.setPosition(t,i,n)),r._emit("pos",u._id)}}return r},Howl.prototype.orientation=function(t,i,n,o){var r=this;if(!r._webAudio)return r;if("loaded"!==r._state)return r._queue.push({event:"orientation",action:function(){r.orientation(t,i,n,o)}}),r;if(i="number"!=typeof i?r._orientation[1]:i,n="number"!=typeof n?r._orientation[2]:n,void 0===o){if("number"!=typeof t)return r._orientation;r._orientation=[t,i,n]}for(var s=r._getSoundIds(o),a=0;a<s.length;a++){var u=r._soundById(s[a]);if(u){if("number"!=typeof t)return u._orientation;u._orientation=[t,i,n],u._node&&(u._panner||(u._pos||(u._pos=r._pos||[0,0,-.5]),e(u,"spatial")),u._panner.setOrientation(t,i,n)),r._emit("orientation",u._id)}}return r},Howl.prototype.pannerAttr=function(){var t,i,n,o=arguments;if(!this._webAudio)return this;if(0===o.length)return this._pannerAttr;if(1===o.length){if("object"!=typeof o[0])return(n=this._soundById(parseInt(o[0],10)))?n._pannerAttr:this._pannerAttr;t=o[0],void 0===i&&(t.pannerAttr||(t.pannerAttr={coneInnerAngle:t.coneInnerAngle,coneOuterAngle:t.coneOuterAngle,coneOuterGain:t.coneOuterGain,distanceModel:t.distanceModel,maxDistance:t.maxDistance,refDistance:t.refDistance,rolloffFactor:t.rolloffFactor,panningModel:t.panningModel}),this._pannerAttr={coneInnerAngle:void 0!==t.pannerAttr.coneInnerAngle?t.pannerAttr.coneInnerAngle:this._coneInnerAngle,coneOuterAngle:void 0!==t.pannerAttr.coneOuterAngle?t.pannerAttr.coneOuterAngle:this._coneOuterAngle,coneOuterGain:void 0!==t.pannerAttr.coneOuterGain?t.pannerAttr.coneOuterGain:this._coneOuterGain,distanceModel:void 0!==t.pannerAttr.distanceModel?t.pannerAttr.distanceModel:this._distanceModel,maxDistance:void 0!==t.pannerAttr.maxDistance?t.pannerAttr.maxDistance:this._maxDistance,refDistance:void 0!==t.pannerAttr.refDistance?t.pannerAttr.refDistance:this._refDistance,rolloffFactor:void 0!==t.pannerAttr.rolloffFactor?t.pannerAttr.rolloffFactor:this._rolloffFactor,panningModel:void 0!==t.pannerAttr.panningModel?t.pannerAttr.panningModel:this._panningModel})}else 2===o.length&&(t=o[0],i=parseInt(o[1],10));for(var r=this._getSoundIds(i),s=0;s<r.length;s++)if(n=this._soundById(r[s])){var a=n._pannerAttr;a={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:a.coneInnerAngle,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:a.coneOuterAngle,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:a.coneOuterGain,distanceModel:void 0!==t.distanceModel?t.distanceModel:a.distanceModel,maxDistance:void 0!==t.maxDistance?t.maxDistance:a.maxDistance,refDistance:void 0!==t.refDistance?t.refDistance:a.refDistance,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:a.rolloffFactor,panningModel:void 0!==t.panningModel?t.panningModel:a.panningModel};var u=n._panner;u?(u.coneInnerAngle=a.coneInnerAngle,u.coneOuterAngle=a.coneOuterAngle,u.coneOuterGain=a.coneOuterGain,u.distanceModel=a.distanceModel,u.maxDistance=a.maxDistance,u.refDistance=a.refDistance,u.rolloffFactor=a.rolloffFactor,u.panningModel=a.panningModel):(n._pos||(n._pos=this._pos||[0,0,-.5]),e(n,"spatial"))}return this},Sound.prototype.init=function(t){return function(){var e=this._parent;this._orientation=e._orientation,this._stereo=e._stereo,this._pos=e._pos,this._pannerAttr=e._pannerAttr,t.call(this),this._stereo?e.stereo(this._stereo):this._pos&&e.pos(this._pos[0],this._pos[1],this._pos[2],this._id)}}(Sound.prototype.init),Sound.prototype.reset=function(t){return function(){var e=this._parent;return this._orientation=e._orientation,this._pos=e._pos,this._pannerAttr=e._pannerAttr,t.call(this)}}(Sound.prototype.reset);var e=function(t,e){"spatial"===(e=e||"spatial")?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.panningModel=t._pannerAttr.panningModel,t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.setValueAtTime(t._stereo,Howler.ctx.currentTime)),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id,!0)}}()}).call(this,i(26))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={};e.RAD=n;var o={};e.COS=o;var r={};e.SIN=r;for(var s=Math.PI/180,a=0;a<=360;a++)n[a]=a*s,o[a]=Math.cos(n[a]),r[a]=Math.sin(n[a]),n[-a]=-a*s,o[-a]=Math.cos(n[-a]),r[-a]=Math.sin(n[-a])},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(12),o=i(25),r=i(24),s=i(23),a=i(22),u=i(21),h=i(20),l=i(2),c=i(1),d=i(0),f=i(4),p=function(){function t(t){this.level=7,this.extraLifeScore=0,this.score=0,this.lives=3,this.shipBullets=[],this.alienBullets=[],this.shockwaves=[],this.rocks=[],this.scenery=[],this.shipTimer=0,this.alienTimer=0,this.levelTimer=0,this.gameOverTimer=0,this.shakeTimer=0,this.powerupTimer=0,this.dramticPauseTimer=0,this.gameOver=!1,this.started=!1,this.highscore=t}return Object.defineProperty(t.prototype,"objects",{get:function(){return[this.ship,this.alien,this.powerup].concat(this.shipBullets,this.alienBullets,this.rocks,this.shockwaves,this.scenery)},enumerable:!0,configurable:!0}),t.prototype.update=function(t){this.dramticPauseTimer>0?this.dramticPauseTimer--:(this.shakeTimer>0&&(this.shakeTimer-=t),this.powerup||(this.powerupTimer+=t),this.objects.forEach(function(e){e&&e.update(t)}))},t.prototype.render=function(t){this.shakeTimer>0&&d.default.preShake(),this.objects.forEach(function(e){e&&e.render(t)}),this.shakeTimer>0&&d.default.postShake()},t.prototype.startLevel=function(){this.level++,this.levelTimer=0,this.powerupTimer=0,this.alienTimer||(this.alienTimer=c.random(10,15)),this.scenery.length=0,this.shipBullets.forEach(function(t){return t.destroy()}),this.addRocks()},t.prototype.addRocks=function(){for(var t=Math.min(this.level+3,10),e=0;e<t;e++){var i=c.random(1,4),n=l.Vector.fromAngle(c.random(1,360)),o=void 0,r=void 0;switch(i){case 1:o=c.random(20,d.default.width-20),r=c.random(20,40);break;case 2:o=c.random(d.default.width-40,d.default.width-20),r=c.random(d.default.height-20,d.default.height-20);break;case 3:o=c.random(20,d.default.width-20),r=c.random(d.default.height-20,d.default.height-20);break;default:o=c.random(20,40),r=c.random(d.default.height-20,d.default.height-20)}var s=new u.Rock(o,r,n,u.RockSize.Large,150);this.rocks.push(s)}},t.prototype.addShip=function(t,e){var i=this;this.ship=new n.Ship(t,e),this.ship.on("fire",function(t,e){e.on("expired",function(){i.shipBullets=i.shipBullets.filter(function(t){return t!==e})}),i.shipBullets.push(e)}),this.ship.on("expired",function(){i.lives--,i.ship=null,i.shipBullets.length=0})},t.prototype.createExplosion=function(t,e,i){var n=this;if(void 0===e&&(e=100),void 0===i&&(i=1),t){var o=new r.Explosion(t.origin.x,t.origin.y,e);this.addScenery(o);var a=new s.Shockwave(t.origin.x,t.origin.y,t.velocity,e,i);return a.on("expired",function(){n.shockwaves=n.shockwaves.filter(function(t){return t!==a})}),this.shockwaves.push(a),{explosion:o,shockwave:a}}},t.prototype.shipDestroyed=function(){this.ship&&(f.largeExplosion.play(),this.createExplosion(this.ship),this.addFlash(5),this.ship.destroy())},t.prototype.alienDestroyed=function(){this.alien&&(this.addFlash(5),this.createExplosion(this.alien),this.alien.destroy())},t.prototype.addFlash=function(t){var e=new a.Flash(t);this.addScenery(e)},t.prototype.addScenery=function(t){var e=this;t.on("expired",function(){e.scenery=e.scenery.filter(function(e){return e!==t})}),this.scenery.push(t)},t.prototype.rockDestroyed=function(t,e){void 0===e&&(e=1);var i,n=this.createExplosion(t,5*t.size,e),o=t.split();this.rocks=this.rocks.filter(function(e){return e!==t}),(i=this.rocks).push.apply(i,o),this.shockwaves.forEach(function(e){e.rocks=e.rocks.filter(function(e){return e!==t})}),n.shockwave.rocks=o,t=null},t.prototype.addAlien=function(){var t=this,e=Math.min(this.level,14),i=!1,n=f.largeAlien;if(this.score>=4e4)i=!0;else switch(e){case 7:i=this.levelTimer>60&&2===c.random(1,3);break;case 8:i=this.levelTimer>30&&c.random(1,10)%2==0;break;default:i=c.random(1,10)<=e+2}i?(n=f.smallAlien,this.alien=new o.SmallAlien(this.ship)):this.alien=new o.BigAlien,n.play(),this.alien.on("expired",function(){f.alienFire.stop(),n.stop(),f.largeExplosion.play(),t.alien=null,t.alienBullets.forEach(function(t){return t.destroy()}),t.alienBullets.length=0}),this.alien.on("fire",function(e,i){f.alienFire.play(),i.on("expired",function(){t.alienBullets=t.alienBullets.filter(function(t){return t!==i})}),t.alienBullets.push(i)})},t.prototype.addScore=function(t){this.score+=t.score,this.extraLifeScore+=t.score,this.score>this.highscore&&(this.highscore=this.score),this.extraLifeScore>=1e4&&(this.lives++,this.extraLifeScore-=1e4,f.extraLife.play());var e=new h.ScoreMarker(t,"+"+t.score);this.addScenery(e)},t.prototype.addPowerup=function(){f.getPowerup.play()},t.prototype.shake=function(){this.shakeTimer<=0&&(this.shakeTimer=.5)},t.prototype.tryPlaceShip=function(t){if(this.shipTimer+=t,!(this.shipTimer<=2)){var e=d.default.shipRect,i=!1;this.rocks.forEach(function(t){i=i||t.collided(e)}),this.alien&&(i=i||this.alien.collided(e)),i||(this.shipTimer=0,this.addShip(d.default.width2,d.default.height2))}},t.prototype.updateAlienTimer=function(t){Math.min(this.level,7);this.alien||(this.alienTimer-=t,this.alienTimer<=0&&(this.addAlien(),this.alienTimer=c.random(10,15)))},t.prototype.shouldTryToPlaceShip=function(){return!!this.shipTimer||!this.ship&&!!this.lives},t.prototype.shouldCheckForNextLevel=function(){return!this.rocks.length&&!!this.lives},t.prototype.shouldCheckCollisions=function(){return!!this.ship||!!this.shipBullets.length},t}();e.World=p},function(t,e,i){var n;
/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */
/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */
!function(o,r,s,a){"use strict";var u,h=["","webkit","Moz","MS","ms","o"],l=r.createElement("div"),c="function",d=Math.round,f=Math.abs,p=Date.now;function _(t,e,i){return setTimeout(x(t,i),e)}function y(t,e,i){return!!Array.isArray(t)&&(v(t,i[e],i),!0)}function v(t,e,i){var n;if(t)if(t.forEach)t.forEach(e,i);else if(t.length!==a)for(n=0;n<t.length;)e.call(i,t[n],n,t),n++;else for(n in t)t.hasOwnProperty(n)&&e.call(i,t[n],n,t)}function m(t,e,i){var n="DEPRECATED METHOD: "+e+"\n"+i+" AT \n";return function(){var e=new Error("get-stack-trace"),i=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",r=o.console&&(o.console.warn||o.console.log);return r&&r.call(o.console,n,i),t.apply(this,arguments)}}u="function"!=typeof Object.assign?function(t){if(t===a||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var n=arguments[i];if(n!==a&&null!==n)for(var o in n)n.hasOwnProperty(o)&&(e[o]=n[o])}return e}:Object.assign;var g=m(function(t,e,i){for(var n=Object.keys(e),o=0;o<n.length;)(!i||i&&t[n[o]]===a)&&(t[n[o]]=e[n[o]]),o++;return t},"extend","Use `assign`."),w=m(function(t,e){return g(t,e,!0)},"merge","Use `assign`.");function b(t,e,i){var n,o=e.prototype;(n=t.prototype=Object.create(o)).constructor=t,n._super=o,i&&u(n,i)}function x(t,e){return function(){return t.apply(e,arguments)}}function T(t,e){return typeof t==c?t.apply(e&&e[0]||a,e):t}function A(t,e){return t===a?e:t}function S(t,e,i){v(E(e),function(e){t.addEventListener(e,i,!1)})}function k(t,e,i){v(E(e),function(e){t.removeEventListener(e,i,!1)})}function P(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function O(t,e){return t.indexOf(e)>-1}function E(t){return t.trim().split(/\s+/g)}function M(t,e,i){if(t.indexOf&&!i)return t.indexOf(e);for(var n=0;n<t.length;){if(i&&t[n][i]==e||!i&&t[n]===e)return n;n++}return-1}function I(t){return Array.prototype.slice.call(t,0)}function j(t,e,i){for(var n=[],o=[],r=0;r<t.length;){var s=e?t[r][e]:t[r];M(o,s)<0&&n.push(t[r]),o[r]=s,r++}return i&&(n=e?n.sort(function(t,i){return t[e]>i[e]}):n.sort()),n}function D(t,e){for(var i,n,o=e[0].toUpperCase()+e.slice(1),r=0;r<h.length;){if((n=(i=h[r])?i+o:e)in t)return n;r++}return a}var R=1;function B(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||o}var C="ontouchstart"in o,L=D(o,"PointerEvent")!==a,F=C&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),H=25,G=1,N=2,z=4,V=8,q=1,W=2,K=4,Y=8,X=16,U=W|K,$=Y|X,Q=U|$,Z=["x","y"],J=["clientX","clientY"];function tt(t,e){var i=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){T(t.options.enable,[t])&&i.handler(e)},this.init()}function et(t,e,i){var n=i.pointers.length,o=i.changedPointers.length,r=e&G&&n-o==0,s=e&(z|V)&&n-o==0;i.isFirst=!!r,i.isFinal=!!s,r&&(t.session={}),i.eventType=e,function(t,e){var i=t.session,n=e.pointers,o=n.length;i.firstInput||(i.firstInput=it(e));o>1&&!i.firstMultiple?i.firstMultiple=it(e):1===o&&(i.firstMultiple=!1);var r=i.firstInput,s=i.firstMultiple,u=s?s.center:r.center,h=e.center=nt(n);e.timeStamp=p(),e.deltaTime=e.timeStamp-r.timeStamp,e.angle=at(u,h),e.distance=st(u,h),function(t,e){var i=e.center,n=t.offsetDelta||{},o=t.prevDelta||{},r=t.prevInput||{};e.eventType!==G&&r.eventType!==z||(o=t.prevDelta={x:r.deltaX||0,y:r.deltaY||0},n=t.offsetDelta={x:i.x,y:i.y});e.deltaX=o.x+(i.x-n.x),e.deltaY=o.y+(i.y-n.y)}(i,e),e.offsetDirection=rt(e.deltaX,e.deltaY);var l=ot(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=l.x,e.overallVelocityY=l.y,e.overallVelocity=f(l.x)>f(l.y)?l.x:l.y,e.scale=s?(c=s.pointers,d=n,st(d[0],d[1],J)/st(c[0],c[1],J)):1,e.rotation=s?function(t,e){return at(e[1],e[0],J)+at(t[1],t[0],J)}(s.pointers,n):0,e.maxPointers=i.prevInput?e.pointers.length>i.prevInput.maxPointers?e.pointers.length:i.prevInput.maxPointers:e.pointers.length,function(t,e){var i,n,o,r,s=t.lastInterval||e,u=e.timeStamp-s.timeStamp;if(e.eventType!=V&&(u>H||s.velocity===a)){var h=e.deltaX-s.deltaX,l=e.deltaY-s.deltaY,c=ot(u,h,l);n=c.x,o=c.y,i=f(c.x)>f(c.y)?c.x:c.y,r=rt(h,l),t.lastInterval=e}else i=s.velocity,n=s.velocityX,o=s.velocityY,r=s.direction;e.velocity=i,e.velocityX=n,e.velocityY=o,e.direction=r}(i,e);var c,d;var _=t.element;P(e.srcEvent.target,_)&&(_=e.srcEvent.target);e.target=_}(t,i),t.emit("hammer.input",i),t.recognize(i),t.session.prevInput=i}function it(t){for(var e=[],i=0;i<t.pointers.length;)e[i]={clientX:d(t.pointers[i].clientX),clientY:d(t.pointers[i].clientY)},i++;return{timeStamp:p(),pointers:e,center:nt(e),deltaX:t.deltaX,deltaY:t.deltaY}}function nt(t){var e=t.length;if(1===e)return{x:d(t[0].clientX),y:d(t[0].clientY)};for(var i=0,n=0,o=0;o<e;)i+=t[o].clientX,n+=t[o].clientY,o++;return{x:d(i/e),y:d(n/e)}}function ot(t,e,i){return{x:e/t||0,y:i/t||0}}function rt(t,e){return t===e?q:f(t)>=f(e)?t<0?W:K:e<0?Y:X}function st(t,e,i){i||(i=Z);var n=e[i[0]]-t[i[0]],o=e[i[1]]-t[i[1]];return Math.sqrt(n*n+o*o)}function at(t,e,i){i||(i=Z);var n=e[i[0]]-t[i[0]],o=e[i[1]]-t[i[1]];return 180*Math.atan2(o,n)/Math.PI}tt.prototype={handler:function(){},init:function(){this.evEl&&S(this.element,this.evEl,this.domHandler),this.evTarget&&S(this.target,this.evTarget,this.domHandler),this.evWin&&S(B(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&k(this.element,this.evEl,this.domHandler),this.evTarget&&k(this.target,this.evTarget,this.domHandler),this.evWin&&k(B(this.element),this.evWin,this.domHandler)}};var ut={mousedown:G,mousemove:N,mouseup:z},ht="mousedown",lt="mousemove mouseup";function ct(){this.evEl=ht,this.evWin=lt,this.pressed=!1,tt.apply(this,arguments)}b(ct,tt,{handler:function(t){var e=ut[t.type];e&G&&0===t.button&&(this.pressed=!0),e&N&&1!==t.which&&(e=z),this.pressed&&(e&z&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}});var dt={pointerdown:G,pointermove:N,pointerup:z,pointercancel:V,pointerout:V},ft={2:"touch",3:"pen",4:"mouse",5:"kinect"},pt="pointerdown",_t="pointermove pointerup pointercancel";function yt(){this.evEl=pt,this.evWin=_t,tt.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}o.MSPointerEvent&&!o.PointerEvent&&(pt="MSPointerDown",_t="MSPointerMove MSPointerUp MSPointerCancel"),b(yt,tt,{handler:function(t){var e=this.store,i=!1,n=t.type.toLowerCase().replace("ms",""),o=dt[n],r=ft[t.pointerType]||t.pointerType,s="touch"==r,a=M(e,t.pointerId,"pointerId");o&G&&(0===t.button||s)?a<0&&(e.push(t),a=e.length-1):o&(z|V)&&(i=!0),a<0||(e[a]=t,this.callback(this.manager,o,{pointers:e,changedPointers:[t],pointerType:r,srcEvent:t}),i&&e.splice(a,1))}});var vt={touchstart:G,touchmove:N,touchend:z,touchcancel:V},mt="touchstart",gt="touchstart touchmove touchend touchcancel";function wt(){this.evTarget=mt,this.evWin=gt,this.started=!1,tt.apply(this,arguments)}b(wt,tt,{handler:function(t){var e=vt[t.type];if(e===G&&(this.started=!0),this.started){var i=function(t,e){var i=I(t.touches),n=I(t.changedTouches);e&(z|V)&&(i=j(i.concat(n),"identifier",!0));return[i,n]}.call(this,t,e);e&(z|V)&&i[0].length-i[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:"touch",srcEvent:t})}}});var bt={touchstart:G,touchmove:N,touchend:z,touchcancel:V},xt="touchstart touchmove touchend touchcancel";function Tt(){this.evTarget=xt,this.targetIds={},tt.apply(this,arguments)}b(Tt,tt,{handler:function(t){var e=bt[t.type],i=function(t,e){var i=I(t.touches),n=this.targetIds;if(e&(G|N)&&1===i.length)return n[i[0].identifier]=!0,[i,i];var o,r,s=I(t.changedTouches),a=[],u=this.target;if(r=i.filter(function(t){return P(t.target,u)}),e===G)for(o=0;o<r.length;)n[r[o].identifier]=!0,o++;o=0;for(;o<s.length;)n[s[o].identifier]&&a.push(s[o]),e&(z|V)&&delete n[s[o].identifier],o++;if(!a.length)return;return[j(r.concat(a),"identifier",!0),a]}.call(this,t,e);i&&this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:"touch",srcEvent:t})}});var At=2500,St=25;function kt(){tt.apply(this,arguments);var t=x(this.handler,this);this.touch=new Tt(this.manager,t),this.mouse=new ct(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function Pt(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var i={x:e.clientX,y:e.clientY};this.lastTouches.push(i);var n=this.lastTouches;setTimeout(function(){var t=n.indexOf(i);t>-1&&n.splice(t,1)},At)}}b(kt,tt,{handler:function(t,e,i){var n="touch"==i.pointerType,o="mouse"==i.pointerType;if(!(o&&i.sourceCapabilities&&i.sourceCapabilities.firesTouchEvents)){if(n)(function(t,e){t&G?(this.primaryTouch=e.changedPointers[0].identifier,Pt.call(this,e)):t&(z|V)&&Pt.call(this,e)}).call(this,e,i);else if(o&&function(t){for(var e=t.srcEvent.clientX,i=t.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var o=this.lastTouches[n],r=Math.abs(e-o.x),s=Math.abs(i-o.y);if(r<=St&&s<=St)return!0}return!1}.call(this,i))return;this.callback(t,e,i)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Ot=D(l.style,"touchAction"),Et=Ot!==a,Mt="auto",It="manipulation",jt="none",Dt="pan-x",Rt="pan-y",Bt=function(){if(!Et)return!1;var t={},e=o.CSS&&o.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(i){t[i]=!e||o.CSS.supports("touch-action",i)}),t}();function Ct(t,e){this.manager=t,this.set(e)}Ct.prototype={set:function(t){"compute"==t&&(t=this.compute()),Et&&this.manager.element.style&&Bt[t]&&(this.manager.element.style[Ot]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return v(this.manager.recognizers,function(e){T(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),function(t){if(O(t,jt))return jt;var e=O(t,Dt),i=O(t,Rt);if(e&&i)return jt;if(e||i)return e?Dt:Rt;if(O(t,It))return It;return Mt}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,i=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var n=this.actions,o=O(n,jt)&&!Bt[jt],r=O(n,Rt)&&!Bt[Rt],s=O(n,Dt)&&!Bt[Dt];if(o){var a=1===t.pointers.length,u=t.distance<2,h=t.deltaTime<250;if(a&&u&&h)return}if(!s||!r)return o||r&&i&U||s&&i&$?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var Lt=1,Ft=2,Ht=4,Gt=8,Nt=Gt,zt=16;function Vt(t){this.options=u({},this.defaults,t||{}),this.id=R++,this.manager=null,this.options.enable=A(this.options.enable,!0),this.state=Lt,this.simultaneous={},this.requireFail=[]}function qt(t){return t&zt?"cancel":t&Gt?"end":t&Ht?"move":t&Ft?"start":""}function Wt(t){return t==X?"down":t==Y?"up":t==W?"left":t==K?"right":""}function Kt(t,e){var i=e.manager;return i?i.get(t):t}function Yt(){Vt.apply(this,arguments)}function Xt(){Yt.apply(this,arguments),this.pX=null,this.pY=null}function Ut(){Yt.apply(this,arguments)}function $t(){Vt.apply(this,arguments),this._timer=null,this._input=null}function Qt(){Yt.apply(this,arguments)}function Zt(){Yt.apply(this,arguments)}function Jt(){Vt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function te(t,e){return(e=e||{}).recognizers=A(e.recognizers,te.defaults.preset),new ee(t,e)}Vt.prototype={defaults:{},set:function(t){return u(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(y(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=Kt(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return y(t,"dropRecognizeWith",this)?this:(t=Kt(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(y(t,"requireFailure",this))return this;var e=this.requireFail;return-1===M(e,t=Kt(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(y(t,"dropRequireFailure",this))return this;t=Kt(t,this);var e=M(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,i=this.state;function n(i){e.manager.emit(i,t)}i<Gt&&n(e.options.event+qt(i)),n(e.options.event),t.additionalEvent&&n(t.additionalEvent),i>=Gt&&n(e.options.event+qt(i))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=32},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(32|Lt)))return!1;t++}return!0},recognize:function(t){var e=u({},t);if(!T(this.options.enable,[this,e]))return this.reset(),void(this.state=32);this.state&(Nt|zt|32)&&(this.state=Lt),this.state=this.process(e),this.state&(Ft|Ht|Gt|zt)&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},b(Yt,Vt,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,i=t.eventType,n=e&(Ft|Ht),o=this.attrTest(t);return n&&(i&V||!o)?e|zt:n||o?i&z?e|Gt:e&Ft?e|Ht:Ft:32}}),b(Xt,Yt,{defaults:{event:"pan",threshold:10,pointers:1,direction:Q},getTouchAction:function(){var t=this.options.direction,e=[];return t&U&&e.push(Rt),t&$&&e.push(Dt),e},directionTest:function(t){var e=this.options,i=!0,n=t.distance,o=t.direction,r=t.deltaX,s=t.deltaY;return o&e.direction||(e.direction&U?(o=0===r?q:r<0?W:K,i=r!=this.pX,n=Math.abs(t.deltaX)):(o=0===s?q:s<0?Y:X,i=s!=this.pY,n=Math.abs(t.deltaY))),t.direction=o,i&&n>e.threshold&&o&e.direction},attrTest:function(t){return Yt.prototype.attrTest.call(this,t)&&(this.state&Ft||!(this.state&Ft)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=Wt(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),b(Ut,Yt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[jt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&Ft)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),b($t,Vt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Mt]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,o=t.deltaTime>e.time;if(this._input=t,!n||!i||t.eventType&(z|V)&&!o)this.reset();else if(t.eventType&G)this.reset(),this._timer=_(function(){this.state=Nt,this.tryEmit()},e.time,this);else if(t.eventType&z)return Nt;return 32},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===Nt&&(t&&t.eventType&z?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=p(),this.manager.emit(this.options.event,this._input)))}}),b(Qt,Yt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[jt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&Ft)}}),b(Zt,Yt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:U|$,pointers:1},getTouchAction:function(){return Xt.prototype.getTouchAction.call(this)},attrTest:function(t){var e,i=this.options.direction;return i&(U|$)?e=t.overallVelocity:i&U?e=t.overallVelocityX:i&$&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&i&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&f(e)>this.options.velocity&&t.eventType&z},emit:function(t){var e=Wt(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),b(Jt,Vt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[It]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,o=t.deltaTime<e.time;if(this.reset(),t.eventType&G&&0===this.count)return this.failTimeout();if(n&&o&&i){if(t.eventType!=z)return this.failTimeout();var r=!this.pTime||t.timeStamp-this.pTime<e.interval,s=!this.pCenter||st(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,s&&r?this.count+=1:this.count=1,this._input=t,0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=_(function(){this.state=Nt,this.tryEmit()},e.interval,this),Ft):Nt}return 32},failTimeout:function(){return this._timer=_(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Nt&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),te.VERSION="2.0.7",te.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[Qt,{enable:!1}],[Ut,{enable:!1},["rotate"]],[Zt,{direction:U}],[Xt,{direction:U},["swipe"]],[Jt],[Jt,{event:"doubletap",taps:2},["tap"]],[$t]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function ee(t,e){var i;this.options=u({},te.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new((i=this).options.inputClass||(L?yt:F?Tt:C?kt:ct))(i,et),this.touchAction=new Ct(this,this.options.touchAction),ie(this,!0),v(this.options.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function ie(t,e){var i,n=t.element;n.style&&(v(t.options.cssProps,function(o,r){i=D(n.style,r),e?(t.oldCssProps[i]=n.style[i],n.style[i]=o):n.style[i]=t.oldCssProps[i]||""}),e||(t.oldCssProps={}))}ee.prototype={set:function(t){return u(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){var i;this.touchAction.preventDefaults(t);var n=this.recognizers,o=e.curRecognizer;(!o||o&&o.state&Nt)&&(o=e.curRecognizer=null);for(var r=0;r<n.length;)i=n[r],2===e.stopped||o&&i!=o&&!i.canRecognizeWith(o)?i.reset():i.recognize(t),!o&&i.state&(Ft|Ht|Gt)&&(o=e.curRecognizer=i),r++}},get:function(t){if(t instanceof Vt)return t;for(var e=this.recognizers,i=0;i<e.length;i++)if(e[i].options.event==t)return e[i];return null},add:function(t){if(y(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(y(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,i=M(e,t);-1!==i&&(e.splice(i,1),this.touchAction.update())}return this},on:function(t,e){if(t!==a&&e!==a){var i=this.handlers;return v(E(t),function(t){i[t]=i[t]||[],i[t].push(e)}),this}},off:function(t,e){if(t!==a){var i=this.handlers;return v(E(t),function(t){e?i[t]&&i[t].splice(M(i[t],e),1):delete i[t]}),this}},emit:function(t,e){this.options.domEvents&&function(t,e){var i=r.createEvent("Event");i.initEvent(t,!0,!0),i.gesture=e,e.target.dispatchEvent(i)}(t,e);var i=this.handlers[t]&&this.handlers[t].slice();if(i&&i.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var n=0;n<i.length;)i[n](e),n++}},destroy:function(){this.element&&ie(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},u(te,{INPUT_START:G,INPUT_MOVE:N,INPUT_END:z,INPUT_CANCEL:V,STATE_POSSIBLE:Lt,STATE_BEGAN:Ft,STATE_CHANGED:Ht,STATE_ENDED:Gt,STATE_RECOGNIZED:Nt,STATE_CANCELLED:zt,STATE_FAILED:32,DIRECTION_NONE:q,DIRECTION_LEFT:W,DIRECTION_RIGHT:K,DIRECTION_UP:Y,DIRECTION_DOWN:X,DIRECTION_HORIZONTAL:U,DIRECTION_VERTICAL:$,DIRECTION_ALL:Q,Manager:ee,Input:tt,TouchAction:Ct,TouchInput:Tt,MouseInput:ct,PointerEventInput:yt,TouchMouseInput:kt,SingleTouchInput:wt,Recognizer:Vt,AttrRecognizer:Yt,Tap:Jt,Pan:Xt,Swipe:Zt,Pinch:Ut,Rotate:Qt,Press:$t,on:S,off:k,each:v,merge:w,extend:g,assign:u,inherit:b,bindFn:x,prefixed:D}),(void 0!==o?o:"undefined"!=typeof self?self:{}).Hammer=te,(n=function(){return te}.call(e,i,e,t))===a||(t.exports=n)}(window,document)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,o=function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()},r=0,s=o();e.loop=function(t){!function(t){var e=function(){for(n=o(),r+=Math.min(1,(n-s)/1e3);r>1/60;)t.update(1/60),r-=1/60;t.render(r),s=n,requestAnimationFrame(e)};e()}(t)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,o=i(31),r=i(8),s=i(29),a=i(4),u=i(6),h=i(19),l=i(18),c=i(17),d=i(14),f=i(7);!function(t){t[t.Attract=0]="Attract",t[t.Game=1]="Game",t[t.Initials=2]="Initials",t[t.Start=3]="Start"}(n||(n={}));var p=function(){function t(){this.lastScore=0,this.init()}return t.prototype.init=function(t){var e=this;a.Sound.stop(),a.Sound.off(),this.mode=n.Start,this.highScoreMode=new h.HighScoreMode(this.lastScore),this.attractMode=new c.AttractMode(t||new s.World(u.highscores.top.score)),this.gameMode=new d.GameMode(new s.World(u.highscores.top.score)),this.attractTimer=0,this.gameMode.on("done",function(t,i){e.lastScore=i.score,u.highscores.qualifies(i.score)?(e.initialsMode=new l.InitialsMode(i.score),e.initialsMode.on("done",function(){e.init(i)}),a.Sound.stop(),a.Sound.off(),e.mode=n.Initials):e.init(i)}),this.attractStarted=!1},t.prototype.update=function(t){if(r.Key.isPressed(r.Key.GOD)&&(f.default.god=!f.default.god),r.Key.isPressed(r.Key.DEBUG)&&(f.default.debug=!f.default.debug),r.Key.isPressed(r.Key.MONITOR_BURN)&&(f.default.burn=!f.default.burn),r.Key.isPressed(r.Key.PAUSE)&&(f.default.paused=!f.default.paused,f.default.paused?a.Sound.off():a.Sound.on()),!f.default.paused)switch(this.mode){case n.Start:this.highScoreMode.update(t),this.attractStarted&&this.attractMode.update(t),r.Key.isPressed(r.Key.PLAYER_ONE_START)?(a.Sound.on(),this.mode=n.Game):this.updateAttractTimer(t);break;case n.Attract:this.attractMode.update(t),r.Key.isPressed(r.Key.PLAYER_ONE_START)?(a.Sound.on(),this.mode=n.Game):this.updateAttractTimer(t);break;case n.Initials:this.initialsMode.update(t);break;case n.Game:this.gameMode.update(t)}},t.prototype.render=function(t){switch(this.mode){case n.Start:this.highScoreMode.render(t);break;case n.Attract:this.attractMode.render(t);break;case n.Initials:this.initialsMode.render(t);break;case n.Game:this.gameMode.render(t)}r.Key.update()},t.prototype.updateAttractTimer=function(t){this.attractTimer+=t,this.attractTimer>=15&&(this.attractTimer=0,this.mode=this.mode===n.Attract?n.Start:n.Attract)},t}();e.Asteroids=p;var _=new p;setTimeout(function(){o.loop(_)},1e3)}]);